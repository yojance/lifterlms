!function(c){var t={$buttons:null,$container:null,$ui:null,attempt_key:null,current_question:0,total_questions:0,questions:{},validators:{},status:null,bind:function(){var e=this;c("#llms_start_quiz").on("click",function(t){t.preventDefault(),e.start_quiz()}),c(".llms-donut").each(function(){LLMS.Donut(c(this))}),c("#llms-quiz-attempt-select").on("change",function(){var t=c(this).val();t&&(window.location.href=t)}),c(window).on("beforeunload",function(){if(e.status)return LLMS.l10n.translate("Are you sure you wish to quit this quiz attempt?")}),c(window).on("unload",function(){e.status&&e.complete_quiz()}),c(document).on("llms-post-append-question",e.post_append_question),this.register_validator("content",this.validate),this.register_validator("choice",this.validate_choice),this.register_validator("picture_choice",this.validate_choice),this.register_validator("true_false",this.validate_choice)},add_error:function(t){this.$container.find(".llms-error").remove();var e=c('<p class="llms-error">'+t+'<a href="#"><i class="fa fa-times-circle" aria-hidden="true"></i></a></p>');e.on("click","a",function(t){t.preventDefault(),e.fadeOut("200"),setTimeout(function(){e.remove()},210)}),this.$container.append(e)},answer_question:function(e){var t,s=this,i=this.$container.find(".llms-question-wrapper"),n=i.attr("data-type");if(this.validators[n]){if(!(t=this.validators[n](i))||!0!==t.valid||!t.answer)return s.add_error(t.valid);LLMS.Ajax.call({data:{action:"quiz_answer_question",answer:t.answer,attempt_key:s.attempt_key,question_id:i.attr("data-id"),question_type:i.attr("data-type")},beforeSend:function(){var t=e.hasClass("llms-button-quiz-complete")?LLMS.l10n.translate("Grading Quiz..."):LLMS.l10n.translate("Loading Question...");s.toggle_loader("show",t),s.update_progress_bar("increment")},success:function(t){if(s.toggle_loader("hide"),t.data&&t.data.html)t.data.question_id&&s.questions["q-"+t.data.question_id]?s.load_question(s.questions["q-"+t.data.question_id]):s.load_question(t.data.html);else if(t.data&&t.data.redirect)s.redirect(t.data.redirect);else if(t.message)s.$container.append("<p>"+t.message+"</p>");else{var e=LLMS.l10n.translate("An unknown error occurred. Please try again.");s.$container.append("<p>"+e+"</p>")}}})}else console.log("No validator registered for question type "+n)},complete_quiz:function(){var s=this;LLMS.Ajax.call({data:{action:"quiz_end",attempt_key:s.attempt_key},beforeSend:function(){s.toggle_loader("show","Grading Quiz...")},success:function(t){if(s.toggle_loader("hide"),t.data&&t.data.redirect)s.redirect(t.data.redirect);else if(t.message)s.$container.append("<p>"+t.message+"</p>");else{var e=LLMS.l10n.translate("An unknown error occurred. Please try again.");s.$container.append("<p>"+e+"</p>")}}})},get_question_index:function(t){return Object.keys(this.questions).indexOf("q-"+t)},redirect:function(t){this.toggle_loader("show","Grading Quiz..."),this.status=null,window.location.href=t},previous_question:function(){var t=this;t.toggle_loader("show",LLMS.l10n.translate("Loading Question...")),t.update_progress_bar("decrement");var e=Object.keys(t.questions),s=e.indexOf("q-"+t.current_question),i=e[0];1<=s&&(i=e[s-1]),setTimeout(function(){t.toggle_loader("hide"),t.load_question(t.questions[i])},100)},register_validator:function(t,e){this.validators[t]=e},start_quiz:function(){var s=this;this.load_ui_elements(),this.$ui=c("#llms-quiz-ui"),this.$buttons=c("#llms-quiz-nav button"),this.$container=c("#llms-quiz-question-wrapper"),c("#llms-next-question, #llms-complete-quiz").on("click",function(t){t.preventDefault(),s.answer_question(c(this))}),c("#llms-prev-question").on("click",function(t){t.preventDefault(),s.previous_question()}),LLMS.Ajax.call({data:{action:"quiz_start",attempt_key:c("#llms-attempt-key").val(),lesson_id:c("#llms-lesson-id").val(),quiz_id:c("#llms-quiz-id").val()},beforeSend:function(){s.status=!0,c("#llms-quiz-wrapper, #quiz-start-button").remove(),c("html, body").stop().animate({scrollTop:0},500),s.toggle_loader("show",LLMS.l10n.translate("Loading Quiz..."))},error:function(t,e,s){console.log(t,e,s)},success:function(t){if(s.toggle_loader("hide"),t.data&&t.data.html)t.data.time_limit&&s.start_quiz_timer(t.data.time_limit),s.attempt_key=t.data.attempt_key,s.total_questions=t.data.total,s.load_question(t.data.html);else if(t.message)s.$container.append("<p>"+t.message+"</p>");else{var e=LLMS.l10n.translate("An unknown error occurred. Please try again.");s.$container.append("<p>"+e+"</p>")}}}),LLMS.is_touch_device()||(this.$ui.on("mouseenter","li.llms-choice label",function(){c(this).addClass("hovered")}),this.$ui.on("mouseleave","li.llms-choice label",function(){c(this).removeClass("hovered")}))},start_quiz_timer:function(t){var e=c('<div class="llms-quiz-timer" id="llms-quiz-timer" />'),s=LLMS.l10n.translate("Time Remaining");e.append('<i class="fa fa-clock-o" aria-hidden="true"></i><span class="screen-reader-text">'+s+"</span>"),e.append('<div id="llms-tiles" class="llms-tiles"></div>'),c("#llms-quiz-header").append(e);var i,n,a,l,o=this,r=(new Date).getTime()+60*t*1e3,u=60*t*1e3,d=document.getElementById("llms-tiles");setTimeout(function(){o.complete_quiz()},1e3+u),this.getCountdown(t,r,u,i,n,a,l,d),setInterval(function(){o.getCountdown(t,r,u,i,n,a,l,d)},1e3)},trigger:function(t){"answer_question"===t&&(this.get_question_index(this.current_question)===this.total_questions?c("#llms-complete-quiz").trigger("click"):c("#llms-next-question").trigger("click"))},load_question:function(t){var e=c(t),s=e.attr("data-id");this.questions["q-"+s]||(this.questions["q-"+s]=e),this.update_progress(s),this.current_question=s,c(document).trigger("llms-pre-append-question",e),this.$container.append(e),c(document).trigger("llms-post-append-question",e)},load_ui_elements:function(){var t=c('<div class="llms-quiz-ui" id="llms-quiz-ui" />'),e=c('<header class="llms-quiz-header" id="llms-quiz-header" />');$footer=c('<footer class="llms-quiz-nav" id="llms-quiz-nav" />'),$footer.append('<button class="button large llms-button-action" id="llms-next-question" name="llms_next_question" type="submit">'+LLMS.l10n.translate("Next Question")+"</button>"),$footer.append('<button class="button large llms-button-action llms-button-quiz-complete" id="llms-complete-quiz" name="llms_complete_quiz" type="submit" style="display:none;">'+LLMS.l10n.translate("Complete Quiz")+"</button>"),$footer.append('<button class="button llms-button-secondary" id="llms-prev-question" name="llms_prev_question" type="submit" style="display:none;">'+LLMS.l10n.translate("Previous Question")+"</button>"),e.append('<div class="llms-progress"><div class="progress-bar-complete"></div></div>'),$footer.append('<div class="llms-quiz-counter" id="llms-quiz-counter"><span class="llms-current"></span><span class="llms-sep">/</span><span class="llms-total"></span></div>'),t.append(e).append('<div class="llms-quiz-question-wrapper" id="llms-quiz-question-wrapper" />').append($footer),c("#llms-quiz-wrapper").after(t)},post_append_question:function(t,e){c(e).find("audio").length&&wp.mediaelement.initialize()},toggle_loader:function(t,e){"show"===t?(e=e||LLMS.l10n.translate("Loading..."),this.$buttons.attr("disabled","disabled"),this.$container.empty(),LLMS.Spinner.start(this.$container),this.$container.append('<div class="llms-quiz-loading">'+LLMS.l10n.translate(e)+"</div>")):(LLMS.Spinner.stop(this.$container),this.$buttons.removeAttr("disabled"),this.$container.find(".llms-quiz-loading").remove())},update_progress:function(t){var e=this.get_question_index(t);-1!==e&&(e++,c("#llms-quiz-counter .llms-current").text(e),1===e&&(c("#llms-quiz-counter .llms-total").text(this.total_questions),c("#llms-quiz-counter").show()),2<=e?c("#llms-prev-question").show():c("#llms-prev-question").hide(),e===this.total_questions?(c("#llms-next-question").hide(),c("#llms-complete-quiz").show()):(c("#llms-next-question").show(),c("#llms-complete-quiz").hide()))},update_progress_bar:function(t){var e=this.get_question_index(this.current_question);"increment"===t?e++:e--,progress=e/this.total_questions*100,this.$ui.find(".progress-bar-complete").css("width",progress+"%")},getCountdown:function(t,e,s,i,n,a,l,o){var r=(e-(new Date).getTime())/1e3;0<=r&&(1e3*r<s/2&&c("#llms-quiz-timer").addClass("color-half"),1e3*r<s/4&&(c("#llms-quiz-timer").removeClass("color-half"),c("#llms-quiz-timer").addClass("color-empty")),this.pad(parseInt(r/86400)),r%=86400,n=this.pad(parseInt(r/3600)),r%=3600,a=this.pad(parseInt(r/60)),l=this.pad(parseInt(r%60)),o.innerHTML='<span class="hours">'+n+'</span>:<span class="minutes">'+a+'</span>:<span class="seconds">'+l+"</span>")},pad:function(t){return(t<10?"0":"")+t},validate:function(t){return{answer:[],valid:!0}},validate_choice:function(t){var e=window.llms.quizzes.validate(t),s=t.find("input:checked");return s.length?s.each(function(){e.answer.push(c(this).val())}):e.valid=LLMS.l10n.translate("You must select an answer to continue."),e}};t.bind(),window.llms=window.llms||{},window.llms.quizzes=t}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxsbXMtcXVpei5qcyJdLCJuYW1lcyI6WyIkIiwicXVpeiIsIiRidXR0b25zIiwiJGNvbnRhaW5lciIsIiR1aSIsImF0dGVtcHRfa2V5IiwiY3VycmVudF9xdWVzdGlvbiIsInRvdGFsX3F1ZXN0aW9ucyIsInF1ZXN0aW9ucyIsInZhbGlkYXRvcnMiLCJzdGF0dXMiLCJiaW5kIiwic2VsZiIsInRoaXMiLCJvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInN0YXJ0X3F1aXoiLCJlYWNoIiwiTExNUyIsIkRvbnV0IiwidmFsIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwibDEwbiIsInRyYW5zbGF0ZSIsImNvbXBsZXRlX3F1aXoiLCJkb2N1bWVudCIsInBvc3RfYXBwZW5kX3F1ZXN0aW9uIiwicmVnaXN0ZXJfdmFsaWRhdG9yIiwidmFsaWRhdGUiLCJ2YWxpZGF0ZV9jaG9pY2UiLCJhZGRfZXJyb3IiLCJtc2ciLCJmaW5kIiwicmVtb3ZlIiwiJGVyciIsImZhZGVPdXQiLCJzZXRUaW1lb3V0IiwiYXBwZW5kIiwiYW5zd2VyX3F1ZXN0aW9uIiwiJGJ0biIsInZhbGlkIiwiJHF1ZXN0aW9uIiwidHlwZSIsImF0dHIiLCJhbnN3ZXIiLCJBamF4IiwiY2FsbCIsImRhdGEiLCJhY3Rpb24iLCJxdWVzdGlvbl9pZCIsInF1ZXN0aW9uX3R5cGUiLCJiZWZvcmVTZW5kIiwiaGFzQ2xhc3MiLCJ0b2dnbGVfbG9hZGVyIiwidXBkYXRlX3Byb2dyZXNzX2JhciIsInN1Y2Nlc3MiLCJyIiwiaHRtbCIsImxvYWRfcXVlc3Rpb24iLCJyZWRpcmVjdCIsIm1lc3NhZ2UiLCJjb25zb2xlIiwibG9nIiwiZ2V0X3F1ZXN0aW9uX2luZGV4IiwicWlkIiwiT2JqZWN0Iiwia2V5cyIsImluZGV4T2YiLCJ1cmwiLCJwcmV2aW91c19xdWVzdGlvbiIsImlkcyIsImN1cnIiLCJwcmV2X2lkIiwiZnVuYyIsImxvYWRfdWlfZWxlbWVudHMiLCJsZXNzb25faWQiLCJxdWl6X2lkIiwic3RvcCIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJlcnJvciIsInMiLCJ0IiwidGltZV9saW1pdCIsInN0YXJ0X3F1aXpfdGltZXIiLCJ0b3RhbCIsImlzX3RvdWNoX2RldmljZSIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJ0b3RhbF9taW51dGVzIiwiJGVsIiwiZGF5cyIsImhvdXJzIiwibWludXRlcyIsInNlY29uZHMiLCJ0YXJnZXRfZGF0ZSIsIkRhdGUiLCJnZXRUaW1lIiwiY291bnRkb3duIiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRDb3VudGRvd24iLCJzZXRJbnRlcnZhbCIsInRyaWdnZXIiLCJldmVudCIsIiRodG1sIiwidXBkYXRlX3Byb2dyZXNzIiwiJGhlYWRlciIsIiRmb290ZXIiLCJhZnRlciIsImxlbmd0aCIsIndwIiwibWVkaWFlbGVtZW50IiwiaW5pdGlhbGl6ZSIsImRpc3BsYXkiLCJlbXB0eSIsIlNwaW5uZXIiLCJzdGFydCIsInJlbW92ZUF0dHIiLCJpbmRleCIsInRleHQiLCJzaG93IiwiaGlkZSIsImRpciIsInByb2dyZXNzIiwiY3NzIiwic2Vjb25kc19sZWZ0IiwicGFkIiwicGFyc2VJbnQiLCJpbm5lckhUTUwiLCJuIiwicmV0IiwibGxtcyIsInF1aXp6ZXMiLCJjaGVja2VkIiwicHVzaCIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IkNBU0MsU0FBWUEsR0FFWixJQUFJQyxFQUFPLENBTVZDLFNBQVUsS0FNVkMsV0FBWSxLQU1aQyxJQUFLLEtBTUxDLFlBQWEsS0FNYkMsaUJBQWtCLEVBTWxCQyxnQkFBaUIsRUFNakJDLFVBQVcsR0FPWEMsV0FBWSxHQVNaQyxPQUFRLEtBUVJDLEtBQU0sV0FFTCxJQUFJQyxFQUFPQyxLQUdYYixFQUFHLG9CQUFxQmMsR0FBSSxRQUFTLFNBQVVDLEdBQzlDQSxFQUFFQyxpQkFDRkosRUFBS0ssZUFJTmpCLEVBQUcsZUFBZ0JrQixLQUFNLFdBQ3hCQyxLQUFLQyxNQUFPcEIsRUFBR2EsU0FJaEJiLEVBQUcsNkJBQThCYyxHQUFJLFNBQVUsV0FD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WSxHQUUxQixJQUFJeUYsRUFBTS9HLE9BQU9nSCxLQUFLQyxRQUFReEcsU0FBVWEsR0FDdkM0RixFQUFVNUYsRUFBVVQsS0FBTSxpQkFVM0IsT0FSTXFHLEVBQVF4QixPQUdid0IsRUFBUXRILEtBQU0sV0FDYm1ILEVBQUl0RixPQUFPMEYsS0FBTXpJLEVBQUdhLE1BQU9RLFNBSDVCZ0gsRUFBSTFGLE1BQVF4QixLQUFLTSxLQUFLQyxVQUFXLDBDQU8zQjJHLElBTVRwSSxFQUFLVSxPQUVMVyxPQUFPZ0gsS0FBT2hILE9BQU9nSCxNQUFRLEdBQzdCaEgsT0FBT2dILEtBQUtDLFFBQVV0SSxFQXB4QnRCLENBc3hCSXlJIiwiZmlsZSI6ImxsbXMtcXVpei5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWwgTExNUywgJCAqL1xuLyoganNoaW50IHN0cmljdDogdHJ1ZSAqL1xuXG4vKipcbiAqIEZyb250IEVuZCBRdWl6IENsYXNzXG4gKiBAdHlwZSAgICAge09iamVjdH1cbiAqIEBzaW5jZSAgICAxLjAuMFxuICogQHZlcnNpb24gIDMuMjQuM1xuICovXG47KCBmdW5jdGlvbiggJCApIHtcblxuXHR2YXIgcXVpeiA9IHtcblxuXHRcdC8qKlxuXHRcdCAqIFNlbGVjdG9yIG9mIGFsbCB0aGUgYXZhaWxhYmxlIGJ1dHRvbiBlbGVtZW5zXG5cdFx0ICogQHR5cGUgIG9ialxuXHRcdCAqL1xuXHRcdCRidXR0b25zOiBudWxsLFxuXG5cdFx0LyoqXG5cdFx0ICogTWFpbiBRdWVzdGlvbiBDb250YWluZXIgRWxlbWVudFxuXHRcdCAqIEB0eXBlICBvYmpcblx0XHQgKi9cblx0XHQkY29udGFpbmVyOiBudWxsLFxuXG5cdFx0LyoqXG5cdFx0ICogTWFpbiBRdWl6IGNvbnRhaW5lciBVSSBlbGVtZW50XG5cdFx0ICogQHR5cGUgIG9ialxuXHRcdCAqL1xuXHRcdCR1aTogbnVsbCxcblxuXHRcdC8qKlxuXHRcdCAqIEF0dGVtcHQga2V5IGZvciB0aGUgY3VycmVudCBxdWl6XG5cdFx0ICogQHR5cGUgIHtbdHlwZV19XG5cdFx0ICovXG5cdFx0YXR0ZW1wdF9rZXk6IG51bGwsXG5cblx0XHQvKipcblx0XHQgKiBRdWVzdGlvbiBJRCBvZiB0aGUgY3VycmVudCBxdWVzdGlvblxuXHRcdCAqIEB0eXBlICB7TnVtYmVyfVxuXHRcdCAqL1xuXHRcdGN1cnJlbnRfcXVlc3Rpb246IDAsXG5cblx0XHQvKipcblx0XHQgKiBUb3RhbCBudW1iZXIgb2YgcXVlc3Rpb25zIGluIHRoZSBjdXJyZW50IHF1aXpcblx0XHQgKiBAdHlwZSAge051bWJlcn1cblx0XHQgKi9cblx0XHR0b3RhbF9xdWVzdGlvbnM6IDAsXG5cblx0XHQvKipcblx0XHQgKiBPYmplY3Qgb2YgcXVpeiBxdWVzdGlvbiBIVE1MXG5cdFx0ICogQHR5cGUgIHtPYmplY3R9XG5cdFx0ICovXG5cdFx0cXVlc3Rpb25zOiB7fSxcblxuXHRcdC8qKlxuXHRcdCAqIFZhbGlkYXRvciBmdW5jdGlvbnMgZm9yIHF1ZXN0aW9uIHR5cGVzXG5cdFx0ICogVGhpcmQgcGFydHkgY3VzdG9tIHF1ZXN0aW9uIHR5cGVzIGNhbiByZWdpc3RlciB2YWxpZGF0b3JzIGZvciB1c2Ugd2hlbiBhbnN3ZXJpbmcgcXVlc3Rpb3NuXG5cdFx0ICogQHR5cGUgIHtPYmplY3R9XG5cdFx0ICovXG5cdFx0dmFsaWRhdG9yczoge30sXG5cblx0XHQvKipcblx0XHQgKiBSZWNvcmRzIGN1cnJlbnQgc3RhdHVzIG9mIGEgcXVpeiBzZXNzaW9uXG5cdFx0ICogSWYgYSB1c2VyIGF0dGVtcHRzIHRvIG5hdmlnYXRlIGF3YXkgZnJvbSBhIHF1aXpcblx0XHQgKiB3aGlsZSB0YWtpbmcgdGhlIHF1aXogdGhleSdsbCBiZSB3YXJuZWQgdGhhdCB0aGVpciBwcm9ncmVzc1xuXHRcdCAqIHdpbGwgbm90IGJlIHNhdmVkIGlmIHRoaXMgc3RhdHVzIGlzIG5vdCBudWxsXG5cdFx0ICogQHR5cGUgIGJvb2xlYW5cblx0XHQgKi9cblx0XHRzdGF0dXM6IG51bGwsXG5cblx0XHQvKipcblx0XHQgKiBCaW5kIERPTSBldmVudHNcblx0XHQgKiBAcmV0dXJuIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMS4wLjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xNi42XG5cdFx0ICovXG5cdFx0YmluZDogZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0Ly8gc3RhcnQgcXVpelxuXHRcdFx0JCggJyNsbG1zX3N0YXJ0X3F1aXonICkub24oICdjbGljaycsIGZ1bmN0aW9uKCBlICkge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdHNlbGYuc3RhcnRfcXVpeigpO1xuXHRcdFx0fSApO1xuXG5cdFx0XHQvLyBkcmF3IHF1aXogZ3JhZGUgY2lyY3VsYXIgY2hhcnRcblx0XHRcdCQoICcubGxtcy1kb251dCcgKS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0TExNUy5Eb251dCggJCggdGhpcyApICk7XG5cdFx0XHR9ICk7XG5cblx0XHRcdC8vIHJlZGlyZWN0IHRvIGF0dGVtcHQgb24gYXR0ZW1wdCBzZWxlY3Rpb24gY2hhbmdlXG5cdFx0XHQkKCAnI2xsbXMtcXVpei1hdHRlbXB0LXNlbGVjdCcgKS5vbiggJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgdmFsID0gJCggdGhpcyApLnZhbCgpO1xuXHRcdFx0XHRpZiAoIHZhbCApIHtcblx0XHRcdFx0XHR3aW5kb3cubG9jYXRpb24uaHJlZiA9IHZhbDtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXG5cdFx0XHQvLyB3YXJuIHdoZW4gcXVpeiBpcyBydW5uaW5nIGFuZCB1c2VyIHRyaWVzIHRvIGxlYXZlIHRoZSBwYWdlXG5cdFx0XHQkKCB3aW5kb3cgKS5vbiggJ2JlZm9yZXVubG9hZCcsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIHNlbGYuc3RhdHVzICkge1xuXHRcdFx0XHRcdHJldHVybiBMTE1TLmwxMG4udHJhbnNsYXRlKCAnQXJlIHlvdSBzdXJlIHlvdSB3aXNoIHRvIHF1aXQgdGhpcyBxdWl6IGF0dGVtcHQ/JyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cblx0XHRcdC8vIGNvbXBsZXRlIHRoZSBxdWl6IGF0dGVtcHQgd2hlbiB1c2VyIGxlYXZlcyBpZiB0aGUgcXVpeiBpcyBydW5uaW5nXG5cdFx0XHQkKCB3aW5kb3cgKS5vbiggJ3VubG9hZCcsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIHNlbGYuc3RhdHVzICkge1xuXHRcdFx0XHRcdHNlbGYuY29tcGxldGVfcXVpeigpO1xuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cblx0XHRcdCQoIGRvY3VtZW50ICkub24oICdsbG1zLXBvc3QtYXBwZW5kLXF1ZXN0aW9uJywgc2VsZi5wb3N0X2FwcGVuZF9xdWVzdGlvbiApO1xuXG5cdFx0XHQvLyByZWdpc3RlciB2YWxpZGF0b3JzXG5cdFx0XHR0aGlzLnJlZ2lzdGVyX3ZhbGlkYXRvciggJ2NvbnRlbnQnLCB0aGlzLnZhbGlkYXRlICk7XG5cdFx0XHR0aGlzLnJlZ2lzdGVyX3ZhbGlkYXRvciggJ2Nob2ljZScsIHRoaXMudmFsaWRhdGVfY2hvaWNlICk7XG5cdFx0XHR0aGlzLnJlZ2lzdGVyX3ZhbGlkYXRvciggJ3BpY3R1cmVfY2hvaWNlJywgdGhpcy52YWxpZGF0ZV9jaG9pY2UgKTtcblx0XHRcdHRoaXMucmVnaXN0ZXJfdmFsaWRhdG9yKCAndHJ1ZV9mYWxzZScsIHRoaXMudmFsaWRhdGVfY2hvaWNlICk7XG5cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogQWRkIGFuIGVycm9yIG1lc3NhZ2UgdG8gdGhlIFVJXG5cdFx0ICogQHBhcmFtICAgIHN0cmluZyAgIG1zZyAgZXJyb3IgbWVzc2FnZSBzdHJpbmdcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjE2LjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xNi4wXG5cdFx0ICovXG5cdFx0YWRkX2Vycm9yOiBmdW5jdGlvbiggbXNnICkge1xuXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdHNlbGYuJGNvbnRhaW5lci5maW5kKCAnLmxsbXMtZXJyb3InICkucmVtb3ZlKCk7XG5cdFx0XHR2YXIgJGVyciA9ICQoICc8cCBjbGFzcz1cImxsbXMtZXJyb3JcIj4nICsgbXNnICsgJzxhIGhyZWY9XCIjXCI+PGkgY2xhc3M9XCJmYSBmYS10aW1lcy1jaXJjbGVcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+PC9hPjwvcD4nICk7XG5cdFx0XHQkZXJyLm9uKCAnY2xpY2snLCAnYScsIGZ1bmN0aW9uKCBlICkge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdCRlcnIuZmFkZU91dCggJzIwMCcgKTtcblx0XHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0JGVyci5yZW1vdmUoKTtcblx0XHRcdFx0fSwgMjEwICk7XG5cdFx0XHR9ICk7XG5cdFx0XHRzZWxmLiRjb250YWluZXIuYXBwZW5kKCAkZXJyICk7XG5cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogQW5zd2VyIGEgUXVlc3Rpb25cblx0XHQgKiBAcGFyYW0gICAgb2JqICAgJGJ0biAgIGpRdWVyeSBvYmplY3QgZm9yIHRoZSBcIk5leHQgTGVzc29uXCIgYnV0dG9uXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMS4wLjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xNi42XG5cdFx0ICovXG5cdFx0YW5zd2VyX3F1ZXN0aW9uOiBmdW5jdGlvbiggJGJ0biApIHtcblxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzLFxuXHRcdFx0XHQkcXVlc3Rpb24gPSB0aGlzLiRjb250YWluZXIuZmluZCggJy5sbG1zLXF1ZXN0aW9uLXdyYXBwZXInICksXG5cdFx0XHRcdHR5cGUgPSAkcXVlc3Rpb24uYXR0ciggJ2RhdGEtdHlwZScgKSxcblx0XHRcdFx0dmFsaWQ7XG5cblx0XHRcdGlmICggISB0aGlzLnZhbGlkYXRvcnNbIHR5cGUgXSApIHtcblxuXHRcdFx0XHRjb25zb2xlLmxvZyggJ05vIHZhbGlkYXRvciByZWdpc3RlcmVkIGZvciBxdWVzdGlvbiB0eXBlICcgKyB0eXBlICk7XG5cdFx0XHRcdHJldHVybjtcblxuXHRcdFx0fVxuXG5cdFx0XHR2YWxpZCA9IHRoaXMudmFsaWRhdG9yc1sgdHlwZSBdKCAkcXVlc3Rpb24gKTtcblx0XHRcdGlmICggISB2YWxpZCB8fCB0cnVlICE9PSB2YWxpZC52YWxpZCB8fCAhdmFsaWQuYW5zd2VyICkge1xuXHRcdFx0XHRyZXR1cm4gc2VsZi5hZGRfZXJyb3IoIHZhbGlkLnZhbGlkICk7XG5cdFx0XHR9XG5cblx0XHRcdExMTVMuQWpheC5jYWxsKCB7XG5cdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRhY3Rpb246ICdxdWl6X2Fuc3dlcl9xdWVzdGlvbicsXG5cdFx0XHRcdFx0YW5zd2VyOiB2YWxpZC5hbnN3ZXIsXG5cdFx0XHRcdFx0YXR0ZW1wdF9rZXk6IHNlbGYuYXR0ZW1wdF9rZXksXG5cdFx0XHRcdFx0cXVlc3Rpb25faWQ6ICRxdWVzdGlvbi5hdHRyKCAnZGF0YS1pZCcgKSxcblx0XHRcdFx0XHRxdWVzdGlvbl90eXBlOiAkcXVlc3Rpb24uYXR0ciggJ2RhdGEtdHlwZScgKSxcblx0XHRcdFx0fSxcblx0XHRcdFx0YmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0XHR2YXIgbXNnID0gJGJ0bi5oYXNDbGFzcyggJ2xsbXMtYnV0dG9uLXF1aXotY29tcGxldGUnICkgPyBMTE1TLmwxMG4udHJhbnNsYXRlKCAnR3JhZGluZyBRdWl6Li4uJyApIDogTExNUy5sMTBuLnRyYW5zbGF0ZSggJ0xvYWRpbmcgUXVlc3Rpb24uLi4nICk7XG5cdFx0XHRcdFx0c2VsZi50b2dnbGVfbG9hZGVyKCAnc2hvdycsIG1zZyApO1xuXG5cdFx0XHRcdFx0c2VsZi51cGRhdGVfcHJvZ3Jlc3NfYmFyKCAnaW5jcmVtZW50JyApO1xuXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKCByICkge1xuXG5cdFx0XHRcdFx0c2VsZi50b2dnbGVfbG9hZGVyKCAnaGlkZScgKTtcblxuXHRcdFx0XHRcdGlmICggci5kYXRhICYmIHIuZGF0YS5odG1sICkge1xuXG5cdFx0XHRcdFx0XHQvLyBsb2FkIGh0bWwgZnJvbSB0aGUgY2FjaGVkIHF1ZXN0aW9ucyBpZiBpdCBleGlzdHMgYWxyZWFkeVxuXHRcdFx0XHRcdFx0aWYgKCByLmRhdGEucXVlc3Rpb25faWQgJiYgc2VsZi5xdWVzdGlvbnNbICdxLScgKyByLmRhdGEucXVlc3Rpb25faWQgXSApIHtcblxuXHRcdFx0XHRcdFx0XHRzZWxmLmxvYWRfcXVlc3Rpb24oIHNlbGYucXVlc3Rpb25zWyAncS0nICsgci5kYXRhLnF1ZXN0aW9uX2lkIF0gKTtcblxuXHRcdFx0XHRcdFx0Ly8gbG9hZCBodG1sIGZyb20gc2VydmVyIGlmIHRoZSBxdWVzdGlvbidzIG5ldmVyIGJlZW4gc2VlbiBiZWZvcmVcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHNlbGYubG9hZF9xdWVzdGlvbiggci5kYXRhLmh0bWwgKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoIHIuZGF0YSAmJiByLmRhdGEucmVkaXJlY3QgKSB7XG5cblx0XHRcdFx0XHRcdHNlbGYucmVkaXJlY3QoIHIuZGF0YS5yZWRpcmVjdCApO1xuXG5cdFx0XHRcdFx0fSBlbHNlIGlmICggci5tZXNzYWdlICkge1xuXG5cdFx0XHRcdFx0XHRzZWxmLiRjb250YWluZXIuYXBwZW5kKCAnPHA+JyArIHIubWVzc2FnZSArICc8L3A+JyApO1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0dmFyIG1zZyA9IExMTVMubDEwbi50cmFuc2xhdGUoICdBbiB1bmtub3duIGVycm9yIG9jY3VycmVkLiBQbGVhc2UgdHJ5IGFnYWluLicgKTtcblx0XHRcdFx0XHRcdHNlbGYuJGNvbnRhaW5lci5hcHBlbmQoICc8cD4nICsgbXNnICsgJzwvcD4nICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9ICk7XG5cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogQ29tcGxldGUgdGhlIHF1aXpcblx0XHQgKiBDYWxsZWQgd2hlbiB0aW1lZCBxdWl6emVzIHJlYWNoIHRpbWUgbGltaXRcblx0XHQgKiAmIGR1cmluZyB1bmxvYWQgZXZlbnRzIHRvIHJlY29yZCB0aGUgYXR0ZW1wdCBhcyBhYmFuZG9uZWRcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAxLjAuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjkuMFxuXHRcdCAqL1xuXHRcdGNvbXBsZXRlX3F1aXo6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdExMTVMuQWpheC5jYWxsKCB7XG5cdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRhY3Rpb246ICdxdWl6X2VuZCcsXG5cdFx0XHRcdFx0YXR0ZW1wdF9rZXk6IHNlbGYuYXR0ZW1wdF9rZXksXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdFx0c2VsZi50b2dnbGVfbG9hZGVyKCAnc2hvdycsICdHcmFkaW5nIFF1aXouLi4nICk7XG5cblx0XHRcdFx0fSxcblx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24oIHIgKSB7XG5cblx0XHRcdFx0XHRzZWxmLnRvZ2dsZV9sb2FkZXIoICdoaWRlJyApO1xuXG5cdFx0XHRcdFx0aWYgKCByLmRhdGEgJiYgci5kYXRhLnJlZGlyZWN0ICkge1xuXG5cdFx0XHRcdFx0XHRzZWxmLnJlZGlyZWN0KCByLmRhdGEucmVkaXJlY3QgKTtcblxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoIHIubWVzc2FnZSApIHtcblxuXHRcdFx0XHRcdFx0c2VsZi4kY29udGFpbmVyLmFwcGVuZCggJzxwPicgKyByLm1lc3NhZ2UgKyAnPC9wPicgKTtcblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdHZhciBtc2cgPSBMTE1TLmwxMG4udHJhbnNsYXRlKCAnQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4nICk7XG5cdFx0XHRcdFx0XHRzZWxmLiRjb250YWluZXIuYXBwZW5kKCAnPHA+JyArIG1zZyArICc8L3A+JyApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSApO1xuXG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHJpZXZlIHRoZSBpbmRleCBvZiBhIHF1ZXN0aW9uIGJ5IHF1ZXN0aW9uIGlkXG5cdFx0ICogQHBhcmFtICAgIGludCAgIHFpZCAgV1AgUG9zdCBJRCBvZiB0aGUgcXVlc3Rpb25cblx0XHQgKiBAcmV0dXJuICAgaW50XG5cdFx0ICogQHNpbmNlICAgIDMuMTYuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2LjBcblx0XHQgKi9cblx0XHRnZXRfcXVlc3Rpb25faW5kZXg6IGZ1bmN0aW9uKCBxaWQgKSB7XG5cblx0XHRcdHJldHVybiBPYmplY3Qua2V5cyggdGhpcy5xdWVzdGlvbnMgKS5pbmRleE9mKCAncS0nICsgcWlkICk7XG5cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmVkaXJlY3Qgb24gcXVpeiBjb21scGV0aW9uIC8gdGltZW91dFxuXHRcdCAqIEBwYXJhbSAgICBzdHJpbmcgICB1cmwgIHJlZGlyZWN0IHVybFxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuOS4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTYuMFxuXHRcdCAqL1xuXHRcdHJlZGlyZWN0OiBmdW5jdGlvbiggdXJsICkge1xuXG5cdFx0XHR0aGlzLnRvZ2dsZV9sb2FkZXIoICdzaG93JywgJ0dyYWRpbmcgUXVpei4uLicgKTtcblx0XHRcdHRoaXMuc3RhdHVzID0gbnVsbDtcblx0XHRcdHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsO1xuXG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybiB0byB0aGUgcHJldmlvdXMgcXVlc3Rpb25cblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAxLjAuMFxuXHQgXHQgKiBAdmVyc2lvbiAgMy4xNi42XG5cdFx0ICovXG5cdFx0cHJldmlvdXNfcXVlc3Rpb246IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdHNlbGYudG9nZ2xlX2xvYWRlciggJ3Nob3cnLCBMTE1TLmwxMG4udHJhbnNsYXRlKCAnTG9hZGluZyBRdWVzdGlvbi4uLicgKSApO1xuXHRcdFx0c2VsZi51cGRhdGVfcHJvZ3Jlc3NfYmFyKCAnZGVjcmVtZW50JyApO1xuXG5cdFx0XHR2YXIgaWRzID0gT2JqZWN0LmtleXMoIHNlbGYucXVlc3Rpb25zICksXG5cdFx0XHRcdGN1cnIgPSBpZHMuaW5kZXhPZiggJ3EtJyArIHNlbGYuY3VycmVudF9xdWVzdGlvbiApLFxuXHRcdFx0XHRwcmV2X2lkID0gaWRzWzBdO1xuXG5cdFx0XHRpZiAoIGN1cnIgPj0gMSApIHtcblx0XHRcdFx0cHJldl9pZCA9IGlkc1sgY3VyciAtIDEgXTtcblx0XHRcdH1cblxuXHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHNlbGYudG9nZ2xlX2xvYWRlciggJ2hpZGUnICk7XG5cdFx0XHRcdHNlbGYubG9hZF9xdWVzdGlvbiggc2VsZi5xdWVzdGlvbnNbIHByZXZfaWQgXSApO1xuXHRcdFx0fSwgMTAwICk7XG5cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmVnaXN0ZXIgcXVlc3Rpb24gdHlwZSB2YWxpZGF0b3IgZnVuY3Rpb25zXG5cdFx0ICogQHBhcmFtICAgIHN0cmluZyAgICAgdHlwZSAgcXVlc3Rpb24gdHlwZSBpZFxuXHRcdCAqIEBwYXJhbSAgICBmdW5jdGlvbiAgIGZ1bmMgIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHZhbGlkYXRlIHRoZSBxdWVzdGlvbiB3aXRoXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy4xNi4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTYuMFxuXHRcdCAqL1xuXHRcdHJlZ2lzdGVyX3ZhbGlkYXRvcjogZnVuY3Rpb24oIHR5cGUsIGZ1bmMgKSB7XG5cblx0XHRcdHRoaXMudmFsaWRhdG9yc1sgdHlwZSBdID0gZnVuYztcblxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBTdGFydCBhIFF1aXogdmlhIEFKQVggY2FsbFxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDEuMC4wXG5cdFx0ICogQHZlcnNpb24gIDMuMjQuM1xuXHRcdCAqL1xuXHRcdHN0YXJ0X3F1aXo6IGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHR0aGlzLmxvYWRfdWlfZWxlbWVudHMoKTtcblx0XHRcdHRoaXMuJHVpID0gJCggJyNsbG1zLXF1aXotdWknICk7XG5cdFx0XHR0aGlzLiRidXR0b25zID0gJCggJyNsbG1zLXF1aXotbmF2IGJ1dHRvbicgKTtcblx0XHRcdHRoaXMuJGNvbnRhaW5lciA9ICQoICcjbGxtcy1xdWl6LXF1ZXN0aW9uLXdyYXBwZXInICk7XG5cblx0XHRcdC8vIGJpbmQgc3VtYmlzc2lvbiBldmVudCBmb3IgYW5zd2VyaW5nIHF1ZXN0aW9uc1xuXHRcdFx0JCggJyNsbG1zLW5leHQtcXVlc3Rpb24sICNsbG1zLWNvbXBsZXRlLXF1aXonICkub24oICdjbGljaycsIGZ1bmN0aW9uKCBlICkge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdHNlbGYuYW5zd2VyX3F1ZXN0aW9uKCAkKCB0aGlzICkgKTtcblx0XHRcdH0gKTtcblxuXHRcdFx0Ly8gYmluZCBzdWJtaXNzaW9uIGV2ZW50IGZvciBuYXZpZ2F0aW5nIGJhY2t3YXJkc1xuXHRcdFx0JCggJyNsbG1zLXByZXYtcXVlc3Rpb24nICkub24oICdjbGljaycsIGZ1bmN0aW9uKCBlICkge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdHNlbGYucHJldmlvdXNfcXVlc3Rpb24oKTtcblx0XHRcdH0gKTtcblxuXHRcdFx0TExNUy5BamF4LmNhbGwoIHtcblx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdGFjdGlvbjogJ3F1aXpfc3RhcnQnLFxuXHRcdFx0XHRcdGF0dGVtcHRfa2V5OiAkKCAnI2xsbXMtYXR0ZW1wdC1rZXknICkudmFsKCksXG5cdFx0XHRcdFx0bGVzc29uX2lkIDogJCggJyNsbG1zLWxlc3Nvbi1pZCcgKS52YWwoKSxcblx0XHRcdFx0XHRxdWl6X2lkIDogJCggJyNsbG1zLXF1aXotaWQnICkudmFsKCksXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdFx0c2VsZi5zdGF0dXMgPSB0cnVlO1xuXHRcdFx0XHRcdCQoICcjbGxtcy1xdWl6LXdyYXBwZXIsICNxdWl6LXN0YXJ0LWJ1dHRvbicgKS5yZW1vdmUoKTtcblx0XHRcdFx0XHQkKCAnaHRtbCwgYm9keScgKS5zdG9wKCkuYW5pbWF0ZSgge3Njcm9sbFRvcDogMCB9LCA1MDAgKTtcblx0XHRcdFx0XHRzZWxmLnRvZ2dsZV9sb2FkZXIoICdzaG93JywgTExNUy5sMTBuLnRyYW5zbGF0ZSggJ0xvYWRpbmcgUXVpei4uLicgKSApO1xuXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGVycm9yOiBmdW5jdGlvbiggciwgcywgdCApIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyggciwgcywgdCApO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiggciApIHtcblxuXHRcdFx0XHRcdHNlbGYudG9nZ2xlX2xvYWRlciggJ2hpZGUnICk7XG5cblx0XHRcdFx0XHRpZiAoIHIuZGF0YSAmJiByLmRhdGEuaHRtbCApIHtcblxuXHRcdFx0XHRcdFx0Ly8gc3RhcnQgdGhlIHF1aXogdGltZXIgd2hlbiBhIHRpbWUgbGltaXQgaXMgc2V0XG5cdFx0XHRcdFx0XHRpZiAoIHIuZGF0YS50aW1lX2xpbWl0ICkge1xuXHRcdFx0XHRcdFx0XHRzZWxmLnN0YXJ0X3F1aXpfdGltZXIoIHIuZGF0YS50aW1lX2xpbWl0ICk7XG5cdFx0XHRcdFx0XHR9XG5cblxuXHRcdFx0XHRcdFx0c2VsZi5hdHRlbXB0X2tleSA9IHIuZGF0YS5hdHRlbXB0X2tleTtcblx0XHRcdFx0XHRcdHNlbGYudG90YWxfcXVlc3Rpb25zID0gci5kYXRhLnRvdGFsO1xuXG5cdFx0XHRcdFx0XHRzZWxmLmxvYWRfcXVlc3Rpb24oIHIuZGF0YS5odG1sICk7XG5cblx0XHRcdFx0XHR9IGVsc2UgaWYgKCByLm1lc3NhZ2UgKSB7XG5cblx0XHRcdFx0XHRcdHNlbGYuJGNvbnRhaW5lci5hcHBlbmQoICc8cD4nICsgci5tZXNzYWdlICsgJzwvcD4nICk7XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHR2YXIgbXNnID0gTExNUy5sMTBuLnRyYW5zbGF0ZSggJ0FuIHVua25vd24gZXJyb3Igb2NjdXJyZWQuIFBsZWFzZSB0cnkgYWdhaW4uJyApO1xuXHRcdFx0XHRcdFx0c2VsZi4kY29udGFpbmVyLmFwcGVuZCggJzxwPicgKyBtc2cgKyAnPC9wPicgKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdH0gKTtcblxuXHRcdFx0LyoqXG5cdFx0XHQgKiBVc2UgSlMgbW91c2UgZXZlbnRzIGluc3RlYWQgb2YgQ1NTIDpob3ZlciBiZWNhdXNlIGlPUyBpcyByZWFsbHkgc21hcnRcblx0XHRcdCAqIEBzZWU6IGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vYW5ub3lpbmctbW9iaWxlLWRvdWJsZS10YXAtbGluay1pc3N1ZS9cblx0XHRcdCAqL1xuXHRcdFx0aWYgKCAhIExMTVMuaXNfdG91Y2hfZGV2aWNlKCkgKSB7XG5cblx0XHRcdFx0dGhpcy4kdWkub24oICdtb3VzZWVudGVyJywgJ2xpLmxsbXMtY2hvaWNlIGxhYmVsJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0JCggdGhpcyApLmFkZENsYXNzKCAnaG92ZXJlZCcgKTtcblx0XHRcdFx0fSApO1xuXHRcdFx0XHR0aGlzLiR1aS5vbiggJ21vdXNlbGVhdmUnLCAnbGkubGxtcy1jaG9pY2UgbGFiZWwnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQkKCB0aGlzICkucmVtb3ZlQ2xhc3MoICdob3ZlcmVkJyApO1xuXHRcdFx0XHR9ICk7XG5cblx0XHRcdH1cblxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBTdGFydCBRdWl6IFRpbWVyXG5cdFx0ICogR2V0cyBtaW51dGVzIGZyb20gaGlkZGVuIGZpZWxkXG5cdFx0ICogTm90IHVzZWQgYXMgYWN0dWFsIHF1aXogdGltZXIuIFF1aXogaXMgdGltZWQgb24gdGhlIHNlcnZlciBmcm9tIHRoZSBxdWl6IGNsYXNzXG5cdFx0ICogQ2FsY3VsYXRlcyBtaW51dGVzIHRvIG1pbGxpc2Vjb25kcyBhbmQgdGhlbiBjb252ZXJ0cyB0byBob3VycyAvIG1pbnV0ZXNcblx0XHQgKiBXaGVuIHRpbWUgbGltaXQgcmVhY2hlcyAwIGNhbGxzIGNvbXBsZXRlX3F1aXooKSB0byBjb21wbGV0ZSBxdWl6LlxuXHRcdCAqIEByZXR1cm4gQ2FsbHMgZ2V0X2NvdW50X2Rvd24gYXQgYSBzZXQgaW50ZXJ2YWwgb2YgMSBzZWNvbmRcblx0XHQgKiBAc2luY2UgICAgMS4wLjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xNi4wXG5cdFx0ICovXG5cdFx0c3RhcnRfcXVpel90aW1lcjogZnVuY3Rpb24oIHRvdGFsX21pbnV0ZXMgKSB7XG5cblx0XHRcdC8vIGNyZWF0ZSBhbmQgYXBwZW5kIHRoZSBVSSBmb3IgdGhlIGNvdW50ZG93biBjbG9ja1xuXHRcdFx0dmFyICRlbCA9ICQoICc8ZGl2IGNsYXNzPVwibGxtcy1xdWl6LXRpbWVyXCIgaWQ9XCJsbG1zLXF1aXotdGltZXJcIiAvPicgKSxcblx0XHRcdFx0bXNnID0gTExNUy5sMTBuLnRyYW5zbGF0ZSggJ1RpbWUgUmVtYWluaW5nJyApO1xuXG5cdFx0XHQkZWwuYXBwZW5kKCAnPGkgY2xhc3M9XCJmYSBmYS1jbG9jay1vXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPjxzcGFuIGNsYXNzPVwic2NyZWVuLXJlYWRlci10ZXh0XCI+JyArIG1zZyArICc8L3NwYW4+JyApO1xuXHRcdFx0JGVsLmFwcGVuZCggJzxkaXYgaWQ9XCJsbG1zLXRpbGVzXCIgY2xhc3M9XCJsbG1zLXRpbGVzXCI+PC9kaXY+JyApO1xuXG5cdFx0XHQkKCAnI2xsbXMtcXVpei1oZWFkZXInICkuYXBwZW5kKCAkZWwgKTtcblxuXHRcdFx0Ly8gc3RhcnQgdGhlIHRpbWVyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHRcdHRhcmdldF9kYXRlID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgKyAoICggdG90YWxfbWludXRlcyAqIDYwICkgKiAxMDAwICksIC8vIHNldCB0aGUgY291bnRkb3duIGRhdGVcblx0XHRcdFx0dGltZV9saW1pdCA9ICggKCB0b3RhbF9taW51dGVzICogNjAgKSAqIDEwMDAgKSxcblx0XHRcdFx0Y291bnRkb3duID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xsbXMtdGlsZXMnKSwgLy8gZ2V0IHRhZyBlbGVtZW50XG5cdFx0XHRcdGRheXMsIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzOyAvLyB2YXJpYWJsZXMgZm9yIHRpbWUgdW5pdHNcblxuXHRcdFx0Ly9zZXQgYWN0dWFsIHRpbWVyXG5cdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0c2VsZi5jb21wbGV0ZV9xdWl6KCk7XG5cdFx0XHR9LCB0aW1lX2xpbWl0ICsgMTAwMCApO1xuXG5cdFx0XHR0aGlzLmdldENvdW50ZG93bihcblx0XHRcdFx0dG90YWxfbWludXRlcyxcblx0XHRcdFx0dGFyZ2V0X2RhdGUsXG5cdFx0XHRcdHRpbWVfbGltaXQsXG5cdFx0XHRcdGRheXMsXG5cdFx0XHRcdGhvdXJzLFxuXHRcdFx0XHRtaW51dGVzLFxuXHRcdFx0XHRzZWNvbmRzLFxuXHRcdFx0XHRjb3VudGRvd25cblx0XHRcdCk7XG5cblx0XHRcdC8vIGNhbGwgZ2V0X2NvdW50X2Rvd24gZXZlcnkgMSBzZWNvbmRcblx0XHRcdHNldEludGVydmFsKCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHNlbGYuZ2V0Q291bnRkb3duKFxuXHRcdFx0XHRcdHRvdGFsX21pbnV0ZXMsXG5cdFx0XHRcdFx0dGFyZ2V0X2RhdGUsXG5cdFx0XHRcdFx0dGltZV9saW1pdCxcblx0XHRcdFx0XHRkYXlzLFxuXHRcdFx0XHRcdGhvdXJzLFxuXHRcdFx0XHRcdG1pbnV0ZXMsXG5cdFx0XHRcdFx0c2Vjb25kcyxcblx0XHRcdFx0XHRjb3VudGRvd25cblx0XHRcdFx0KTtcblx0XHRcdH0sIDEwMDAgKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogVHJpZ2dlciBldmVudHNcblx0XHQgKiBAcGFyYW0gICAgc3RyaW5nICAgZXZlbnQgIGV2ZW50IHRvIHRyaWdnZXJcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjE2LjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xNi4wXG5cdFx0ICovXG5cdFx0dHJpZ2dlcjogZnVuY3Rpb24oIGV2ZW50ICkge1xuXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdC8vIHRyaWdnZXIgcXVlc3Rpb24gc3VibWlzc2lvbiBmb3IgdGhlIGN1cnJlbnQgcXVlc3Rpb25cblx0XHRcdGlmICggJ2Fuc3dlcl9xdWVzdGlvbicgPT09IGV2ZW50ICkge1xuXG5cdFx0XHRcdGlmICggdGhpcy5nZXRfcXVlc3Rpb25faW5kZXgoIHNlbGYuY3VycmVudF9xdWVzdGlvbiApID09PSBzZWxmLnRvdGFsX3F1ZXN0aW9ucyApIHtcblxuXHRcdFx0XHRcdCQoICcjbGxtcy1jb21wbGV0ZS1xdWl6JyApLnRyaWdnZXIoICdjbGljaycgKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0JCggJyNsbG1zLW5leHQtcXVlc3Rpb24nICkudHJpZ2dlciggJ2NsaWNrJyApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIExvYWQgdGhlIEhUTUwgb2YgYSBxdWVzdGlvbiBpbnRvIHRoZSBET00gYW5kIHRoZSBxdWVzdGlvbiBjYWNoZVxuXHRcdCAqIEBwYXJhbSAgICBzdHJpbmcgICBodG1sICBzdHJpbmcgb2YgaHRtbFxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuOS4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTYuNlxuXHRcdCAqL1xuXHRcdGxvYWRfcXVlc3Rpb246IGZ1bmN0aW9uKCBodG1sICkge1xuXG5cdFx0XHR2YXIgJGh0bWwgPSAkKCBodG1sICksXG5cdFx0XHRcdHFpZCA9ICRodG1sLmF0dHIoICdkYXRhLWlkJyApO1xuXG5cdFx0XHQvLyBjYWNoZSB0aGUgcXVlc3Rpb24gSFRNTCBmb3IgZmFzdGVyIHJld2luZHNcblx0XHRcdGlmICggIXRoaXMucXVlc3Rpb25zWyAncS0nICsgcWlkIF0gKSB7XG5cdFx0XHRcdHRoaXMucXVlc3Rpb25zWyAncS0nICsgcWlkIF0gPSAkaHRtbDtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy51cGRhdGVfcHJvZ3Jlc3MoIHFpZCApO1xuXG5cdFx0XHR0aGlzLmN1cnJlbnRfcXVlc3Rpb24gPSBxaWQ7XG5cblx0XHRcdCQoIGRvY3VtZW50ICkudHJpZ2dlciggJ2xsbXMtcHJlLWFwcGVuZC1xdWVzdGlvbicsICRodG1sICk7XG5cblx0XHRcdHRoaXMuJGNvbnRhaW5lci5hcHBlbmQoICRodG1sICk7XG5cblx0XHRcdCQoIGRvY3VtZW50ICkudHJpZ2dlciggJ2xsbXMtcG9zdC1hcHBlbmQtcXVlc3Rpb24nLCAkaHRtbCApO1xuXG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIENvbnN0cnVjdHMgdGhlIHF1aXogVUkgJiBhZGRzIHRoZSBlbGVtZW50cyBpbnRvIHRoZSBET01cblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjE2LjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xNi45XG5cdFx0ICovXG5cdFx0bG9hZF91aV9lbGVtZW50czogZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciAkaHRtbCA9ICQoICc8ZGl2IGNsYXNzPVwibGxtcy1xdWl6LXVpXCIgaWQ9XCJsbG1zLXF1aXotdWlcIiAvPicgKSxcblx0XHRcdFx0JGhlYWRlciA9ICQoICc8aGVhZGVyIGNsYXNzPVwibGxtcy1xdWl6LWhlYWRlclwiIGlkPVwibGxtcy1xdWl6LWhlYWRlclwiIC8+Jylcblx0XHRcdFx0JGZvb3RlciA9ICQoICc8Zm9vdGVyIGNsYXNzPVwibGxtcy1xdWl6LW5hdlwiIGlkPVwibGxtcy1xdWl6LW5hdlwiIC8+JyApO1xuXG5cdFx0XHQkZm9vdGVyLmFwcGVuZCggJzxidXR0b24gY2xhc3M9XCJidXR0b24gbGFyZ2UgbGxtcy1idXR0b24tYWN0aW9uXCIgaWQ9XCJsbG1zLW5leHQtcXVlc3Rpb25cIiBuYW1lPVwibGxtc19uZXh0X3F1ZXN0aW9uXCIgdHlwZT1cInN1Ym1pdFwiPicgKyBMTE1TLmwxMG4udHJhbnNsYXRlKCAnTmV4dCBRdWVzdGlvbicgKSArICc8L2J1dHRvbj4nICk7XG5cdFx0XHQkZm9vdGVyLmFwcGVuZCggJzxidXR0b24gY2xhc3M9XCJidXR0b24gbGFyZ2UgbGxtcy1idXR0b24tYWN0aW9uIGxsbXMtYnV0dG9uLXF1aXotY29tcGxldGVcIiBpZD1cImxsbXMtY29tcGxldGUtcXVpelwiIG5hbWU9XCJsbG1zX2NvbXBsZXRlX3F1aXpcIiB0eXBlPVwic3VibWl0XCIgc3R5bGU9XCJkaXNwbGF5Om5vbmU7XCI+JyArIExMTVMubDEwbi50cmFuc2xhdGUoICdDb21wbGV0ZSBRdWl6JyApICsgJzwvYnV0dG9uPicgKTtcblx0XHRcdCRmb290ZXIuYXBwZW5kKCAnPGJ1dHRvbiBjbGFzcz1cImJ1dHRvbiBsbG1zLWJ1dHRvbi1zZWNvbmRhcnlcIiBpZD1cImxsbXMtcHJldi1xdWVzdGlvblwiIG5hbWU9XCJsbG1zX3ByZXZfcXVlc3Rpb25cIiB0eXBlPVwic3VibWl0XCIgc3R5bGU9XCJkaXNwbGF5Om5vbmU7XCI+JyArIExMTVMubDEwbi50cmFuc2xhdGUoICdQcmV2aW91cyBRdWVzdGlvbicgKSArICc8L2J1dHRvbj4nICk7XG5cblx0XHRcdCRoZWFkZXIuYXBwZW5kKCAnPGRpdiBjbGFzcz1cImxsbXMtcHJvZ3Jlc3NcIj48ZGl2IGNsYXNzPVwicHJvZ3Jlc3MtYmFyLWNvbXBsZXRlXCI+PC9kaXY+PC9kaXY+JyApO1xuXHRcdFx0JGZvb3Rlci5hcHBlbmQoICc8ZGl2IGNsYXNzPVwibGxtcy1xdWl6LWNvdW50ZXJcIiBpZD1cImxsbXMtcXVpei1jb3VudGVyXCI+PHNwYW4gY2xhc3M9XCJsbG1zLWN1cnJlbnRcIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJsbG1zLXNlcFwiPi88L3NwYW4+PHNwYW4gY2xhc3M9XCJsbG1zLXRvdGFsXCI+PC9zcGFuPjwvZGl2PicpXG5cblx0XHRcdCRodG1sLmFwcGVuZCggJGhlYWRlciApXG5cdFx0XHRcdCAuYXBwZW5kKCAnPGRpdiBjbGFzcz1cImxsbXMtcXVpei1xdWVzdGlvbi13cmFwcGVyXCIgaWQ9XCJsbG1zLXF1aXotcXVlc3Rpb24td3JhcHBlclwiIC8+JyApXG5cdFx0XHRcdCAuYXBwZW5kKCAkZm9vdGVyICk7XG5cblx0XHRcdCQoICcjbGxtcy1xdWl6LXdyYXBwZXInICkuYWZ0ZXIoICRodG1sICk7XG5cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUGVyZm9ybSBhY3Rpb25zIG9uIHF1ZXN0aW9uIEhUTUwgYWZ0ZXIgaXQncyBiZWVuIGFwcGVuZGVkIHRvIHRoZSBET01cblx0XHQgKiBAcGFyYW0gICAgb2JqICAgICAgZXZlbnQgIGpzIGV2ZW50IG9iamVjdFxuXHRcdCAqIEBwYXJhbSAgICBvYmogICAgICBodG1sICAganMgSFRNTCBvYmplY3Rcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjE2LjZcblx0XHQgKiBAdmVyc2lvbiAgMy4xNi42XG5cdFx0ICovXG5cdFx0cG9zdF9hcHBlbmRfcXVlc3Rpb246IGZ1bmN0aW9uKCBldmVudCwgaHRtbCApIHtcblxuXHRcdFx0dmFyICRodG1sID0gJCggaHRtbCApO1xuXG5cdFx0XHRpZiAoICRodG1sLmZpbmQoICdhdWRpbycgKS5sZW5ndGggKSB7XG5cdFx0XHRcdHdwLm1lZGlhZWxlbWVudC5pbml0aWFsaXplKCk7XG5cdFx0XHR9XG5cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogU2hvdyBvciBoaWRlIHRoZSBcImxvYWRpbmdcIiBzcGlubnIgd2l0aCBhbiBvcHRpb24gbWVzc2FnZVxuXHRcdCAqIEBwYXJhbSAgICBzdHJpbmcgICBkaXNwbGF5ICBzaG93fGhpZGVcblx0XHQgKiBAcGFyYW0gICAgc3RyaW5nICAgbXNnICAgICAgdGV4dCB0byBkaXNwbGF5IHdoZW4gc2hvd2luZ1xuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuOS4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTYuNlxuXHRcdCAqL1xuXHRcdHRvZ2dsZV9sb2FkZXI6IGZ1bmN0aW9uKCBkaXNwbGF5LCBtc2cgKSB7XG5cblx0XHRcdGlmICggJ3Nob3cnID09PSBkaXNwbGF5ICkge1xuXG5cdFx0XHRcdG1zZyA9IG1zZyB8fCBMTE1TLmwxMG4udHJhbnNsYXRlKCAnTG9hZGluZy4uLicgKTtcblxuXHRcdFx0XHR0aGlzLiRidXR0b25zLmF0dHIoICdkaXNhYmxlZCcsICdkaXNhYmxlZCcgKTtcblxuXHRcdFx0XHR0aGlzLiRjb250YWluZXIuZW1wdHkoKTtcblx0XHRcdFx0TExNUy5TcGlubmVyLnN0YXJ0KCB0aGlzLiRjb250YWluZXIgKTtcblx0XHRcdFx0dGhpcy4kY29udGFpbmVyLmFwcGVuZCggJzxkaXYgY2xhc3M9XCJsbG1zLXF1aXotbG9hZGluZ1wiPicgKyBMTE1TLmwxMG4udHJhbnNsYXRlKCBtc2cgKSArICc8L2Rpdj4nICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0TExNUy5TcGlubmVyLnN0b3AoIHRoaXMuJGNvbnRhaW5lciApO1xuXHRcdFx0XHR0aGlzLiRidXR0b25zLnJlbW92ZUF0dHIoICdkaXNhYmxlZCcgKTtcblx0XHRcdFx0dGhpcy4kY29udGFpbmVyLmZpbmQoICcubGxtcy1xdWl6LWxvYWRpbmcnICkucmVtb3ZlKCk7XG5cblx0XHRcdH1cblxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBVcGRhdGUgdGhlIHByb2dyZXNzIGJhciBhbmQgdG9nZ2xlIGJ1dHRvbiBhdmFsYWJpbGl0eSBiYXNlZCBvbiBxdWVzdGlvbiB0aGUgcXVlc3Rpb24gYmVpbmcgc2hvd25cblx0XHQgKiBAcGFyYW0gICAge1t0eXBlXX0gICBxaWQgIFtkZXNjcmlwdGlvbl1cblx0XHQgKiBAcmV0dXJuICAge1t0eXBlXX1cblx0XHQgKiBAc2luY2UgICAgMy4xNi4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTYuMFxuXHRcdCAqL1xuXHRcdHVwZGF0ZV9wcm9ncmVzczogZnVuY3Rpb24oIHFpZCApIHtcblxuXHRcdFx0dmFyIGluZGV4ID0gdGhpcy5nZXRfcXVlc3Rpb25faW5kZXgoIHFpZCApLFxuXHRcdFx0XHRwcm9ncmVzcztcblxuXHRcdFx0aWYgKCAtMSA9PT0gaW5kZXggKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0aW5kZXgrKztcblxuXHRcdFx0JCggJyNsbG1zLXF1aXotY291bnRlciAubGxtcy1jdXJyZW50JyApLnRleHQoIGluZGV4ICk7XG5cdFx0XHRpZiAoIGluZGV4ID09PSAxICkge1xuXHRcdFx0XHQkKCAnI2xsbXMtcXVpei1jb3VudGVyIC5sbG1zLXRvdGFsJyApLnRleHQoIHRoaXMudG90YWxfcXVlc3Rpb25zICk7XG5cdFx0XHRcdCQoICcjbGxtcy1xdWl6LWNvdW50ZXInICkuc2hvdygpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBoYW5kbGUgcHJldiBxdWVzdGlvblxuXHRcdFx0aWYgKCBpbmRleCA+PSAyICkge1xuXHRcdFx0XHQkKCAnI2xsbXMtcHJldi1xdWVzdGlvbicgKS5zaG93KCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKCAnI2xsbXMtcHJldi1xdWVzdGlvbicgKS5oaWRlKCk7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggaW5kZXggPT09IHRoaXMudG90YWxfcXVlc3Rpb25zICkge1xuXHRcdFx0XHQkKCAnI2xsbXMtbmV4dC1xdWVzdGlvbicgKS5oaWRlKCk7XG5cdFx0XHRcdCQoICcjbGxtcy1jb21wbGV0ZS1xdWl6JyApLnNob3coKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCQoICcjbGxtcy1uZXh0LXF1ZXN0aW9uJyApLnNob3coKTtcblx0XHRcdFx0JCggJyNsbG1zLWNvbXBsZXRlLXF1aXonICkuaGlkZSgpO1xuXHRcdFx0fVxuXG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEluY3JlYXNlIHByb2dyZXNzIGJhciB1aSBlbG1lbnRcblx0XHQgKiBAcGFyYW0gICAgc3RyaW5nICAgZGlyICB1cGRhdGUgZGlyZWN0aW9uIFtpbmNyZW1lbnR8ZGVjcmVtZW50XVxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMTYuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2LjBcblx0XHQgKi9cblx0XHR1cGRhdGVfcHJvZ3Jlc3NfYmFyOiBmdW5jdGlvbiggZGlyICkge1xuXG5cdFx0XHR2YXIgaW5kZXggPSB0aGlzLmdldF9xdWVzdGlvbl9pbmRleCggdGhpcy5jdXJyZW50X3F1ZXN0aW9uICk7XG5cdFx0XHRpZiAoICdpbmNyZW1lbnQnID09PSBkaXIgKSB7XG5cdFx0XHRcdGluZGV4Kys7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpbmRleC0tO1xuXHRcdFx0fVxuXG5cdFx0XHRwcm9ncmVzcyA9ICggaW5kZXggLyB0aGlzLnRvdGFsX3F1ZXN0aW9ucyApICogMTAwO1xuXHRcdFx0dGhpcy4kdWkuZmluZCggJy5wcm9ncmVzcy1iYXItY29tcGxldGUnICkuY3NzKCAnd2lkdGgnLCBwcm9ncmVzcyArICclJyApO1xuXG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEdldCBDb3VudCBEb3duXG5cdFx0ICogQ2FsbGVkIGV2ZXJ5IHNlY29uZCB0byB1cGRhdGUgdGhlIG9uIHNjcmVlbiBjb3VudGRvd24gdGltZXJcblx0XHQgKiBDaGFuZ2VzIGNvbG9yIHRvIHllbGxvdyBhdCAxLzIgb2YgdG90YWwgdGltZVxuXHRcdCAqIENoYW5nZXMgY29sb3IgdG8gcmVkIGF0IDEvNCBvZiB0b3RhbCB0aW1lXG5cdFx0ICogQHBhcmFtICB7W2ludF19IG1pbnV0ZXMgICAgIFtkZXNjcmlwdGlvbl1cblx0XHQgKiBAcGFyYW0gIHtbZGF0ZV19IHRhcmdldF9kYXRlIFtkZXNjcmlwdGlvbl1cblx0XHQgKiBAcGFyYW0gIHtbaW50XX0gdGltZV9saW1pdCAgW2Rlc2NyaXB0aW9uXVxuXHRcdCAqIEBwYXJhbSAge1tpbnRdfSBkYXlzICAgICAgICBbZGVzY3JpcHRpb25dXG5cdFx0ICogQHBhcmFtICB7W2ludF19IGhvdXJzICAgICAgIFtkZXNjcmlwdGlvbl1cblx0XHQgKiBAcGFyYW0gIHtbaW50XX0gbWludXRlcyAgICAgW2Rlc2NyaXB0aW9uXVxuXHRcdCAqIEBwYXJhbSAge1tpbnRdfSBzZWNvbmRzICAgICBbZGVzY3JpcHRpb25dXG5cdFx0ICogQHBhcmFtICB7W2ludF19IGNvdW50ZG93biAgIFtkZXNjcmlwdGlvbl1cblx0XHQgKiBAcmV0dXJuIERpc3BsYXlzIHVwZGF0ZXMgaG91cnMsIG1pbnV0ZXMgb24gcXVpeiB0aW1lclxuXHRcdCAqIEBzaW5jZSAgICAxLjAuMFxuXHQgXHQgKiBAdmVyc2lvbiAgMS4wLjBcblx0XHQgKi9cblx0XHRnZXRDb3VudGRvd246IGZ1bmN0aW9uKCB0b3RhbF9taW51dGVzLCB0YXJnZXRfZGF0ZSwgdGltZV9saW1pdCwgZGF5cywgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIGNvdW50ZG93biApe1xuXG5cdFx0XHQvLyBmaW5kIHRoZSBhbW91bnQgb2YgXCJzZWNvbmRzXCIgYmV0d2VlbiBub3cgYW5kIHRhcmdldFxuXHRcdFx0dmFyIGN1cnJlbnRfZGF0ZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpLFxuXHRcdFx0XHRzZWNvbmRzX2xlZnQgPSAoIHRhcmdldF9kYXRlIC0gY3VycmVudF9kYXRlICkgLyAxMDAwO1xuXG5cdFx0XHRpZiAoIHNlY29uZHNfbGVmdCA+PSAwICkge1xuXG5cdFx0XHRcdGlmICggKCBzZWNvbmRzX2xlZnQgKiAxMDAwICkgPCAoIHRpbWVfbGltaXQgLyAyICkgKSAge1xuXG5cdFx0XHRcdFx0JCggJyNsbG1zLXF1aXotdGltZXInICkuYWRkQ2xhc3MoICdjb2xvci1oYWxmJyApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoICggc2Vjb25kc19sZWZ0ICogMTAwMCApIDwgKCB0aW1lX2xpbWl0IC8gNCApICkgIHtcblxuXHRcdFx0XHRcdCQoICcjbGxtcy1xdWl6LXRpbWVyJyApLnJlbW92ZUNsYXNzKCAnY29sb3ItaGFsZicgKTtcblx0XHRcdFx0XHQkKCAnI2xsbXMtcXVpei10aW1lcicgKS5hZGRDbGFzcyggJ2NvbG9yLWVtcHR5JyApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRkYXlzID0gdGhpcy5wYWQoIHBhcnNlSW50KHNlY29uZHNfbGVmdCAvIDg2NDAwKSApO1xuXHRcdFx0XHRzZWNvbmRzX2xlZnQgPSBzZWNvbmRzX2xlZnQgJSA4NjQwMDtcblx0XHRcdFx0aG91cnMgPSB0aGlzLnBhZCggcGFyc2VJbnQoc2Vjb25kc19sZWZ0IC8gMzYwMCkgKTtcblx0XHRcdFx0c2Vjb25kc19sZWZ0ID0gc2Vjb25kc19sZWZ0ICUgMzYwMDtcblx0XHRcdFx0bWludXRlcyA9IHRoaXMucGFkKCBwYXJzZUludCggc2Vjb25kc19sZWZ0IC8gNjAgKSApO1xuXHRcdFx0XHRzZWNvbmRzID0gdGhpcy5wYWQoIHBhcnNlSW50KCBzZWNvbmRzX2xlZnQgJSA2MCApICk7XG5cblx0XHRcdFx0Ly8gZm9ybWF0IGNvdW50ZG93biBzdHJpbmcgKyBzZXQgdGFnIHZhbHVlXG5cdFx0XHRcdGNvdW50ZG93bi5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9XCJob3Vyc1wiPicgKyBob3VycyArICc8L3NwYW4+OjxzcGFuIGNsYXNzPVwibWludXRlc1wiPicgKyBtaW51dGVzICsgJzwvc3Bhbj46PHNwYW4gY2xhc3M9XCJzZWNvbmRzXCI+JyArIHNlY29uZHMgKyAnPC9zcGFuPic7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFBhZCBOdW1iZXJcblx0XHQgKiBwYWRzIG51bWJlciB3aXRoIDAgaWYgc2luZ2xlIGRpZ2l0LlxuXHRcdCAqIEBwYXJhbSAge1tpbnRdfSBuIFtudW1iZXJdXG5cdFx0ICogQHJldHVybiB7W3N0cmluZ119IFtwYWRkZWQgbnVtYmVyXVxuXHRcdCAqIEBzaW5jZSAgICAxLjAuMFxuXHQgXHQgKiBAdmVyc2lvbiAgMS4wLjBcblx0XHQgKi9cblx0XHRwYWQ6IGZ1bmN0aW9uKG4pIHtcblx0XHRcdHJldHVybiAobiA8IDEwID8gJzAnIDogJycpICsgbjtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogQmFzaWMgdmFsaWRhdGlvbiBtZXRob2Qgd2hpY2ggcGVyZm9ybXMgbm8gdmFsaWRhdGlvbiBhbmQgcmV0dXJucyBhIHZhbGlhdGlvbiBvYmplY3Rcblx0XHQgKiBpbiB0aGUgZm9ybWF0IHJlcXVpcmVkIGJ5IHRoZSBhcHBsaWNhdGlvblxuXHRcdCAqIEBwYXJhbSAgICBvYmogICAkcXVlc3Rpb24gIGpRdWVyeSBzZWxlY3RvciBvZiB0aGUgcXVlc3Rpb25cblx0XHQgKiBAcmV0dXJuICAgb2JqXG5cdFx0ICogQHNpbmNlICAgIDMuMTYuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2LjBcblx0XHQgKi9cblx0XHR2YWxpZGF0ZTogZnVuY3Rpb24oICRxdWVzdGlvbiApIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdGFuc3dlcjogW10sXG5cdFx0XHRcdHZhbGlkOiB0cnVlLFxuXHRcdFx0fTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogVmFsaWRhdGVzIGEgY2hvaWNlIHF1ZXN0aW9uIHRvIGVuc3VyZSB0aGVyZSdzIGF0IGxlYXN0IG9uZSBjaGVja2VkIGlucHV0XG5cdFx0ICogQHBhcmFtICAgIG9iaiAgICRxdWVzdGlvbiAgalF1ZXJ5IHNlbGVjdG9yIG9mIHRoZSBxdWVzdGlvblxuXHRcdCAqIEByZXR1cm4gICBvYmpcblx0XHQgKiBAc2luY2UgICAgMy4xNi4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTYuMFxuXHRcdCAqL1xuXHRcdHZhbGlkYXRlX2Nob2ljZTogZnVuY3Rpb24oICRxdWVzdGlvbiApIHtcblxuXHRcdFx0dmFyIHJldCA9IHdpbmRvdy5sbG1zLnF1aXp6ZXMudmFsaWRhdGUoICRxdWVzdGlvbiApLFxuXHRcdFx0XHRjaGVja2VkID0gJHF1ZXN0aW9uLmZpbmQoICdpbnB1dDpjaGVja2VkJyApO1xuXG5cdFx0XHRpZiAoICFjaGVja2VkLmxlbmd0aCApIHtcblx0XHRcdFx0cmV0LnZhbGlkID0gTExNUy5sMTBuLnRyYW5zbGF0ZSggJ1lvdSBtdXN0IHNlbGVjdCBhbiBhbnN3ZXIgdG8gY29udGludWUuJyApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y2hlY2tlZC5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRyZXQuYW5zd2VyLnB1c2goICQoIHRoaXMgKS52YWwoKSApO1xuXHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiByZXQ7XG5cblx0XHR9LFxuXG5cdH07XG5cblx0cXVpei5iaW5kKCk7XG5cblx0d2luZG93LmxsbXMgPSB3aW5kb3cubGxtcyB8fCB7fTtcblx0d2luZG93LmxsbXMucXVpenplcyA9IHF1aXo7XG5cbn0gKSggalF1ZXJ5ICk7XG4iXX0=
