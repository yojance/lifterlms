!function(e){e.fn.llmsCollapsible=function(){return this.on("click",".llms-collapsible-header",function(){var t=e(this).closest(".llms-collapsible"),a=t.siblings(".llms-collapsible");t.toggleClass("opened").trigger("llms-collapsible-toggled"),t.find(".llms-collapsible-body").slideToggle(400),a.each(function(){e(this).removeClass("opened"),e(this).find(".llms-collapsible-body").slideUp(400)})}),this},window.llms=window.llms||{};var t=function(){this.repeaters={metaboxes:this,$repeaters:null,init:function(){var t=this;t.$repeaters=e(".llms-mb-list.repeater"),t.$repeaters.length&&(LLMS.wait_for(function(){return"undefined"!=typeof tinyMCE},function(){t.load(),t.bind()}),e('#post input[type="submit"], #post-preview').on("click",function(){e(this).attr("data-llms-clicked","yes")}),e("#post").on("submit",t.handle_submit))},bind:function(){var t=this;t.$repeaters.each(function(){var a=e(this),l=a.find(".llms-repeater-rows"),n=a.find(".llms-repeater-model");tinyMCE.EditorManager.execCommand("mceRemoveEditor",!0,n.find(".llms-mb-list.editor textarea").attr("id")),a.find(".llms-repeater-new-btn").on("click",function(){t.add_row(a,null,!0)}),l.sortable({handle:".llms-drag-handle",items:".llms-repeater-row",start:function(e,t){l.addClass("dragging")},stop:function(n,s){l.removeClass("dragging");var i=s.item.find("textarea.wp-editor-area");i.each(function(){var t=e(this).attr("id");tinyMCE.EditorManager.execCommand("mceRemoveEditor",!0,t),tinyMCE.EditorManager.execCommand("mceAddEditor",!0,t)}),t.save(a)}}),a.on("click",".llms-repeater-remove",function(l){l.stopPropagation();var n=e(this).closest(".llms-repeater-row");window.confirm(LLMS.l10n.translate("Are you sure you want to delete this row? This cannot be undone."))&&(n.remove(),setTimeout(function(){t.save(a)},1))})})},add_row:function(t,a,l){var n=this,s=t.find(".llms-repeater-rows"),i=t.find(".llms-repeater-model"),r=i.find(".llms-repeater-row").clone(),o=t.find(".llms-repeater-row").length,d=n.reindex(r,o);a&&e.each(a,function(t,a){var l=r.find('[name^="'+t+'"]');l.hasClass("llms-select2-student")?(e.each(a,function(e,t){l.append('<option value="'+t.key+'" selected="selected">'+t.title+"</option>")}),l.trigger("change")):l.val(a)}),setTimeout(function(){n.bind_row(r)},1),s.append(r),l&&r.find(".llms-collapsible-header").trigger("click"),tinyMCE.EditorManager.execCommand("mceAddEditor",!0,d),t.trigger("llms-new-repeater-row",{$row:r,data:a})},bind_row:function(e){this.bind_row_header(e),e.find(".llms-select2").llmsSelect2({width:"100%"}),e.find(".llms-select2-student").llmsStudentsSelect2(),this.metaboxes.bind_datepickers(e.find(".llms-datepicker")),this.metaboxes.bind_controllers(e.find("[data-is-controller]"))},bind_row_header:function(t){var a=t.find(".llms-repeater-title"),l=t.find(".llms-collapsible-header-title-field");a.attr("data-default",a.text()),l.on("keyup focusout blur",function(){var t=e(this).val();t||(t=a.attr("data-default")),a.text(t)}).trigger("keyup")},handle_submit:function(t){var a=e('#post [data-llms-clicked="yes"]'),l=a.parent().find(".spinner");if(a.is("#post-preview"))return void a.removeAttr("data-llms-clicked");t.preventDefault(),e('#post input[type="submit"]').addClass("disabled").attr("disabled","disabled"),l.addClass("is-active");var n,s=window.llms.metaboxes.repeaters,i=0;s.$repeaters.each(function(){s.save(e(this))}),n=setInterval(function(){i>=59||!e(".llms-mb-list.repeater.processing").length?(clearInterval(n),e("#post").off("submit",this.handle_submit),l.removeClass("is-active"),a.removeClass("disabled").removeAttr("disabled").trigger("click")):i++},1e3)},load:function(){var t=this;t.$repeaters.each(function(){var a=e(this);a.hasClass("is-loaded")||a.hasClass("processing")||t.store(a,"load",function(l){a.addClass("is-loaded"),e.each(l.data,function(e,l){t.add_row(a,l,!1)}),a.find(".llms-repeater-rows .llms-repeater-row").each(function(){t.bind_row(e(this))})})})},reindex:function(t,a){function l(t,l){t.each(function(){var t=e(this).attr(l);e(this).attr(l,t.replace(n,a))})}var n=t.attr("data-row-order"),s=t.find(".llms-mb-list.editor textarea");return tinyMCE.EditorManager.execCommand("mceRemoveEditor",!0,s.attr("id")),t.attr("data-row-order",a),l(t,"data-row-order"),l(t.find("button.insert-media"),"data-editor"),l(t.find('input[name^="_llms"], textarea[name^="_llms"], select[name^="_llms"]'),"id"),l(t.find('input[name^="_llms"], textarea[name^="_llms"], select[name^="_llms"]'),"name"),l(t.find("[data-controller]"),"data-controller"),l(t.find("[data-controller]"),"data-controller"),l(t.find("button.wp-switch-editor"),"data-wp-editor-id"),l(t.find("button.wp-switch-editor"),"id"),l(t.find(".wp-editor-tools"),"id"),l(t.find(".wp-editor-container"),"id"),s.attr("id")},save:function(e){e.trigger("llms-repeater-before-save",{$el:e}),this.store(e,"save")},serialize:function(t){var a=[];return t.find(".llms-repeater-rows .llms-repeater-row").each(function(){var t={};e(this).find('input[name^="_llms"], select[name^="_llms"]').each(function(){t[e(this).attr("name")]=e(this).val()}),e(this).find('textarea[name^="_llms"]').each(function(){var a=e(this).attr("name");tinyMCE.editors[a]?t[a]=tinyMCE.editors[a].getContent():t[a]=e(this).val()}),a.push(t)}),a},store:function(e,t,a){a=a||function(){};var l=this,n={action:e.find(".llms-repeater-field-handler").val(),store_action:t};"save"===t&&(n.rows=l.serialize(e)),LLMS.Ajax.call({data:n,beforeSend:function(){e.addClass("processing"),LLMS.Spinner.start(e)},success:function(t){a(t),LLMS.Spinner.stop(e),e.removeClass("processing")}})}},this.repeaters.init(),this.init=function(){var t=this;e(".llms-select2-post").each(function(){t.post_select(e(this))}),e(".llms-collapsible-group").llmsCollapsible(),this.bind_tabs();var a=[{selector:e(".llms-datepicker"),func:"bind_datepickers"},{selector:e(".llms-select2"),func:function(e){e.llmsSelect2({width:"100%"})}},{selector:e(".llms-select2-student"),func:function(e){e.llmsStudentsSelect2()}},{selector:e('input[type="checkbox"][data-controls]'),func:"bind_cb_controllers"},{selector:e("[data-is-controller]"),func:"bind_controllers"},{selector:e(".llms-table"),func:"bind_tables"},{selector:e(".llms-merge-code-wrapper"),func:"bind_merge_code_buttons"},{selector:e("a.llms-editable"),func:"bind_editables"}];if(e.each(a,function(a,l){if(l.selector.length){var n=l.selector.filter(function(){return 0===e(this).closest(".llms-repeater-model").length});"string"==typeof l.func?t[l.func](n):"function"==typeof l.func&&l.func(n)}}),window.llms.post.post_type){var l="bind_"+window.llms.post.post_type;"function"==typeof this[l]&&this[l]()}},this.bind_cb_controllers=function(t){t=t||e('input[type="checkbox"][data-controls]'),t.each(function(){var t=e(this),a=e(t.attr("data-controls")).closest(".llms-mb-list");t.on("change",function(){e(this).is(":checked")?a.slideDown(200):a.slideUp(200)}),t.trigger("change")})},this.bind_controllers=function(t){t=t||e("[data-is-controller]"),t.each(function(){var t,a=e(this),l=e('[data-controller="#'+a.attr("id")+'"]');a.on("change",function(){t="checkbox"===a.attr("type")?a.is(":checked")?a.val():"false":a.val(),l.each(function(){var a=e(this).attr("data-controller-value"),l=[];-1!==a.indexOf(",")?l=a.split(","):l.push(a),-1!==l.indexOf(t)?e(this).slideDown(200):e(this).slideUp(200)})}),a.trigger("change")})},this.bind_datepicker=function(e){var t=e.attr("data-format")||"mm/dd/yy",a=e.attr("data-max-date")||null,l=e.attr("data-min-date")||null;e.datepicker({dateFormat:t,maxDate:a,minDate:l})},this.bind_datepickers=function(t){var a=this;t=t||e(".llms-datepicker"),t.each(function(){a.bind_datepicker(e(this))})},this.bind_editables=function(){function t(t){var l,n=t.find("label").clone(),s=t.attr("data-llms-editable"),i=t.attr("data-llms-editable-type"),r=t.attr("data-llms-editable-required")||"no",o=t.attr("data-llms-editable-value");if(r="yes"===r?' required="required"':"","select"===i){var d,c=JSON.parse(t.attr("data-llms-editable-options"));l=e('<select name="'+s+'"'+r+" />");for(var m in c)d=o===m?' selected="selected"':"",l.append('<option value="'+m+'"'+d+">"+c[m]+"</option>")}else if("datetime"===i){l=e('<div class="llms-datetime-field" />'),o=JSON.parse(o);var u=t.attr("data-llms-editable-date-format")||"",f=t.attr("data-llms-editable-date-min")||"",p=t.attr("data-llms-editable-date-max")||"";$picker=e('<input class="llms-date-input llms-datepicker" data-format="'+u+'" data-max-date="'+p+'" data-min-date="'+f+'" name="'+s+'[date]" type="text" value="'+o.date+'">'),a.bind_datepicker($picker),l.append($picker),l.append("<em>@</em>"),l.append('<input class="llms-time-input" max="23" min="0" name="'+s+'[hour]" type="number" value="'+o.hour+'">'),l.append("<em>:</em>"),l.append('<input class="llms-time-input" max="59" min="0" name="'+s+'[minute]" type="number" value="'+o.minute+'">')}else l=e('<input name="'+s+'" type="'+i+'" value="'+o+'"'+r+">");t.empty().append(n).append(l),"select"===i&&setTimeout(function(){l.trigger("change")},100)}var a=this;e("a.llms-editable").on("click",function(a){a.preventDefault();var l,n=e(this);l=n.attr("data-fields")?e(n.attr("data-fields")):n.closest(".llms-metabox-section").find("[data-llms-editable]"),n.remove(),l.each(function(){t(e(this))})})},this.bind_llms_engagement=function(){var t=this;e("#_llms_engagement_type").on("change",function(){e("#_llms_engagement").trigger("llms-engagement-type-change",e(this).val())}),e("#_llms_engagement").on("llms-engagement-type-change",function(a,l){var n=e(this);switch(l){case"achievement":case"certificate":case"email":var s="llms_"+l;n.val(null).attr("data-post-type",s).trigger("change"),t.post_select(n);break;default:n.trigger("llms-engagement-type-change-external",l)}})},this.bind_llms_membership=function(){function t(){var e=l.find("tbody tr");1===e.length?e.first().show():e.first().hide()}function a(){var t=[];return l.find('tbody tr a[href="#llms-course-remove"]').each(function(){t.push(e(this).attr("data-id"))}),t}var l=e(".llms-mb-list._llms_content_table");t(),l.on("click",'a[href="#llms-course-remove"]',function(a){a.preventDefault();var l=e(this),n=l.closest("tr"),s=l.closest(".llms-mb-list");LLMS.Spinner.start(s),window.LLMS.Ajax.call({data:{action:"membership_remove_auto_enroll_course",course_id:l.attr("data-id")},beforeSend:function(){s.find("p.error").remove()},success:function(e){e.success?(n.fadeOut(200),setTimeout(function(){n.remove(),t()},400)):s.prepend('<p class="error">'+e.message+"</p>"),LLMS.Spinner.stop(s)}})}),l.on("click",'a[href="#llms-course-bulk-enroll"]',function(t){t.preventDefault();var a=e(this),l=(a.closest("tr"),a.closest(".llms-mb-list"));window.confirm(LLMS.l10n.translate("Click okay to enroll all active members into the selected course. Enrollment will take place in the background and you may leave your site after confirmation. This action cannot be undone!"))&&(LLMS.Spinner.start(l),window.LLMS.Ajax.call({data:{action:"bulk_enroll_membership_into_course",course_id:a.attr("data-id")},beforeSend:function(){l.find("p.error").remove()},success:function(e){e.success?a.replaceWith('<strong style="float:right;">'+e.data.message+"&nbsp;&nbsp;</strong>"):l.prepend('<p class="error">'+e.message+"</p>"),LLMS.Spinner.stop(l)}}))}),e("#_llms_auto_enroll").on("change",function(){var l=e(this).val(),n=e(this).find('option[value="'+e(this).val()+'"]').text();if(l){if(-1!==a().indexOf(l))return alert(LLMS.l10n.replace('"%s" is already in the course list.',{"%s":n})),void e(this).val("").trigger("change");var s=e(".llms-mb-list._llms_content_table");$tr=e("<tr />"),$tr.append('<td><span class="llms-drag-handle" style="color:#999;"><i class="fa fa-ellipsis-v" aria-hidden="true" style="margin-right:2px;"></i><i class="fa fa-ellipsis-v" aria-hidden="true"></i></span></td>'),$tr.append('<td><a href="'+window.llms.admin_url+"post.php?action=edit&post="+l+'">'+n+"</a></td>"),$tr.append('<td><a class="llms-button-danger small" data-id="'+l+'" href="#llms-course-remove" style="float:right;">'+LLMS.l10n.translate("Remove course")+'</a><a class="llms-button-secondary small" data-id="'+l+'" href="#llms-course-bulk-enroll" style="float:right;">'+LLMS.l10n.translate("Enroll All Members")+"</a></td>"),s.find("table tbody").append($tr),e(this).val("").trigger("change"),t(),s.trigger("llms-save-autoenroll-courses")}}),l.find("table tbody").sortable({handle:".llms-drag-handle",stop:function(e,t){t.item.closest(".llms-mb-list").trigger("llms-save-autoenroll-courses")}}),l.on("llms-save-autoenroll-courses",function(){var t=e(this);LLMS.Spinner.start(t),window.LLMS.Ajax.call({data:{action:"llms_save_membership_autoenroll_courses",courses:a()},error:function(e,t,a){alert(a)},complete:function(){LLMS.Spinner.stop(t)}})})},this.bind_llms_order=function(){e('button[name="llms-refund-toggle"]').on("click",function(){var t=e(this),a=t.closest("tr"),l=a.attr("data-transaction-id"),n=t.attr("data-refundable"),s="1"===t.attr("data-gateway-supports"),i=t.attr("data-gateway"),r=e("#llms-txn-refund-model .llms-txn-refund-form").clone(),o=r.find(".gateway-btn");"remove"!==t.attr("data-action")?(t.text(LLMS.l10n.translate("Cancel")),t.attr("data-action","remove"),r.find("input").removeAttr("disabled"),r.find('input[name="llms_refund_amount"]').attr("max",n),r.find('input[name="llms_refund_txn_id"]').val(l),s&&(o.find(".llms-gateway-title").text(i),o.show()),a.after(r)):(t.text(LLMS.l10n.translate("Refund")),t.attr("data-action",""),a.next("tr").remove())}),e('button[name="llms-manual-txn-toggle"]').on("click",function(){var t=e(this),a=t.closest("tr"),l=e("#llms-manual-txn-model .llms-manual-txn-form").clone();"remove"!==t.attr("data-action")?(t.text(LLMS.l10n.translate("Cancel")),t.attr("data-action","remove"),l.find("input").removeAttr("disabled"),a.after(l)):(t.text(LLMS.l10n.translate("Record a Manual Payment")),t.attr("data-action",""),a.next("tr").remove())}),e(".llms-metabox").one("focus",'.llms-metabox-field[data-llms-editable="payment_gateway"] select',function(){e(this).attr("data-original-value")||e(this).attr("data-original-value",e(this).val())}),e(".llms-metabox").on("change",'.llms-metabox-field[data-llms-editable="payment_gateway"] select',function(){var t=e(this),a=t.val(),l=JSON.parse(t.closest(".llms-metabox-field").attr("data-gateway-fields")),n=l[a];for(var s in n){var i=e('input[name="'+n[s].name+'"]'),r=i.closest(".llms-metabox-field");n[s].enabled?(r.show(),i.attr("required","required"),i.removeAttr("disabled"),a===t.attr("data-original-value")&&i.val(r.attr("data-llms-editable-value"))):(i.attr("value",""),i.removeAttr("required"),r.hide())}})},this.bind_merge_code_buttons=function(t){t=t||e(".llms-merge-code-wrapper"),t.find(".llms-merge-code-button").on("click",function(){e(this).next(".llms-merge-codes").toggleClass("active")}),t.find(".llms-merge-codes li").on("click",function(){var t=e(this),a=t.closest(".llms-merge-codes"),l=a.attr("data-target"),n=t.attr("data-code");if(-1===l.indexOf("#")){var s=window.tinymce.editors[l];s?s.insertContent(n):alert(LLMS.l10n.translate("Copy this code and paste it into the desired area")+": "+n)}else e(l).val(e(l).val()+n);a.removeClass("active")})},this.bind_tabs=function(){e(".llms-nav-tab-wrapper .tabs li").on("click",function(){var t=e(this),a=t.closest(".llms-mb-container"),l=t.attr("data-tab");t.siblings().removeClass("llms-active"),a.find(".tab-content").removeClass("llms-active"),t.addClass("llms-active"),e("#"+l).addClass("llms-active")})},this.post_select=function(t){var a="multiple"===t.attr("multiple");if(t.llmsPostsSelect2({width:a?"100%":"65%"}),!a&&!t.attr("data-no-view-button")){var l=LLMS.l10n.translate("View"),n=e('<a class="llms-button-secondary small" style="margin-left:5px;" target="_blank" href="#">'+l+' <i class="fa fa-external-link" aria-hidden="true"></i></a>');t.next(".select2").after(n),t.on("change",function(){var t=e(this).val();t?n.attr("href","/?p="+t).show():n.hide()}).trigger("change")}},this.bind_tables=function(){e('.llms-table button[name="llms-expand-table"]').on("click",function(){var t=e(this),a=t.closest(".llms-table");if(t.attr("data-text")){var l=t.text();t.text(t.attr("data-text")),t.attr("data-text",l)}a.find(".expandable").each(function(){e(this).hasClass("closed")?e(this).addClass("opened").removeClass("closed"):e(this).addClass("closed").removeClass("opened")})})},this.init()};window.llms.metaboxes=new t}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxsbXMtbWV0YWJveGVzLmpzIiwiLi4vcGFydGlhbHMvX21ldGFib3gtZmllbGQtcmVwZWF0ZXIuanMiXSwibmFtZXMiOlsiJCIsImZuIiwibGxtc0NvbGxhcHNpYmxlIiwidGhpcyIsIm9uIiwiJHBhcmVudCIsImNsb3Nlc3QiLCIkc2libGluZ3MiLCJzaWJsaW5ncyIsInRvZ2dsZUNsYXNzIiwidHJpZ2dlciIsImZpbmQiLCJzbGlkZVRvZ2dsZSIsImVhY2giLCJyZW1vdmVDbGFzcyIsInNsaWRlVXAiLCJ3aW5kb3ciLCJsbG1zIiwiTWV0YWJveGVzIiwicmVwZWF0ZXJzIiwibWV0YWJveGVzIiwiJHJlcGVhdGVycyIsImluaXQiLCJzZWxmIiwibGVuZ3RoIiwiTExNUyIsIndhaXRfZm9yIiwidGlueU1DRSIsImxvYWQiLCJiaW5kIiwiYXR0ciIsImhhbmRsZV9zdWJtaXQiLCIkcmVwZWF0ZXIiLCIkcm93cyIsIiRtb2RlbCIsIkVkaXRvck1hbmFnZXIiLCJleGVjQ29tbWFuZCIsImFkZF9yb3ciLCJzb3J0YWJsZSIsImhhbmRsZSIsIml0ZW1zIiwic3RhcnQiLCJldmVudCIsInVpIiwiYWRkQ2xhc3MiLCJzdG9wIiwiJGVkcyIsIml0ZW0iLCJlZF9pZCIsInNhdmUiLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwiJHJvdyIsImNvbmZpcm0iLCJsMTBuIiwidHJhbnNsYXRlIiwicmVtb3ZlIiwic2V0VGltZW91dCIsImRhdGEiLCJleHBhbmQiLCJjbG9uZSIsIm5ld19pbmRleCIsImVkaXRvciIsInJlaW5kZXgiLCJrZXkiLCJ2YWwiLCIkZmllbGQiLCJoYXNDbGFzcyIsImkiLCJhcHBlbmQiLCJ0aXRsZSIsImJpbmRfcm93IiwiYmluZF9yb3dfaGVhZGVyIiwibGxtc1NlbGVjdDIiLCJ3aWR0aCIsImxsbXNTdHVkZW50c1NlbGVjdDIiLCJiaW5kX2RhdGVwaWNrZXJzIiwiYmluZF9jb250cm9sbGVycyIsIiR0aXRsZSIsInRleHQiLCIkYnRuIiwiJHNwaW5uZXIiLCJwYXJlbnQiLCJpcyIsInJlbW92ZUF0dHIiLCJwcmV2ZW50RGVmYXVsdCIsIndhaXQiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJvZmYiLCJzdG9yZSIsIm9iaiIsImluZGV4IiwicmVwbGFjZV9hdHRyIiwiJGVsIiwic3RyIiwicmVwbGFjZSIsIm9sZF9pbmRleCIsIiRlZCIsInNlcmlhbGl6ZSIsInJvd3MiLCJuYW1lIiwiZWRpdG9ycyIsImdldENvbnRlbnQiLCJwdXNoIiwiYWN0aW9uIiwiY2IiLCJzdG9yZV9hY3Rpb24iLCJBamF4IiwiY2FsbCIsImJlZm9yZVNlbmQiLCJTcGlubmVyIiwic3VjY2VzcyIsInIiLCJwb3N0X3NlbGVjdCIsImJpbmRfdGFicyIsImJpbmRpbmdzIiwic2VsZWN0b3IiLCJmdW5jIiwiJHNlbGVjdG9yIiwicmVkdWNlZCIsImZpbHRlciIsInBvc3QiLCJwb3N0X3R5cGUiLCJiaW5kX2NiX2NvbnRyb2xsZXJzIiwiJGNvbnRyb2xsZXJzIiwiJGNiIiwiJGNvbnRyb2xsZWQiLCJzbGlkZURvd24iLCJwb3NzaWJsZSIsInZhbHMiLCJpbmRleE9mIiwic3BsaXQiLCJiaW5kX2RhdGVwaWNrZXIiLCJmb3JtYXQiLCJtYXhEYXRlIiwibWluRGF0ZSIsImRhdGVwaWNrZXIiLCJkYXRlRm9ybWF0IiwiJGRhdGVwaWNrZXJzIiwiYmluZF9lZGl0YWJsZXMiLCJtYWtlX2VkaXRhYmxlIiwiJGlucHV0IiwiJGxhYmVsIiwidHlwZSIsInJlcXVpcmVkIiwic2VsZWN0ZWQiLCJvcHRpb25zIiwiSlNPTiIsInBhcnNlIiwibWluX2RhdGUiLCJtYXhfZGF0ZSIsIiRwaWNrZXIiLCJkYXRlIiwiaG91ciIsIm1pbnV0ZSIsImVtcHR5IiwiJGZpZWxkcyIsImJpbmRfbGxtc19lbmdhZ2VtZW50IiwiZW5nYWdlbWVudF90eXBlIiwiJHNlbGVjdCIsImNwdCIsImJpbmRfbGxtc19tZW1iZXJzaGlwIiwidG9nZ2xlX2hlYWRlcl9yb3ciLCIkdGFibGUiLCJmaXJzdCIsInNob3ciLCJoaWRlIiwiZ2V0X2NvdXJzZV9pZHMiLCJjb3Vyc2VzIiwiJGNvbnRhaW5lciIsImNvdXJzZV9pZCIsImZhZGVPdXQiLCJwcmVwZW5kIiwibWVzc2FnZSIsInJlcGxhY2VXaXRoIiwiaWQiLCJhbGVydCIsIiVzIiwiJHRyIiwiYWRtaW5fdXJsIiwiZXJyb3IiLCJqcXhociIsImNvZGUiLCJlcnJvcl9tc2ciLCJjb21wbGV0ZSIsImJpbmRfbGxtc19vcmRlciIsInR4bl9pZCIsInJlZnVuZGFibGVfYW1vdW50IiwiZ2F0ZXdheV9zdXBwb3J0cyIsImdhdGV3YXlfdGl0bGUiLCIkbmV3X3JvdyIsIiRnYXRld2F5X2J0biIsImFmdGVyIiwibmV4dCIsIm9uZSIsImdhdGV3YXkiLCJnYXRld2F5X2RhdGEiLCJmaWVsZCIsIiR3cmFwIiwiZW5hYmxlZCIsImJpbmRfbWVyZ2VfY29kZV9idXR0b25zIiwiJHdyYXBwZXJzIiwidGFyZ2V0IiwidGlueW1jZSIsImluc2VydENvbnRlbnQiLCIkbWV0YWJveCIsInRhYl9pZCIsIm11bHRpIiwibGxtc1Bvc3RzU2VsZWN0MiIsIm1zZyIsImJpbmRfdGFibGVzIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FPQSxTQUFBQSxHQVNBQSxFQUFBQyxHQUFBQyxnQkFBQSxXQW9CQSxNQWhCQUMsTUFBQUMsR0FBQSxRQUFBLDJCQUFBLFdBRUEsR0FBQUMsR0FBQUwsRUFBQUcsTUFBQUcsUUFBQSxxQkFDQUMsRUFBQUYsRUFBQUcsU0FBQSxvQkFFQUgsR0FBQUksWUFBQSxVQUFBQyxRQUFBLDRCQUVBTCxFQUFBTSxLQUFBLDBCQUFBQyxZQUFBLEtBRUFMLEVBQUFNLEtBQUEsV0FDQWIsRUFBQUcsTUFBQVcsWUFBQSxVQUNBZCxFQUFBRyxNQUFBUSxLQUFBLDBCQUFBSSxRQUFBLFNBS0FaLE1BSUFhLE9BQUFDLEtBQUFELE9BQUFDLFFBRUEsSUFBQUMsR0FBQSxXQ3JDQWYsS0FBQWdCLFdBTUFDLFVBQUFqQixLQU1Ba0IsV0FBQSxLQVFBQyxLQUFBLFdBRUEsR0FBQUMs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KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKlxuICogQ29udHJpYnV0b3IncyBOb3RpY2VcbiAqIFxuICogVGhpcyBpcyBhIGNvbXBpbGVkIGZpbGUgYW5kIHNob3VsZCBub3QgYmUgZWRpdGVkIGRpcmVjdGx5IVxuICogVGhlIHVuY29tcGlsZWQgc2NyaXB0IGlzIGxvY2F0ZWQgaW4gdGhlIFwiYXNzZXRzL3ByaXZhdGVcIiBkaXJlY3RvcnlcbiAqIFxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8qKlxuICogTGlmdGVyTE1TIEFkbWluIFBhbmVsIE1ldGFib3ggRnVuY3Rpb25zXG4gKlxuICogQHNpbmNlIDMuMC4wXG4gKiBAc2luY2UgMy4zMC4wIE1hZGUgYXV0b2Vucm9sbCB0YWJsZSBzb3J0YWJsZSwgYWRkZWQgQUpBWCBzYXZlIGZvciBhZGRpbmcgbmV3IGNvdXJzZXMuXG4gKiBAdmVyc2lvbiAzLjMwLjBcbiAqL1xuKCBmdW5jdGlvbiggJCApIHtcblxuXHQvKipcblx0ICogalF1ZXJ5IHBsdWdpbiB0byBhbGxvdyBcImNvbGxhcHNpYmxlXCIgc2VjdGlvbnNcblx0ICpcblx0ICogQHJldHVybiAgalF1ZXJ5IG9iamVjdFxuXHQgKiBAc2luY2UgICAzLjAuMFxuXHQgKiBAdmVyc2lvbiAzLjI5LjBcblx0ICovXG5cdCQuZm4ubGxtc0NvbGxhcHNpYmxlID0gZnVuY3Rpb24oKSB7XG5cblx0XHR2YXIgJGdyb3VwID0gdGhpcztcblxuXHRcdHRoaXMub24oICdjbGljaycsICcubGxtcy1jb2xsYXBzaWJsZS1oZWFkZXInLCBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyICRwYXJlbnQgPSAkKCB0aGlzICkuY2xvc2VzdCggJy5sbG1zLWNvbGxhcHNpYmxlJyApLFxuXHRcdFx0XHQkc2libGluZ3MgPSAkcGFyZW50LnNpYmxpbmdzKCAnLmxsbXMtY29sbGFwc2libGUnICk7XG5cblx0XHRcdCRwYXJlbnQudG9nZ2xlQ2xhc3MoICdvcGVuZWQnICkudHJpZ2dlciggJ2xsbXMtY29sbGFwc2libGUtdG9nZ2xlZCcgKTtcblxuXHRcdFx0JHBhcmVudC5maW5kKCAnLmxsbXMtY29sbGFwc2libGUtYm9keScgKS5zbGlkZVRvZ2dsZSggNDAwICk7XG5cblx0XHRcdCRzaWJsaW5ncy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0JCggdGhpcyApLnJlbW92ZUNsYXNzKCAnb3BlbmVkJyApO1xuXHRcdFx0XHQkKCB0aGlzICkuZmluZCggJy5sbG1zLWNvbGxhcHNpYmxlLWJvZHknICkuc2xpZGVVcCggNDAwICk7XG5cdFx0XHR9ICk7XG5cblx0XHR9ICk7XG5cblx0XHRyZXR1cm4gdGhpcztcblxuXHR9O1xuXG5cdHdpbmRvdy5sbG1zID0gd2luZG93LmxsbXMgfHwge307XG5cblx0dmFyIE1ldGFib3hlcyA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0LyoqXG5cdFx0ICogbG9hZCBhbGwgcGFydGlhbHNcblx0XHQgKi9cblx0XHQvKipcblx0XHQgKiBMaWZ0ZXJMTVMgQWRtaW4gTWV0YWJveCBSZXBlYXRlciBGaWVsZFxuXHRcdCAqIEBzaW5jZSAgICAzLjExLjBcblx0XHQgKiBAdmVyc2lvbiAgMy4yMy4wXG5cdFx0ICovXG5cdFx0dGhpcy5yZXBlYXRlcnMgPSB7XG5cdFx0XG5cdFx0XHQvKipcblx0XHRcdCAqIFJlZmVyZW5jZSB0byB0aGUgcGFyZW50IG1ldGFib3ggY2xhc3Ncblx0XHRcdCAqIEB0eXBlICBvYmpcblx0XHRcdCAqL1xuXHRcdFx0bWV0YWJveGVzOiB0aGlzLFxuXHRcdFxuXHRcdFx0LyoqXG5cdFx0XHQgKiBqUXVlcnkgc2VsZWN0b3IgZm9yIGFsbCByZXBlYXRlciBlbGVtZW50cyBvbiB0aGUgY3VycmVudCBzY3JlZW5cblx0XHRcdCAqIEB0eXBlICB7W3R5cGVdfVxuXHRcdFx0ICovXG5cdFx0XHQkcmVwZWF0ZXJzOiBudWxsLFxuXHRcdFxuXHRcdFx0LyoqXG5cdFx0XHQgKiBJbml0XG5cdFx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdFx0ICogQHNpbmNlICAgIDMuMTEuMFxuXHRcdFx0ICogQHZlcnNpb24gIDMuMjMuMFxuXHRcdFx0ICovXG5cdFx0XHRpbml0OiBmdW5jdGlvbigpIHtcblx0XHRcblx0XHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFxuXHRcdFx0XHRzZWxmLiRyZXBlYXRlcnMgPSAkKCAnLmxsbXMtbWItbGlzdC5yZXBlYXRlcicgKTtcblx0XHRcblx0XHRcdFx0aWYgKCBzZWxmLiRyZXBlYXRlcnMubGVuZ3RoICkge1xuXHRcdFxuXHRcdFx0XHRcdC8vIHdhaXQgZm9yIHRpbnlNQ0UganVzdCBpbiBjYXNlIHRoZWlyIGVkaXRvcnMgaW4gdGhlIHJlcGVhdGVyc1xuXHRcdFx0XHRcdExMTVMud2FpdF9mb3IoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuICggJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiB0aW55TUNFICk7XG5cdFx0XHRcdFx0fSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRzZWxmLmxvYWQoKTtcblx0XHRcdFx0XHRcdHNlbGYuYmluZCgpO1xuXHRcdFx0XHRcdH0gKTtcblx0XHRcblx0XHRcdFx0XHQvLyBvbiBjbGljayBvZiBhbnkgcG9zdCBzdWJtaXQgYnV0dG9ucyBhZGQgc29tZSBkYXRhIHRvIHRoZSBzdWJtaXQgYnV0dG9uXG5cdFx0XHRcdFx0Ly8gc28gd2UgY2FuIHNlZSB3aGljaCBidXR0b24gdG8gdHJpZ2dlciBhZnRlciByZXBlYXRlcnMgYXJlIGZpbmlzaGVkXG5cdFx0XHRcdFx0JCggJyNwb3N0IGlucHV0W3R5cGU9XCJzdWJtaXRcIl0sICNwb3N0LXByZXZpZXcnICkub24oICdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0JCggdGhpcyApLmF0dHIoICdkYXRhLWxsbXMtY2xpY2tlZCcsICd5ZXMnICk7XG5cdFx0XHRcdFx0fSApO1xuXHRcdFxuXHRcdFx0XHRcdC8vIGhhbmRsZSBwb3N0IHN1Ym1pc3Npb25cblx0XHRcdFx0XHQkKCAnI3Bvc3QnICkub24oICdzdWJtaXQnLCBzZWxmLmhhbmRsZV9zdWJtaXQgKTtcblx0XHRcblx0XHRcdFx0fVxuXHRcdFxuXHRcdFx0fSxcblx0XHRcblx0XHRcdC8qKlxuXHRcdFx0ICogQmluZCBET00gRXZlbnRzXG5cdFx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdFx0ICogQHNpbmNlICAgIDMuMTEuMFxuXHRcdFx0ICogQHZlcnNpb24gIDMuMTMuMFxuXHRcdFx0ICovXG5cdFx0XHRiaW5kOiBmdW5jdGlvbigpIHtcblx0XHRcblx0XHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFxuXHRcdFx0XHRzZWxmLiRyZXBlYXRlcnMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XG5cdFx0XHRcdFx0dmFyICRyZXBlYXRlciA9ICQoIHRoaXMgKSxcblx0XHRcdFx0XHRcdCRyb3dzID0gJHJlcGVhdGVyLmZpbmQoICcubGxtcy1yZXBlYXRlci1yb3dzJyApLFxuXHRcdFx0XHRcdFx0JG1vZGVsID0gJHJlcGVhdGVyLmZpbmQoICcubGxtcy1yZXBlYXRlci1tb2RlbCcgKTtcblx0XHRcblx0XHRcdFx0XHR0aW55TUNFLkVkaXRvck1hbmFnZXIuZXhlY0NvbW1hbmQoICdtY2VSZW1vdmVFZGl0b3InLCB0cnVlLCAkbW9kZWwuZmluZCggJy5sbG1zLW1iLWxpc3QuZWRpdG9yIHRleHRhcmVhJyApLmF0dHIoICdpZCcgKSApO1xuXHRcdFxuXHRcdFx0XHRcdC8vIGZvciB0aGUgcmVwZWF0ZXIgKyBidXR0b25cblx0XHRcdFx0XHQkcmVwZWF0ZXIuZmluZCggJy5sbG1zLXJlcGVhdGVyLW5ldy1idG4nICkub24oICdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0c2VsZi5hZGRfcm93KCAkcmVwZWF0ZXIsIG51bGwsIHRydWUgKTtcblx0XHRcdFx0XHR9ICk7XG5cdFx0XG5cdFx0XHRcdFx0Ly8gbWFrZSByZXBlYXRlciByb3dzIHNvcnRhYmxlXG5cdFx0XHRcdFx0JHJvd3Muc29ydGFibGUoIHtcblx0XHRcdFx0XHRcdGhhbmRsZTogJy5sbG1zLWRyYWctaGFuZGxlJyxcblx0XHRcdFx0XHRcdGl0ZW1zOiAnLmxsbXMtcmVwZWF0ZXItcm93Jyxcblx0XHRcdFx0XHRcdHN0YXJ0OiBmdW5jdGlvbiggZXZlbnQsIHVpICkge1xuXHRcdFx0XHRcdFx0XHQkcm93cy5hZGRDbGFzcyggJ2RyYWdnaW5nJyApO1xuXHRcdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRcdHN0b3A6IGZ1bmN0aW9uKCBldmVudCwgdWkgKSB7XG5cdFx0XHRcdFx0XHRcdCRyb3dzLnJlbW92ZUNsYXNzKCAnZHJhZ2dpbmcnICk7XG5cdFx0XG5cdFx0XHRcdFx0XHRcdHZhciAkZWRzID0gdWkuaXRlbS5maW5kKCAndGV4dGFyZWEud3AtZWRpdG9yLWFyZWEnICk7XG5cdFx0XHRcdFx0XHRcdCRlZHMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIGVkX2lkID0gJCggdGhpcyApLmF0dHIoICdpZCcgKTtcblx0XHRcdFx0XHRcdFx0XHR0aW55TUNFLkVkaXRvck1hbmFnZXIuZXhlY0NvbW1hbmQoICdtY2VSZW1vdmVFZGl0b3InLCB0cnVlLCBlZF9pZCApO1xuXHRcdFx0XHRcdFx0XHRcdHRpbnlNQ0UuRWRpdG9yTWFuYWdlci5leGVjQ29tbWFuZCggJ21jZUFkZEVkaXRvcicsIHRydWUsIGVkX2lkICk7XG5cdFx0XHRcdFx0XHRcdH0gKTtcblx0XHRcblx0XHRcdFx0XHRcdFx0c2VsZi5zYXZlKCAkcmVwZWF0ZXIgKTtcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0fSApO1xuXHRcdFxuXHRcdFx0XHRcdCRyZXBlYXRlci5vbiggJ2NsaWNrJywgJy5sbG1zLXJlcGVhdGVyLXJlbW92ZScsIGZ1bmN0aW9uKCBlICkge1xuXHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRcdHZhciAkcm93ID0gJCggdGhpcyApLmNsb3Nlc3QoICcubGxtcy1yZXBlYXRlci1yb3cnICk7XG5cdFx0XHRcdFx0XHRpZiAoIHdpbmRvdy5jb25maXJtKCBMTE1TLmwxMG4udHJhbnNsYXRlKCAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIHJvdz8gVGhpcyBjYW5ub3QgYmUgdW5kb25lLicgKSApICkge1xuXHRcdFx0XHRcdFx0XHQkcm93LnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHRzZWxmLnNhdmUoICRyZXBlYXRlciApO1xuXHRcdFx0XHRcdFx0XHR9LCAxICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSApO1xuXHRcdFxuXHRcdFx0XHR9ICk7XG5cdFx0XG5cdFx0XHR9LFxuXHRcdFxuXHRcdFx0LyoqXG5cdFx0XHQgKiBBZGQgYSBuZXcgcm93IHRvIGEgcmVwZWF0ZXIgcm93cyBncm91cFxuXHRcdFx0ICogQHBhcmFtICAgIG9iaiAgICAkcmVwZWF0ZXIgIGpRdWVyeSBzZWxlY3RvciBmb3IgdGhlIHJlcGVhdGVyIHRvIGFkZCBhIHJvdyB0b1xuXHRcdFx0ICogQHBhcmFtICAgIG9iaiAgICBkYXRhICAgICAgIG9wdGlvbmFsIG9iamVjdCBvZiBkYXRhIHRvIGZpbGwgZmllbGRzIGluIHRoZSByb3cgd2l0aFxuXHRcdFx0ICogQHBhcmFtICAgIGJvb2wgICBleHBhbmQgICAgIGlmIHRydWUsIHdpbGwgYXV0b21hdGljYWxseSBvcGVuIHRoZSByb3cgYWZ0ZXIgYWRkaW5nIGl0IHRvIHRoZSBkb21cblx0XHRcdCAqIEByZXR1cm4gXHQgdm9pZFxuXHRcdFx0ICogQHNpbmNlICAgIDMuMTEuMFxuXHRcdFx0ICogQHZlcnNpb24gIDMuMTEuMFxuXHRcdFx0ICovXG5cdFx0XHRhZGRfcm93OiBmdW5jdGlvbiggJHJlcGVhdGVyLCBkYXRhLCBleHBhbmQgKSB7XG5cdFx0XG5cdFx0XHRcdHZhciBzZWxmID0gdGhpcyxcblx0XHRcdFx0XHQkcm93cyA9ICRyZXBlYXRlci5maW5kKCAnLmxsbXMtcmVwZWF0ZXItcm93cycgKSxcblx0XHRcdFx0XHQkbW9kZWwgPSAkcmVwZWF0ZXIuZmluZCggJy5sbG1zLXJlcGVhdGVyLW1vZGVsJyApLFxuXHRcdFx0XHRcdCRyb3cgPSAkbW9kZWwuZmluZCggJy5sbG1zLXJlcGVhdGVyLXJvdycgKS5jbG9uZSgpLFxuXHRcdFx0XHRcdG5ld19pbmRleCA9ICRyZXBlYXRlci5maW5kKCAnLmxsbXMtcmVwZWF0ZXItcm93JyApLmxlbmd0aCxcblx0XHRcdFx0XHRlZGl0b3IgPSBzZWxmLnJlaW5kZXgoICRyb3csIG5ld19pbmRleCApO1xuXHRcdFxuXHRcdFx0XHRpZiAoIGRhdGEgKSB7XG5cdFx0XHRcdFx0JC5lYWNoKCBkYXRhLCBmdW5jdGlvbigga2V5LCB2YWwgKSB7XG5cdFx0XG5cdFx0XHRcdFx0XHR2YXIgJGZpZWxkID0gJHJvdy5maW5kKCAnW25hbWVePVwiJyArIGtleSArICdcIl0nKTtcblx0XHRcblx0XHRcdFx0XHRcdGlmICggJGZpZWxkLmhhc0NsYXNzKCAnbGxtcy1zZWxlY3QyLXN0dWRlbnQnICkgKSB7XG5cdFx0XHRcdFx0XHRcdCQuZWFjaCggdmFsLCBmdW5jdGlvbiggaSwgZGF0YSApIHtcblx0XHRcdFx0XHRcdFx0XHQkZmllbGQuYXBwZW5kKCAnPG9wdGlvbiB2YWx1ZT1cIicgKyBkYXRhLmtleSArICdcIiBzZWxlY3RlZD1cInNlbGVjdGVkXCI+JyArIGRhdGEudGl0bGUgKyAnPC9vcHRpb24+Jylcblx0XHRcdFx0XHRcdFx0fSApIDtcblx0XHRcdFx0XHRcdFx0JGZpZWxkLnRyaWdnZXIoICdjaGFuZ2UnICk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQkZmllbGQudmFsKCB2YWwgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcblx0XHRcblx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdH1cblx0XHRcblx0XHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0c2VsZi5iaW5kX3JvdyggJHJvdyApO1xuXHRcdFx0XHR9LCAxICk7XG5cdFx0XG5cdFx0XHRcdCRyb3dzLmFwcGVuZCggJHJvdyApO1xuXHRcdFx0XHRpZiAoIGV4cGFuZCApIHtcblx0XHRcdFx0XHQkcm93LmZpbmQoICcubGxtcy1jb2xsYXBzaWJsZS1oZWFkZXInICkudHJpZ2dlciggJ2NsaWNrJyApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRpbnlNQ0UuRWRpdG9yTWFuYWdlci5leGVjQ29tbWFuZCggJ21jZUFkZEVkaXRvcicsIHRydWUsIGVkaXRvciApO1xuXHRcdFxuXHRcdFx0XHQkcmVwZWF0ZXIudHJpZ2dlciggJ2xsbXMtbmV3LXJlcGVhdGVyLXJvdycsIHtcblx0XHRcdFx0XHQkcm93OiAkcm93LFxuXHRcdFx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRcdH0gKTtcblx0XHRcblx0XHRcdH0sXG5cdFx0XG5cdFx0XHQvKipcblx0XHRcdCAqIEJpbmQgRE9NIGV2ZW50cyBmb3IgYSBzaW5nbGUgcmVwZWF0ZXIgcm93XG5cdFx0XHQgKiBAcGFyYW0gICAgb2JqICAgJHJvdyAgalF1ZXJ5IHNlbGVjdG9yIGZvciB0aGUgcm93XG5cdFx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdFx0ICogQHNpbmNlICAgIDMuMTEuMFxuXHRcdFx0ICogQHZlcnNpb24gIDMuMTMuMFxuXHRcdFx0ICovXG5cdFx0XHRiaW5kX3JvdzogZnVuY3Rpb24oICRyb3cgKSB7XG5cdFx0XG5cdFx0XHRcdHRoaXMuYmluZF9yb3dfaGVhZGVyKCAkcm93ICk7XG5cdFx0XG5cdFx0XHRcdCRyb3cuZmluZCggJy5sbG1zLXNlbGVjdDInICkubGxtc1NlbGVjdDIoIHtcblx0XHRcdFx0XHR3aWR0aDogJzEwMCUnLFxuXHRcdFx0XHR9ICk7XG5cdFx0XG5cdFx0XHRcdCRyb3cuZmluZCggJy5sbG1zLXNlbGVjdDItc3R1ZGVudCcgKS5sbG1zU3R1ZGVudHNTZWxlY3QyKCk7XG5cdFx0XG5cdFx0XHRcdHRoaXMubWV0YWJveGVzLmJpbmRfZGF0ZXBpY2tlcnMoICRyb3cuZmluZCggJy5sbG1zLWRhdGVwaWNrZXInICkgKTtcblx0XHRcdFx0dGhpcy5tZXRhYm94ZXMuYmluZF9jb250cm9sbGVycyggJHJvdy5maW5kKCAnW2RhdGEtaXMtY29udHJvbGxlcl0nICkgKTtcblx0XHRcdFx0Ly8gdGhpcy5tZXRhYm94ZXMuYmluZF9tZXJnZV9jb2RlX2J1dHRvbnMoICRyb3cuZmluZCggJy5sbG1zLW1lcmdlLWNvZGUtd3JhcHBlcicgKSApO1xuXHRcdFxuXHRcdFx0fSxcblx0XHRcblx0XHRcdC8qKlxuXHRcdFx0ICogQmluZCByb3cgaGVhZGVyIGV2ZW50c1xuXHRcdFx0ICogQHBhcmFtICAgIG9iaiAgICRyb3cgIGpRdWVyeSBzZWxlY3RvciBmb3IgdGhlIHJvd1xuXHRcdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHRcdCAqIEBzaW5jZSAgICAzLjExLjBcblx0XHRcdCAqIEB2ZXJzaW9uICAzLjExLjBcblx0XHRcdCAqL1xuXHRcdFx0YmluZF9yb3dfaGVhZGVyOiBmdW5jdGlvbiggJHJvdyApIHtcblx0XHRcblx0XHRcdFx0Ly8gaGFuZGxlIHRoZSB0aXRsZSBmaWVsZCBiaW5kaW5nXG5cdFx0XHRcdHZhciAkdGl0bGUgPSAkcm93LmZpbmQoICcubGxtcy1yZXBlYXRlci10aXRsZScgKSxcblx0XHRcdFx0XHQkZmllbGQgPSAkcm93LmZpbmQoICcubGxtcy1jb2xsYXBzaWJsZS1oZWFkZXItdGl0bGUtZmllbGQnICk7XG5cdFx0XG5cdFx0XHRcdCR0aXRsZS5hdHRyKCAnZGF0YS1kZWZhdWx0JywgJHRpdGxlLnRleHQoKSApO1xuXHRcdFxuXHRcdFx0XHQkZmllbGQub24oICdrZXl1cCBmb2N1c291dCBibHVyJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0dmFyIHZhbCA9ICQoIHRoaXMgKS52YWwoKTtcblx0XHRcdFx0XHRpZiAoICEgdmFsICkge1xuXHRcdFx0XHRcdFx0dmFsID0gJHRpdGxlLmF0dHIoICdkYXRhLWRlZmF1bHQnICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdCR0aXRsZS50ZXh0KCB2YWwgKTtcblx0XHRcdFx0fSApLnRyaWdnZXIoICdrZXl1cCcgKTtcblx0XHRcblx0XHRcdH0sXG5cdFx0XG5cdFx0XHQvKipcblx0XHRcdCAqIEhhbmRsZSBXUCBQb3N0IGZvcm0gc3VibWlzc2lvbiB0byBlbnN1cmUgcmVwZWF0ZXJzIGFyZSBzYXZlZCBiZWZvcmUgc3VibWl0dGluZyB0aGUgZm9ybSB0byBzYXZlL3B1Ymxpc2ggdGhlIHBvc3Rcblx0XHRcdCAqIEBwYXJhbSAgICBvYmogICBlICBKUyBldmVudCBvYmplY3Rcblx0XHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0XHQgKiBAc2luY2UgICAgMy4xMS4wXG5cdFx0XHQgKiBAdmVyc2lvbiAgMy4yMy4wXG5cdFx0XHQgKi9cblx0XHRcdGhhbmRsZV9zdWJtaXQ6IGZ1bmN0aW9uKCBlICkge1xuXHRcdFxuXHRcdFx0XHQvLyBnZXQgdGhlIGJ1dHRvbiB1c2VkIHRvIHN1Ym1pdCB0aGUgZm9ybVxuXHRcdFx0XHR2YXIgJGJ0biA9ICQoICcjcG9zdCBbZGF0YS1sbG1zLWNsaWNrZWQ9XCJ5ZXNcIl0nICksXG5cdFx0XHRcdFx0JHNwaW5uZXIgPSAkYnRuLnBhcmVudCgpLmZpbmQoICcuc3Bpbm5lcicgKTtcblx0XHRcblx0XHRcdFx0aWYgKCAkYnRuLmlzKCAnI3Bvc3QtcHJldmlldycgKSApIHtcblx0XHRcdFx0XHQkYnRuLnJlbW92ZUF0dHIoICdkYXRhLWxsbXMtY2xpY2tlZCcgKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFxuXHRcdFx0XHQvLyBjb3JlIFVYIHRvIHByZXZlbnQgbXVsdGktY2xpY2svb3IgdGhlIGFwcGVhcmFuY2Ugb2YgYSBkZWxheVxuXHRcdFx0XHQkKCAnI3Bvc3QgaW5wdXRbdHlwZT1cInN1Ym1pdFwiXScgKS5hZGRDbGFzcyggJ2Rpc2FibGVkJyApLmF0dHIoICdkaXNhYmxlZCcsICdkaXNhYmxlZCcgKTtcblx0XHRcdFx0JHNwaW5uZXIuYWRkQ2xhc3MoICdpcy1hY3RpdmUnICk7XG5cdFx0XG5cdFx0XHRcdHZhciBzZWxmID0gd2luZG93LmxsbXMubWV0YWJveGVzLnJlcGVhdGVycyxcblx0XHRcdFx0XHRpID0gMCxcblx0XHRcdFx0XHR3YWl0O1xuXHRcdFxuXHRcdFx0XHRzZWxmLiRyZXBlYXRlcnMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0c2VsZi5zYXZlKCAkKCB0aGlzICkgKTtcblx0XHRcdFx0fSApO1xuXHRcdFxuXHRcdFx0XHR3YWl0ID0gc2V0SW50ZXJ2YWwoIGZ1bmN0aW9uKCkge1xuXHRcdFxuXHRcdFx0XHRcdGlmICggaSA+PSA1OSB8fCAhICQoICcubGxtcy1tYi1saXN0LnJlcGVhdGVyLnByb2Nlc3NpbmcnICkubGVuZ3RoICkge1xuXHRcdFxuXHRcdFx0XHRcdFx0Y2xlYXJJbnRlcnZhbCggd2FpdCApO1xuXHRcdFx0XHRcdFx0JCggJyNwb3N0JyApLm9mZiggJ3N1Ym1pdCcsIHRoaXMuaGFuZGxlX3N1Ym1pdCApO1xuXHRcdFx0XHRcdFx0JHNwaW5uZXIucmVtb3ZlQ2xhc3MoICdpcy1hY3RpdmUnICk7XG5cdFx0XHRcdFx0XHQkYnRuLnJlbW92ZUNsYXNzKCAnZGlzYWJsZWQnICkucmVtb3ZlQXR0ciggJ2Rpc2FibGVkJyApLnRyaWdnZXIoICdjbGljaycgKTtcblx0XHRcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFxuXHRcdFx0XHRcdFx0aSsrO1xuXHRcdFxuXHRcdFx0XHRcdH1cblx0XHRcblx0XHRcdFx0fSwgMTAwMCApO1xuXHRcdFxuXHRcdFxuXHRcdFx0fSxcblx0XHRcblx0XHRcdC8qKlxuXHRcdFx0ICogTG9hZCByZXBlcmVhdGVyIGRhdGEgZnJvbSB0aGUgc2VydmVyIGFuZCBjcmVhdGUgcm93cyBpbiB0aGUgRE9NXG5cdFx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdFx0ICogQHNpbmNlICAgIDMuMTEuMFxuXHRcdFx0ICogQHZlcnNpb24gIDMuMTIuMVxuXHRcdFx0ICovXG5cdFx0XHRsb2FkOiBmdW5jdGlvbigpIHtcblx0XHRcblx0XHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdFxuXHRcdFx0XHRzZWxmLiRyZXBlYXRlcnMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XG5cdFx0XHRcdFx0dmFyICRyZXBlYXRlciA9ICQoIHRoaXMgKTtcblx0XHRcblx0XHRcdFx0XHQvLyBlbnN1cmUgdGhlIHJlcGVhdGVyIGlzIG9ubHkgbG9hZGVkIG9uY2UgdG8gcHJldmVudCBkdXBsaWNhdGVzIHJlc3VsdGluZyBmcm9tIGR1cGxpY2F0aW5nIGJpbmRpbmdcblx0XHRcdFx0XHQvLyBvbiBjZXJ0YWluIHNpdGVzIHdoaWNoIEkgY2Fubm90IHF1aXRlIGV4cGxhaW4uLi5cblx0XHRcdFx0XHRpZiAoICRyZXBlYXRlci5oYXNDbGFzcyggJ2lzLWxvYWRlZCcgKSB8fCAkcmVwZWF0ZXIuaGFzQ2xhc3MoICdwcm9jZXNzaW5nJyApICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcblx0XHRcdFx0XHRzZWxmLnN0b3JlKCAkcmVwZWF0ZXIsICdsb2FkJywgZnVuY3Rpb24oIGRhdGEgKSB7XG5cdFx0XG5cdFx0XHRcdFx0XHQkcmVwZWF0ZXIuYWRkQ2xhc3MoICdpcy1sb2FkZWQnICk7XG5cdFx0XG5cdFx0XHRcdFx0XHQkLmVhY2goIGRhdGEuZGF0YSwgZnVuY3Rpb24oIGksIG9iaiApIHtcblx0XHRcdFx0XHRcdFx0c2VsZi5hZGRfcm93KCAkcmVwZWF0ZXIsIG9iaiwgZmFsc2UgKTtcblx0XHRcdFx0XHRcdH0gKTtcblx0XHRcblx0XHRcdFx0XHRcdC8vIGZvciBlYWNoIHJvdyB3aXRoaW4gdGhlIHJlcGVhdGVyXG5cdFx0XHRcdFx0XHQkcmVwZWF0ZXIuZmluZCggJy5sbG1zLXJlcGVhdGVyLXJvd3MgLmxsbXMtcmVwZWF0ZXItcm93JyApLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRzZWxmLmJpbmRfcm93KCAkKCB0aGlzICkgKTtcblx0XHRcdFx0XHRcdH0gKTtcblx0XHRcblx0XHRcdFx0XHR9ICk7XG5cdFx0XG5cdFx0XG5cdFx0XG5cdFx0XHRcdH0gKTtcblx0XHRcblx0XHRcdH0sXG5cdFx0XG5cdFx0XHQvKipcblx0XHRcdCAqIFJlaW5kZXggYSByb3dcblx0XHRcdCAqIHJlbmFtZXMgaWRzLCBhdHRycywgYW5kIGV0Yy4uLlxuXHRcdFx0ICogVXNlZCB3aGVuIGNsb25pbmcgdGhlIG1vZGVsIGZvciBuZXcgcm93c1xuXHRcdFx0ICogQHBhcmFtICAgIG9iaiAgICAgICAgICAkcm93ICBqUXVlcnkgc2VsZWN0b3IgZm9yIHRoZSByb3dcblx0XHRcdCAqIEBwYXJhbSAgICBpbnR8c3RyaW5nICAgaW5kZXggIGluZGV4IChvciBpZCkgdG8gdXNlIHdoZW4gcmVuYW1pbmdcblx0XHRcdCAqIEByZXR1cm4gICBzdHJpbmdcblx0XHRcdCAqIEBzaW5jZSAgICAzLjExLjBcblx0XHRcdCAqIEB2ZXJzaW9uICAzLjExLjBcblx0XHRcdCAqL1xuXHRcdFx0cmVpbmRleDogZnVuY3Rpb24oICRyb3csIGluZGV4ICkge1xuXHRcdFxuXHRcdFx0XHR2YXIgb2xkX2luZGV4ID0gJHJvdy5hdHRyKCAnZGF0YS1yb3ctb3JkZXInICksXG5cdFx0XHRcdFx0JGVkID0gJHJvdy5maW5kKCAnLmxsbXMtbWItbGlzdC5lZGl0b3IgdGV4dGFyZWEnICk7XG5cdFx0XG5cdFx0XHRcdHRpbnlNQ0UuRWRpdG9yTWFuYWdlci5leGVjQ29tbWFuZCggJ21jZVJlbW92ZUVkaXRvcicsIHRydWUsICRlZC5hdHRyKCAnaWQnICkgKTtcblx0XHRcblx0XHRcdFx0ZnVuY3Rpb24gcmVwbGFjZV9hdHRyKCAkZWwsIGF0dHIgKSB7XG5cdFx0XHRcdFx0JGVsLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0dmFyIHN0ciA9ICQoIHRoaXMgKS5hdHRyKCBhdHRyICk7XG5cdFx0XHRcdFx0XHQkKCB0aGlzICkuYXR0ciggYXR0ciwgc3RyLnJlcGxhY2UoIG9sZF9pbmRleCwgaW5kZXggKSApO1xuXHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0fTtcblx0XHRcblx0XHRcdFx0JHJvdy5hdHRyKCAnZGF0YS1yb3ctb3JkZXInLCBpbmRleCApO1xuXHRcdFxuXHRcdFx0XHRyZXBsYWNlX2F0dHIoICRyb3csICdkYXRhLXJvdy1vcmRlcicgKTtcblx0XHRcblx0XHRcdFx0cmVwbGFjZV9hdHRyKCAkcm93LmZpbmQoICdidXR0b24uaW5zZXJ0LW1lZGlhJyApLCAnZGF0YS1lZGl0b3InICk7XG5cdFx0XG5cdFx0XHRcdHJlcGxhY2VfYXR0ciggJHJvdy5maW5kKCAnaW5wdXRbbmFtZV49XCJfbGxtc1wiXSwgdGV4dGFyZWFbbmFtZV49XCJfbGxtc1wiXSwgc2VsZWN0W25hbWVePVwiX2xsbXNcIl0nICksICdpZCcgKTtcblx0XHRcdFx0cmVwbGFjZV9hdHRyKCAkcm93LmZpbmQoICdpbnB1dFtuYW1lXj1cIl9sbG1zXCJdLCB0ZXh0YXJlYVtuYW1lXj1cIl9sbG1zXCJdLCBzZWxlY3RbbmFtZV49XCJfbGxtc1wiXScgKSwgJ25hbWUnICk7XG5cdFx0XHRcdHJlcGxhY2VfYXR0ciggJHJvdy5maW5kKCAnW2RhdGEtY29udHJvbGxlcl0nICksICdkYXRhLWNvbnRyb2xsZXInICk7XG5cdFx0XHRcdHJlcGxhY2VfYXR0ciggJHJvdy5maW5kKCAnW2RhdGEtY29udHJvbGxlcl0nICksICdkYXRhLWNvbnRyb2xsZXInICk7XG5cdFx0XHRcdHJlcGxhY2VfYXR0ciggJHJvdy5maW5kKCAnYnV0dG9uLndwLXN3aXRjaC1lZGl0b3InICksICdkYXRhLXdwLWVkaXRvci1pZCcgKTtcblx0XHRcdFx0cmVwbGFjZV9hdHRyKCAkcm93LmZpbmQoICdidXR0b24ud3Atc3dpdGNoLWVkaXRvcicgKSwgJ2lkJyApO1xuXHRcdFx0XHRyZXBsYWNlX2F0dHIoICRyb3cuZmluZCggJy53cC1lZGl0b3ItdG9vbHMnICksICdpZCcgKTtcblx0XHRcdFx0cmVwbGFjZV9hdHRyKCAkcm93LmZpbmQoICcud3AtZWRpdG9yLWNvbnRhaW5lcicgKSwgJ2lkJyApO1xuXHRcdFxuXHRcdFxuXHRcdFx0XHRyZXR1cm4gJGVkLmF0dHIoICdpZCcgKTtcblx0XHRcblx0XHRcdH0sXG5cdFx0XG5cdFx0XHQvKipcblx0XHRcdCAqIFNhdmUgYSBzaW5nbGUgcmVwZWF0ZXJzIGRhdGEgdG8gdGhlIHNlcnZlclxuXHRcdFx0ICogQHBhcmFtICAgIG9iaiAgICRyZXBlYXRlciAgalF1ZXJ5IHNlbGVjdG9yIGZvciBhIHJlcGVhdGVyIGVsZW1lbnRcblx0XHRcdCAqIEByZXR1cm4gICB2b2lzXG5cdFx0XHQgKiBAc2luY2UgICAgMy4xMS4wXG5cdFx0XHQgKiBAdmVyc2lvbiAgMy4xMy4wXG5cdFx0XHQgKi9cblx0XHRcdHNhdmU6IGZ1bmN0aW9uKCAkcmVwZWF0ZXIgKSB7XG5cdFx0XHRcdCRyZXBlYXRlci50cmlnZ2VyKCAnbGxtcy1yZXBlYXRlci1iZWZvcmUtc2F2ZScsIHsgJGVsOiAkcmVwZWF0ZXIgfSApO1xuXHRcdFx0XHR0aGlzLnN0b3JlKCAkcmVwZWF0ZXIsICdzYXZlJyApO1xuXHRcdFx0fSxcblx0XHRcblx0XHRcdC8qKlxuXHRcdFx0ICogQ29udmVydCBhIHJlcGVhdGVyIGVsZW1lbnQgaW50byBhbiBhcnJheSBvZiBvYmplY3RzIHRoYXQgY2FuIGJlIHNhdmVkIHRvIHRoZSBkYXRhYmFzZVxuXHRcdFx0ICogQHBhcmFtICAgIG9iaiAgICRyZXBlYXRlciAgalF1ZXJ5IHNlbGVjdG9yIGZvciBhIHJlcGVhdGVyIGVsZW1lbnRcblx0XHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0XHQgKiBAc2luY2UgICAgMy4xMS4wXG5cdFx0XHQgKiBAdmVyc2lvbiAgMy4xMS4wXG5cdFx0XHQgKi9cblx0XHRcdHNlcmlhbGl6ZTogZnVuY3Rpb24oICRyZXBlYXRlciApIHtcblx0XHRcblx0XHRcdFx0dmFyIHJvd3MgPSBbXTtcblx0XHRcblx0XHRcdFx0JHJlcGVhdGVyLmZpbmQoICcubGxtcy1yZXBlYXRlci1yb3dzIC5sbG1zLXJlcGVhdGVyLXJvdycgKS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcblx0XHRcdFx0XHR2YXIgb2JqID0ge307XG5cdFx0XG5cdFx0XHRcdFx0Ly8gZWFzeS4uLlxuXHRcdFx0XHRcdCQoIHRoaXMgKS5maW5kKCAnaW5wdXRbbmFtZV49XCJfbGxtc1wiXSwgc2VsZWN0W25hbWVePVwiX2xsbXNcIl0nICkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRvYmpbICQoIHRoaXMgKS5hdHRyKCAnbmFtZScgKSBdID0gJCggdGhpcyApLnZhbCgpO1xuXHRcdFx0XHRcdH0gKTtcblx0XHRcblx0XHRcdFx0XHQvLyBjaGVjayBpZiB0aGUgdGV4dGFyZWEgaXMgYSB0aW55TUNFIGluc3RhbmNlXG5cdFx0XHRcdFx0JCggdGhpcyApLmZpbmQoICd0ZXh0YXJlYVtuYW1lXj1cIl9sbG1zXCJdJyApLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFxuXHRcdFx0XHRcdFx0dmFyIG5hbWUgPSAkKCB0aGlzICkuYXR0ciggJ25hbWUnICk7XG5cdFx0XG5cdFx0XHRcdFx0XHQvLyBpZiBpdCBpcyBhbiBlZGl0b3Jcblx0XHRcdFx0XHRcdGlmICggdGlueU1DRS5lZGl0b3JzWyBuYW1lIF0gKSB7XG5cdFx0XHRcdFx0XHRcdG9ialsgbmFtZSBdID0gdGlueU1DRS5lZGl0b3JzWyBuYW1lIF0uZ2V0Q29udGVudCgpO1xuXHRcdFx0XHRcdFx0Ly8gZ3JhYiB0aGUgdmFsIG9mIHRoZSB0ZXh0YXJlYVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0b2JqWyBuYW1lIF0gPSAkKCB0aGlzICkudmFsKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XG5cdFx0XHRcdFx0fSApO1xuXHRcdFxuXHRcdFx0XHRcdHJvd3MucHVzaCggb2JqICk7XG5cdFx0XG5cdFx0XHRcdH0gKTtcblx0XHRcblx0XHRcdFx0cmV0dXJuIHJvd3M7XG5cdFx0XG5cdFx0XHR9LFxuXHRcdFxuXHRcdFx0LyoqXG5cdFx0XHQgKiBBSkFYIG1ldGhvZCBmb3IgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgcmVwZWF0ZXIncyBoYW5kbGVyIG9uIHRoZSBzZXJ2ZXJcblx0XHRcdCAqIEBwYXJhbSAgICBvYmogICAgICAgJHJlcGVhdGVyICBqUXVlcnkgc2VsZWN0b3IgZm9yIHRoZSByZXBlYXRlciBlbGVtZW50XG5cdFx0XHQgKiBAcGFyYW0gICAgc3RyaW5nICAgIGFjdGlvbiAgICAgYWN0aW9uIHRvIGNhbGwgW3NhdmV8bG9hZF1cblx0XHRcdCAqIEBwYXJhbSAgICBmdW5jdGlvbiAgY2IgICAgICAgICBjYWxsYmFjayBmdW5jdGlvblxuXHRcdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHRcdCAqIEBzaW5jZSAgICAzLjExLjBcblx0XHRcdCAqIEB2ZXJzaW9uICAzLjExLjBcblx0XHRcdCAqL1xuXHRcdFx0c3RvcmU6IGZ1bmN0aW9uKCAkcmVwZWF0ZXIsIGFjdGlvbiwgY2IgKSB7XG5cdFx0XG5cdFx0XHRcdGNiID0gY2IgfHwgZnVuY3Rpb24oKXt9O1xuXHRcdFx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHRcdFx0ZGF0YSA9IHtcblx0XHRcdFx0XHRcdGFjdGlvbjogJHJlcGVhdGVyLmZpbmQoICcubGxtcy1yZXBlYXRlci1maWVsZC1oYW5kbGVyJyApLnZhbCgpLFxuXHRcdFx0XHRcdFx0c3RvcmVfYWN0aW9uOiBhY3Rpb24sXG5cdFx0XHRcdFx0fTtcblx0XHRcblx0XHRcdFx0aWYgKCAnc2F2ZScgPT09IGFjdGlvbiApIHtcblx0XHRcdFx0XHRkYXRhLnJvd3MgPSBzZWxmLnNlcmlhbGl6ZSggJHJlcGVhdGVyICk7XG5cdFx0XHRcdH1cblx0XHRcblx0XHRcdFx0TExNUy5BamF4LmNhbGwoIHtcblx0XHRcdFx0XHRkYXRhOiBkYXRhLFxuXHRcdFx0XHRcdGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCkge1xuXHRcdFxuXHRcdFx0XHRcdFx0JHJlcGVhdGVyLmFkZENsYXNzKCAncHJvY2Vzc2luZycgKTtcblx0XHRcdFx0XHRcdExMTVMuU3Bpbm5lci5zdGFydCggJHJlcGVhdGVyICk7XG5cdFx0XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiggciApIHtcblx0XHRcblx0XHRcdFx0XHRcdGNiKCByICk7XG5cdFx0XHRcdFx0XHRMTE1TLlNwaW5uZXIuc3RvcCggJHJlcGVhdGVyICk7XG5cdFx0XHRcdFx0XHQkcmVwZWF0ZXIucmVtb3ZlQ2xhc3MoICdwcm9jZXNzaW5nJyApO1xuXHRcdFxuXHRcdFx0XHRcdH1cblx0XHRcblx0XHRcdFx0fSApO1xuXHRcdFxuXHRcdFx0fVxuXHRcdFxuXHRcdH07XG5cdFx0dGhpcy5yZXBlYXRlcnMuaW5pdCgpO1xuXHRcdFxuXG5cdFx0LyoqXG5cdFx0ICogSW5pdGlhbGl6ZVxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMC4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTMuMFxuXHRcdCAqL1xuXHRcdHRoaXMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdCQoICcubGxtcy1zZWxlY3QyLXBvc3QnICkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHNlbGYucG9zdF9zZWxlY3QoICQoIHRoaXMgKSApO1xuXHRcdFx0fSApO1xuXG5cdFx0XHQkKCAnLmxsbXMtY29sbGFwc2libGUtZ3JvdXAnICkubGxtc0NvbGxhcHNpYmxlKCk7XG5cblx0XHRcdHRoaXMuYmluZF90YWJzKCk7XG5cblx0XHRcdC8vIGJpbmQgZXZlcnl0aGluZyBiZXR0ZXIgYW5kIGxlc3MgcmVwZXRhdGl2ZWx5Li4uXG5cdFx0XHR2YXIgYmluZGluZ3MgPSBbXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRzZWxlY3RvcjogJCggJy5sbG1zLWRhdGVwaWNrZXInICksXG5cdFx0XHRcdFx0ZnVuYzogJ2JpbmRfZGF0ZXBpY2tlcnMnLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0c2VsZWN0b3I6ICQoICcubGxtcy1zZWxlY3QyJyApLFxuXHRcdFx0XHRcdGZ1bmM6IGZ1bmN0aW9uKCAkc2VsZWN0b3IgKSB7XG5cdFx0XHRcdFx0XHQkc2VsZWN0b3IubGxtc1NlbGVjdDIoIHtcblx0XHRcdFx0XHRcdFx0d2lkdGg6ICcxMDAlJyxcblx0XHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0c2VsZWN0b3I6ICQoICcubGxtcy1zZWxlY3QyLXN0dWRlbnQnICksXG5cdFx0XHRcdFx0ZnVuYzogZnVuY3Rpb24oICRzZWxlY3RvciApIHtcblx0XHRcdFx0XHRcdCRzZWxlY3Rvci5sbG1zU3R1ZGVudHNTZWxlY3QyKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0c2VsZWN0b3I6ICQoICdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl1bZGF0YS1jb250cm9sc10nICksXG5cdFx0XHRcdFx0ZnVuYzogJ2JpbmRfY2JfY29udHJvbGxlcnMnLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0c2VsZWN0b3I6ICQoICdbZGF0YS1pcy1jb250cm9sbGVyXScgKSxcblx0XHRcdFx0XHRmdW5jOiAnYmluZF9jb250cm9sbGVycycsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRzZWxlY3RvcjogJCggJy5sbG1zLXRhYmxlJyApLFxuXHRcdFx0XHRcdGZ1bmM6ICdiaW5kX3RhYmxlcycsXG5cdFx0XHRcdH0sXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRzZWxlY3RvcjogJCggJy5sbG1zLW1lcmdlLWNvZGUtd3JhcHBlcicgKSxcblx0XHRcdFx0XHRmdW5jOiAnYmluZF9tZXJnZV9jb2RlX2J1dHRvbnMnLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0c2VsZWN0b3I6ICQoICdhLmxsbXMtZWRpdGFibGUnICksXG5cdFx0XHRcdFx0ZnVuYzogJ2JpbmRfZWRpdGFibGVzJyxcblx0XHRcdFx0fSxcblx0XHRcdF07XG5cblx0XHRcdC8vIGJpbmQgYWxsIHRoZSBiaW5kYWJsZXMgYnV0IGRvbid0IGJpbmQgdGhpbmdzIGluIHJlcGVhdGVyc1xuXHRcdFx0JC5lYWNoKCBiaW5kaW5ncywgZnVuY3Rpb24oIGluZGV4LCBvYmogKSB7XG5cblx0XHRcdFx0aWYgKCBvYmouc2VsZWN0b3IubGVuZ3RoICkge1xuXG5cdFx0XHRcdFx0Ly8gcmVkdWNlIHRoZSBzZWxlY3RvciB0byBleGNsdWRlIGl0ZW1zIGluIGEgcmVwZWF0ZXJcblx0XHRcdFx0XHR2YXIgcmVkdWNlZCA9IG9iai5zZWxlY3Rvci5maWx0ZXIoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuICggMCA9PT0gJCggdGhpcyApLmNsb3Nlc3QoICcubGxtcy1yZXBlYXRlci1tb2RlbCcgKS5sZW5ndGggKTtcblx0XHRcdFx0XHR9ICk7XG5cblx0XHRcdFx0XHQvLyBiaW5kIGJ5IHN0cmluZ1xuXHRcdFx0XHRcdGlmICggJ3N0cmluZycgPT09IHR5cGVvZiBvYmouZnVuYyApIHtcblx0XHRcdFx0XHRcdHNlbGZbIG9iai5mdW5jIF0oIHJlZHVjZWQgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Ly8gYmluZCBieSBhbiBhbm9ueW1vdXMgZnVuY3Rpb25cblx0XHRcdFx0XHRlbHNlIGlmICggJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIG9iai5mdW5jICkge1xuXHRcdFx0XHRcdFx0b2JqLmZ1bmMoIHJlZHVjZWQgKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9ICk7XG5cblx0XHRcdC8vIGlmIGEgcG9zdCB0eXBlIGlzIHNldCAmIGEgYmluZCBleGlzdHMgZm9yIGl0LCBiaW5kIGl0XG5cdFx0XHRpZiAoIHdpbmRvdy5sbG1zLnBvc3QucG9zdF90eXBlICkge1xuXG5cdFx0XHRcdHZhciBmdW5jID0gJ2JpbmRfJyArIHdpbmRvdy5sbG1zLnBvc3QucG9zdF90eXBlO1xuXG5cdFx0XHRcdGlmICggJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIHRoaXNbZnVuY10gKSB7XG5cblx0XHRcdFx0XHR0aGlzW2Z1bmNdKCk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHR9O1xuXG5cdFx0LyoqXG5cdFx0ICogQmluZCBjaGVja2JveGVzIHRoYXQgY29udHJvbCB0aGUgZGlzcGxheSBvZiBvdGhlciBlbGVtZW50c1xuXHRcdCAqIEBwYXJhbSAgICBvYmogICAkY29udHJvbGxlcnNzICBqUXVlcnkgc2VsY3RvciBmb3IgY2hlY2tib3hlcyB0byBiZSBib3VuZCBhcyBjaGVja2JveCBjb250cm9sbGVyc1xuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMC4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTEuMFxuXHRcdCAqL1xuXHRcdHRoaXMuYmluZF9jYl9jb250cm9sbGVycyA9IGZ1bmN0aW9uKCAkY29udHJvbGxlcnMgKSB7XG5cblx0XHRcdCRjb250cm9sbGVycyA9ICRjb250cm9sbGVycyB8fCAkKCAnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdW2RhdGEtY29udHJvbHNdJyApO1xuXG5cdFx0XHQkY29udHJvbGxlcnMuZWFjaCggZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0dmFyICRjYiA9ICQoIHRoaXMgKSxcblx0XHRcdFx0XHQkY29udHJvbGxlZCA9ICQoICRjYi5hdHRyKCAnZGF0YS1jb250cm9scycgKSApLmNsb3Nlc3QoICcubGxtcy1tYi1saXN0JyApO1xuXG5cdFx0XHRcdCRjYi5vbiggJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdFx0aWYgKCAkKCB0aGlzICkuaXMoICc6Y2hlY2tlZCcgKSApIHtcblxuXHRcdFx0XHRcdFx0JGNvbnRyb2xsZWQuc2xpZGVEb3duKCAyMDAgKTtcblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdCRjb250cm9sbGVkLnNsaWRlVXAoIDIwMCApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0XHQkY2IudHJpZ2dlciggJ2NoYW5nZScgKTtcblxuXHRcdFx0fSApO1xuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIEJpbmQgZWxlbWVudHMgdGhhdCBjb250cm9sIHRoZSBkaXNwbGF5IG9mIG90aGVyIGVsZW1lbnRzXG5cdFx0ICogQHBhcmFtICAgIG9iaiAgICRjb250cm9sbGVyc3MgIGpRdWVyeSBzZWxjdG9yIGZvciBlbGVtZW50cyB0byBiZSBib3VuZCBhcyBjaGVja2JveCBjb250cm9sbGVyc1xuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMC4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTEuMFxuXHRcdCAqL1xuXHRcdHRoaXMuYmluZF9jb250cm9sbGVycyA9IGZ1bmN0aW9uKCAkY29udHJvbGxlcnMgKSB7XG5cblx0XHRcdCRjb250cm9sbGVycyA9ICRjb250cm9sbGVycyB8fCAkKCAnW2RhdGEtaXMtY29udHJvbGxlcl0nICk7XG5cblx0XHRcdCRjb250cm9sbGVycy5lYWNoKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHR2YXIgJGVsID0gJCggdGhpcyApLFxuXHRcdFx0XHRcdCRjb250cm9sbGVkID0gJCggJ1tkYXRhLWNvbnRyb2xsZXI9XCIjJyArICRlbC5hdHRyKCAnaWQnICkgKyAnXCJdJyApLFxuXHRcdFx0XHRcdHZhbDtcblxuXHRcdFx0XHQkZWwub24oICdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRcdGlmICggJ2NoZWNrYm94JyA9PT0gJGVsLmF0dHIoICd0eXBlJyApICkge1xuXG5cdFx0XHRcdFx0XHR2YWwgPSAkZWwuaXMoICc6Y2hlY2tlZCcgKSA/ICRlbC52YWwoKSA6ICdmYWxzZSc7XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHR2YWwgPSAkZWwudmFsKCk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQkY29udHJvbGxlZC5lYWNoKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRcdFx0dmFyIHBvc3NpYmxlID0gJCggdGhpcyApLmF0dHIoICdkYXRhLWNvbnRyb2xsZXItdmFsdWUnICksXG5cdFx0XHRcdFx0XHRcdHZhbHMgPSBbXTtcblxuXHRcdFx0XHRcdFx0aWYgKCAtMSAhPT0gcG9zc2libGUuaW5kZXhPZiggJywnICkgKSB7XG5cblx0XHRcdFx0XHRcdFx0dmFscyA9IHBvc3NpYmxlLnNwbGl0KCAnLCcgKTtcblxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHR2YWxzLnB1c2goIHBvc3NpYmxlICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKCAtMSAhPT0gdmFscy5pbmRleE9mKCB2YWwgKSApIHtcblxuXHRcdFx0XHRcdFx0XHQkKCB0aGlzICkuc2xpZGVEb3duKCAyMDAgKTtcblxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHQkKCB0aGlzICkuc2xpZGVVcCggMjAwICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdH0gKTtcblxuXG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0XHQkZWwudHJpZ2dlciggJ2NoYW5nZScgKTtcblxuXHRcdFx0fSApO1xuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIEJpbmQgYSBzaW5nbGUgZGF0ZXBpY2tlciBlbGVtZW50XG5cdFx0ICogQHBhcmFtICAgIG9iaiAgICRlbCAgalF1ZXJ5IHNlbGVjdG9yIGZvciB0aGUgaW5wdXQgdG8gYmluZCB0aGUgZGF0ZXBpY2tlciB0b1xuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMC4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTAuMFxuXHRcdCAqL1xuXHRcdHRoaXMuYmluZF9kYXRlcGlja2VyID0gZnVuY3Rpb24oICRlbCApIHtcblx0XHRcdHZhciBmb3JtYXQgPSAkZWwuYXR0ciggJ2RhdGEtZm9ybWF0JyApIHx8ICdtbS9kZC95eScsXG5cdFx0XHRcdG1heERhdGUgPSAkZWwuYXR0ciggJ2RhdGEtbWF4LWRhdGUnICkgfHwgbnVsbCxcblx0XHRcdFx0bWluRGF0ZSA9ICRlbC5hdHRyKCAnZGF0YS1taW4tZGF0ZScgKSB8fCBudWxsO1xuXHRcdFx0JGVsLmRhdGVwaWNrZXIoIHtcblx0XHRcdFx0ZGF0ZUZvcm1hdDogZm9ybWF0LFxuXHRcdFx0XHRtYXhEYXRlOiBtYXhEYXRlLFxuXHRcdFx0XHRtaW5EYXRlOiBtaW5EYXRlLFxuXHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIEJpbmQgYWxsIExpZnRlckxNUyBkYXRlcGlja2Vyc1xuXHRcdCAqIEBwYXJhbSAgICBvYmogICAkZGF0ZXBpY2tlcnMgIGpRdWVyeSBzZWxlY3RvciBmb3IgdGhlIGVsZW1lbnRzIHRvIGJpbmRcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjAuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjExLjBcblx0XHQgKi9cblx0XHR0aGlzLmJpbmRfZGF0ZXBpY2tlcnMgPSBmdW5jdGlvbiggJGRhdGVwaWNrZXJzICkge1xuXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdCRkYXRlcGlja2VycyA9ICRkYXRlcGlja2VycyB8fCAkKCcubGxtcy1kYXRlcGlja2VyJyk7XG5cblx0XHRcdCRkYXRlcGlja2Vycy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0c2VsZi5iaW5kX2RhdGVwaWNrZXIoICQoIHRoaXMgKSApO1xuXHRcdFx0fSApO1xuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIEJpbmQgbGxtcy1lZGl0YWJsZSBtZXRhYm94IGZpZWxkcyBhbmQgcmVsYXRlZCBkb20gaW50ZXJhY3Rpb25zXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy4xMC4wXG5cdFx0ICogQHZlcnNpb24gIDMuMjguMFxuXHRcdCAqL1xuXHRcdHRoaXMuYmluZF9lZGl0YWJsZXMgPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHRmdW5jdGlvbiBtYWtlX2VkaXRhYmxlKCAkZmllbGQgKSB7XG5cblx0XHRcdFx0dmFyICRsYWJlbCA9ICRmaWVsZC5maW5kKCAnbGFiZWwnICkuY2xvbmUoKSxcblx0XHRcdFx0XHRuYW1lID0gJGZpZWxkLmF0dHIoICdkYXRhLWxsbXMtZWRpdGFibGUnICksXG5cdFx0XHRcdFx0dHlwZSA9ICRmaWVsZC5hdHRyKCAnZGF0YS1sbG1zLWVkaXRhYmxlLXR5cGUnICksXG5cdFx0XHRcdFx0cmVxdWlyZWQgPSAkZmllbGQuYXR0ciggJ2RhdGEtbGxtcy1lZGl0YWJsZS1yZXF1aXJlZCcgKSB8fCAnbm8nLFxuXHRcdFx0XHRcdHZhbCA9ICRmaWVsZC5hdHRyKCAnZGF0YS1sbG1zLWVkaXRhYmxlLXZhbHVlJyApLFxuXHRcdFx0XHRcdCRpbnB1dDtcblxuXHRcdFx0XHRyZXF1aXJlZCA9ICggJ3llcycgPT09IHJlcXVpcmVkICkgPyAnIHJlcXVpcmVkPVwicmVxdWlyZWRcIicgOiAnJztcblxuXHRcdFx0XHRpZiAoICdzZWxlY3QnID09PSB0eXBlICkge1xuXG5cdFx0XHRcdFx0dmFyIG9wdGlvbnMgPSBKU09OLnBhcnNlKCAkZmllbGQuYXR0ciggJ2RhdGEtbGxtcy1lZGl0YWJsZS1vcHRpb25zJyApICksXG5cdFx0XHRcdFx0XHRzZWxlY3RlZDtcblxuXHRcdFx0XHRcdCRpbnB1dCA9ICQoICc8c2VsZWN0IG5hbWU9XCInICsgbmFtZSArICdcIicgKyByZXF1aXJlZCArICcgLz4nKTtcblx0XHRcdFx0XHRmb3IgKCB2YXIga2V5IGluIG9wdGlvbnMgKSB7XG5cdFx0XHRcdFx0XHRzZWxlY3RlZCA9IHZhbCA9PT0ga2V5ID8gJyBzZWxlY3RlZD1cInNlbGVjdGVkXCInIDogJyc7XG5cdFx0XHRcdFx0XHQkaW5wdXQuYXBwZW5kKCAnPG9wdGlvbiB2YWx1ZT1cIicgKyBrZXkgKyAnXCInICsgc2VsZWN0ZWQgKyAnPicgKyBvcHRpb25zWyBrZXkgXSArICc8L29wdGlvbj4nICk7XG5cdFx0XHRcdFx0fVxuXG5cblx0XHRcdFx0fSBlbHNlIGlmICggJ2RhdGV0aW1lJyA9PT0gdHlwZSApIHtcblxuXHRcdFx0XHRcdCRpbnB1dCA9ICQoICc8ZGl2IGNsYXNzPVwibGxtcy1kYXRldGltZS1maWVsZFwiIC8+JyApO1xuXG5cdFx0XHRcdFx0dmFsID0gSlNPTi5wYXJzZSggdmFsICk7XG5cdFx0XHRcdFx0dmFyIGZvcm1hdCA9ICRmaWVsZC5hdHRyKCAnZGF0YS1sbG1zLWVkaXRhYmxlLWRhdGUtZm9ybWF0JyApIHx8ICcnLFxuXHRcdFx0XHRcdFx0bWluX2RhdGUgPSAkZmllbGQuYXR0ciggJ2RhdGEtbGxtcy1lZGl0YWJsZS1kYXRlLW1pbicgKSB8fCAnJyxcblx0XHRcdFx0XHRcdG1heF9kYXRlID0gJGZpZWxkLmF0dHIoICdkYXRhLWxsbXMtZWRpdGFibGUtZGF0ZS1tYXgnICkgfHwgJyc7XG5cblx0XHRcdFx0XHQkcGlja2VyID0gJCggJzxpbnB1dCBjbGFzcz1cImxsbXMtZGF0ZS1pbnB1dCBsbG1zLWRhdGVwaWNrZXJcIiBkYXRhLWZvcm1hdD1cIicgKyBmb3JtYXQgKyAnXCIgZGF0YS1tYXgtZGF0ZT1cIicgKyBtYXhfZGF0ZSArICdcIiBkYXRhLW1pbi1kYXRlPVwiJyArIG1pbl9kYXRlICsgJ1wiIG5hbWU9XCInICsgbmFtZSArICdbZGF0ZV1cIiB0eXBlPVwidGV4dFwiIHZhbHVlPVwiJyArICB2YWwuZGF0ZSArICdcIj4nICk7XG5cdFx0XHRcdFx0c2VsZi5iaW5kX2RhdGVwaWNrZXIoICRwaWNrZXIgKTtcblx0XHRcdFx0XHQkaW5wdXQuYXBwZW5kKCAkcGlja2VyICk7XG5cdFx0XHRcdFx0JGlucHV0LmFwcGVuZCggJzxlbT5APC9lbT4nKTtcblxuXHRcdFx0XHRcdCRpbnB1dC5hcHBlbmQoICc8aW5wdXQgY2xhc3M9XCJsbG1zLXRpbWUtaW5wdXRcIiBtYXg9XCIyM1wiIG1pbj1cIjBcIiBuYW1lPVwiJyArIG5hbWUgKyAnW2hvdXJdXCIgdHlwZT1cIm51bWJlclwiIHZhbHVlPVwiJyArICB2YWwuaG91ciArICdcIj4nICk7XG5cdFx0XHRcdFx0JGlucHV0LmFwcGVuZCggJzxlbT46PC9lbT4nKTtcblx0XHRcdFx0XHQkaW5wdXQuYXBwZW5kKCAnPGlucHV0IGNsYXNzPVwibGxtcy10aW1lLWlucHV0XCIgbWF4PVwiNTlcIiBtaW49XCIwXCIgbmFtZT1cIicgKyBuYW1lICsgJ1ttaW51dGVdXCIgdHlwZT1cIm51bWJlclwiIHZhbHVlPVwiJyArICB2YWwubWludXRlICsgJ1wiPicgKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0JGlucHV0ID0gJCggJzxpbnB1dCBuYW1lPVwiJyArIG5hbWUgKyAnXCIgdHlwZT1cIicgKyB0eXBlICsgJ1wiIHZhbHVlPVwiJyArIHZhbCArICdcIicgKyByZXF1aXJlZCArICc+Jyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQkZmllbGQuZW1wdHkoKS5hcHBlbmQoICRsYWJlbCApLmFwcGVuZCggJGlucHV0ICk7XG5cdFx0XHRcdGlmICggJ3NlbGVjdCcgPT09IHR5cGUgKSB7XG5cdFx0XHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHQkaW5wdXQudHJpZ2dlciggJ2NoYW5nZScgKTtcblx0XHRcdFx0XHR9LCAxMDAgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHR9O1xuXG5cdFx0XHQkKCAnYS5sbG1zLWVkaXRhYmxlJyApLm9uKCAnY2xpY2snLCBmdW5jdGlvbiggZSApIHtcblxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRcdFx0dmFyICRidG4gPSAkKCB0aGlzICksXG5cdFx0XHRcdFx0JGZpZWxkcztcblxuXHRcdFx0XHRpZiAoICRidG4uYXR0ciggJ2RhdGEtZmllbGRzJyApICkge1xuXHRcdFx0XHRcdCRmaWVsZHMgPSAkKCAkYnRuLmF0dHIoICdkYXRhLWZpZWxkcycgKSApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCRmaWVsZHMgPSAkYnRuLmNsb3Nlc3QoICcubGxtcy1tZXRhYm94LXNlY3Rpb24nICkuZmluZCggJ1tkYXRhLWxsbXMtZWRpdGFibGVdJyApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0JGJ0bi5yZW1vdmUoKTtcblxuXHRcdFx0XHQkZmllbGRzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdG1ha2VfZWRpdGFibGUoICQoIHRoaXMgKSApO1xuXHRcdFx0XHR9ICk7XG5cblx0XHRcdH0gKTtcblxuXHRcdH07XG5cblx0XHQvKipcblx0XHQgKiBCaW5kIEVuZ2FnZW1lbnQgcG9zdCB0eXBlIEpTXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy4xLjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xLjBcblx0XHQgKi9cblx0XHR0aGlzLmJpbmRfbGxtc19lbmdhZ2VtZW50ID0gZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0Ly8gd2hlbiB0aGUgZW5nYWdlbWVudCB0eXBlIGNoYW5nZXMgd2UgbmVlZCB0byBkbyBzb21lIHRoaW5ncyB0byB0aGUgVUlcblx0XHRcdCQoICcjX2xsbXNfZW5nYWdlbWVudF90eXBlJyApLm9uKCAnY2hhbmdlJywgZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0JCggJyNfbGxtc19lbmdhZ2VtZW50JyApLnRyaWdnZXIoICdsbG1zLWVuZ2FnZW1lbnQtdHlwZS1jaGFuZ2UnLCAkKCB0aGlzICkudmFsKCkgKTtcblxuXHRcdFx0fSApO1xuXG5cdFx0XHQvLyBjdXN0b20gdHJpZ2dlciB3aGVuIGNhbGxlZCB3aGVuIHRoZSBlbmdhZ2VtZW50IHR5cGUgY2hhbmdzXG5cdFx0XHQkKCAnI19sbG1zX2VuZ2FnZW1lbnQnICkub24oICdsbG1zLWVuZ2FnZW1lbnQtdHlwZS1jaGFuZ2UnLCBmdW5jdGlvbiggZSwgZW5nYWdlbWVudF90eXBlICkge1xuXG5cdFx0XHRcdHZhciAkc2VsZWN0ID0gJCggdGhpcyApO1xuXG5cdFx0XHRcdHN3aXRjaCAoIGVuZ2FnZW1lbnRfdHlwZSApIHtcblxuXHRcdFx0XHRcdC8qKlxuXHRcdFx0XHRcdCAqIGNvcmUgZW5nYWdlbWVudHMgcmVsYXRlZCB0byBhIENQVFxuXHRcdFx0XHRcdCAqL1xuXHRcdFx0XHRcdGNhc2UgJ2FjaGlldmVtZW50Jzpcblx0XHRcdFx0XHRjYXNlICdjZXJ0aWZpY2F0ZSc6XG5cdFx0XHRcdFx0Y2FzZSAnZW1haWwnOlxuXG5cdFx0XHRcdFx0XHR2YXIgY3B0ID0gJ2xsbXNfJyArIGVuZ2FnZW1lbnRfdHlwZTtcblxuXHRcdFx0XHRcdFx0JHNlbGVjdC52YWwoIG51bGwgKS5hdHRyKCAnZGF0YS1wb3N0LXR5cGUnLCBjcHQgKS50cmlnZ2VyKCAnY2hhbmdlJyApO1xuXHRcdFx0XHRcdFx0c2VsZi5wb3N0X3NlbGVjdCggJHNlbGVjdCApO1xuXG5cdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHQvKipcblx0XHRcdFx0XHQgKiBBbGxvdyBvdGhlciBwbHVnaW5zIGFuZCBkZXZlbG9wZXJzIHRvIGhvb2sgaW50byB0aGUgZW5nYWdlbWVudCB0eXBlIGNoYW5nZSBhY3Rpb25cblx0XHRcdFx0XHQgKi9cblx0XHRcdFx0XHRkZWZhdWx0OlxuXG5cdFx0XHRcdFx0XHQkc2VsZWN0LnRyaWdnZXIoICdsbG1zLWVuZ2FnZW1lbnQtdHlwZS1jaGFuZ2UtZXh0ZXJuYWwnLCBlbmdhZ2VtZW50X3R5cGUgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH0gKTtcblxuXHRcdH07XG5cblx0XHQvKipcblx0XHQgKiBBY3Rpb25zIGZvciBtZW1iZXJzaGlwc1xuXHRcdCAqXG5cdFx0ICogQHNpbmNlIDMuMC4wXG5cdFx0ICogQHNpbmNlIDMuMzAuMCBNYWRlIGF1dG9lbnJvbGwgdGFibGUgc29ydGFibGUsIGFkZGVkIEFKQVggc2F2ZSBmb3IgYWRkaW5nIG5ldyBjb3Vyc2VzLlxuXHRcdCAqIEB2ZXJzaW9uIDMuMzAuMFxuXHRcdCAqXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKi9cblx0XHR0aGlzLmJpbmRfbGxtc19tZW1iZXJzaGlwID0gZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciAkdGFibGUgPSAkKCAnLmxsbXMtbWItbGlzdC5fbGxtc19jb250ZW50X3RhYmxlJyApO1xuXG5cdFx0XHQvKipcblx0XHRcdCAqIEhpZGUvU2hvdyBlbXB0eSBtZXNzYWdlIGhlYWRlciByb3cgZGVwZW5kaW5nIG9uIHRoZSBudW1iZXIgb2Ygcm93cyBpbiB0aGUgdGJvZHlcblx0XHRcdCAqXG5cdFx0XHQgKiBAc2luY2UgMy4zMC4wXG5cdFx0XHQgKiBAdmVyc2lvbiAzLjMwLjBcblx0XHRcdCAqXG5cdFx0XHQgKiBAcmV0dXJuIHZvaWRcblx0XHRcdCAqL1xuXHRcdFx0ZnVuY3Rpb24gdG9nZ2xlX2hlYWRlcl9yb3coKSB7XG5cblx0XHRcdFx0dmFyICRyb3dzID0gJHRhYmxlLmZpbmQoICd0Ym9keSB0cicgKTtcblx0XHRcdFx0aWYgKCAxID09PSAkcm93cy5sZW5ndGggKSB7XG5cdFx0XHRcdFx0JHJvd3MuZmlyc3QoKS5zaG93KCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0JHJvd3MuZmlyc3QoKS5oaWRlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0LyoqXG5cdFx0XHQgKiBSZXRyaWV2ZSBhbiBhcnJheSBvZiBjb3Vyc2UgSURzIGluIHRoZSB0YWJsZS5cblx0XHRcdCAqXG5cdFx0XHQgKiBAc2luY2UgMy4zMC4wXG5cdFx0XHQgKiBAdmVyc2lvbiAzLjMwLjBcblx0XHRcdCAqXG5cdFx0XHQgKiBAcmV0dXJuIGFycmF5XG5cdFx0XHQgKi9cblx0XHRcdGZ1bmN0aW9uIGdldF9jb3Vyc2VfaWRzKCkge1xuXG5cdFx0XHRcdHZhciBjb3Vyc2VzID0gW107XG5cdFx0XHRcdCR0YWJsZS5maW5kKCAndGJvZHkgdHIgYVtocmVmPVwiI2xsbXMtY291cnNlLXJlbW92ZVwiXScgKS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRjb3Vyc2VzLnB1c2goICQoIHRoaXMgKS5hdHRyKCAnZGF0YS1pZCcgKSApO1xuXHRcdFx0XHR9ICk7XG5cdFx0XHRcdHJldHVybiBjb3Vyc2VzO1xuXG5cdFx0XHR9XG5cblx0XHRcdC8vIE9uIGluaXQsIHRvZ2dsZSB0aGUgaGVhZGVyIHJvdyB2aXNpYmlsaXR5LlxuXHRcdFx0dG9nZ2xlX2hlYWRlcl9yb3coKTtcblxuXHRcdFx0Ly8gcmVtb3ZlIGF1dG8tZW5yb2xsIGNvdXJzZVxuXHRcdFx0JHRhYmxlLm9uKCAnY2xpY2snLCAnYVtocmVmPVwiI2xsbXMtY291cnNlLXJlbW92ZVwiXScsIGZ1bmN0aW9uKCBlICkge1xuXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0XHR2YXIgJGVsID0gJCggdGhpcyApLFxuXHRcdFx0XHRcdCRyb3cgPSAkZWwuY2xvc2VzdCggJ3RyJyApLFxuXHRcdFx0XHRcdCRjb250YWluZXIgPSAkZWwuY2xvc2VzdCggJy5sbG1zLW1iLWxpc3QnICk7XG5cblx0XHRcdFx0TExNUy5TcGlubmVyLnN0YXJ0KCAkY29udGFpbmVyICk7XG5cblx0XHRcdFx0d2luZG93LkxMTVMuQWpheC5jYWxsKCB7XG5cdFx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdFx0YWN0aW9uOiAnbWVtYmVyc2hpcF9yZW1vdmVfYXV0b19lbnJvbGxfY291cnNlJyxcblx0XHRcdFx0XHRcdGNvdXJzZV9pZDogJGVsLmF0dHIoICdkYXRhLWlkJyApLFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0YmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0XHRcdCRjb250YWluZXIuZmluZCggJ3AuZXJyb3InICkucmVtb3ZlKCk7XG5cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKCByICkge1xuXG5cdFx0XHRcdFx0XHRpZiAoIHIuc3VjY2VzcyApIHtcblxuXHRcdFx0XHRcdFx0XHQkcm93LmZhZGVPdXQoIDIwMCApO1xuXHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHQkcm93LnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0XHRcdHRvZ2dsZV9oZWFkZXJfcm93KCk7XG5cdFx0XHRcdFx0XHRcdH0sIDQwMCApO1xuXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdCRjb250YWluZXIucHJlcGVuZCggJzxwIGNsYXNzPVwiZXJyb3JcIj4nICsgci5tZXNzYWdlICsgJzwvcD4nICk7XG5cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0TExNUy5TcGlubmVyLnN0b3AoICRjb250YWluZXIgKTtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHR9ICk7XG5cblx0XHRcdH0gKTtcblxuXHRcdFx0Ly8gYnVsayBlbnJvbGwgYWxsIG1lbWJlcnMgaW50byBhIGNvdXJzZVxuXHRcdFx0JHRhYmxlLm9uKCAnY2xpY2snLCAnYVtocmVmPVwiI2xsbXMtY291cnNlLWJ1bGstZW5yb2xsXCJdJywgZnVuY3Rpb24oIGUgKSB7XG5cblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0XHRcdHZhciAkZWwgPSAkKCB0aGlzICksXG5cdFx0XHRcdFx0JHJvdyA9ICRlbC5jbG9zZXN0KCAndHInICksXG5cdFx0XHRcdFx0JGNvbnRhaW5lciA9ICRlbC5jbG9zZXN0KCAnLmxsbXMtbWItbGlzdCcgKTtcblxuXHRcdFx0XHRpZiAoICEgd2luZG93LmNvbmZpcm0oIExMTVMubDEwbi50cmFuc2xhdGUoICdDbGljayBva2F5IHRvIGVucm9sbCBhbGwgYWN0aXZlIG1lbWJlcnMgaW50byB0aGUgc2VsZWN0ZWQgY291cnNlLiBFbnJvbGxtZW50IHdpbGwgdGFrZSBwbGFjZSBpbiB0aGUgYmFja2dyb3VuZCBhbmQgeW91IG1heSBsZWF2ZSB5b3VyIHNpdGUgYWZ0ZXIgY29uZmlybWF0aW9uLiBUaGlzIGFjdGlvbiBjYW5ub3QgYmUgdW5kb25lIScgKSApICkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdExMTVMuU3Bpbm5lci5zdGFydCggJGNvbnRhaW5lciApO1xuXG5cdFx0XHRcdHdpbmRvdy5MTE1TLkFqYXguY2FsbCgge1xuXHRcdFx0XHRcdGRhdGE6IHtcblx0XHRcdFx0XHRcdGFjdGlvbjogJ2J1bGtfZW5yb2xsX21lbWJlcnNoaXBfaW50b19jb3Vyc2UnLFxuXHRcdFx0XHRcdFx0Y291cnNlX2lkOiAkZWwuYXR0ciggJ2RhdGEtaWQnICksXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRiZWZvcmVTZW5kOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdCRjb250YWluZXIuZmluZCggJ3AuZXJyb3InICkucmVtb3ZlKCk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiggciApIHtcblxuXHRcdFx0XHRcdFx0aWYgKCByLnN1Y2Nlc3MgKSB7XG5cblx0XHRcdFx0XHRcdFx0JGVsLnJlcGxhY2VXaXRoKCAnPHN0cm9uZyBzdHlsZT1cImZsb2F0OnJpZ2h0O1wiPicgKyByLmRhdGEubWVzc2FnZSArICcmbmJzcDsmbmJzcDs8L3N0cm9uZz4nICk7XG5cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0JGNvbnRhaW5lci5wcmVwZW5kKCAnPHAgY2xhc3M9XCJlcnJvclwiPicgKyByLm1lc3NhZ2UgKyAnPC9wPicgKTtcblxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRMTE1TLlNwaW5uZXIuc3RvcCggJGNvbnRhaW5lciApO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0fSApO1xuXG5cdFx0XHQvLyBBZGQgYW4gaXRlbSB0byB0aGUgYXV0b2Vucm9sbCB0YWJsZSBvbiBzZWxlY3QuXG5cdFx0XHQkKCAnI19sbG1zX2F1dG9fZW5yb2xsJyApLm9uKCAnY2hhbmdlJywgZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0dmFyIGlkID0gJCggdGhpcyApLnZhbCgpLFxuXHRcdFx0XHRcdHRpdGxlID0gJCggdGhpcyApLmZpbmQoICdvcHRpb25bdmFsdWU9XCInICsgJCggdGhpcyApLnZhbCgpICsgJ1wiXScpLnRleHQoKTtcblxuXHRcdFx0XHQvLyBJZiB0aGVyZSdzIG5vIElEXG5cdFx0XHRcdGlmICggISBpZCApIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdC8vIFByZXZlbnQgRHVwZXMuXG5cdFx0XHRcdH0gZWxzZSBpZiAoIC0xICE9PSBnZXRfY291cnNlX2lkcygpLmluZGV4T2YoIGlkICkgKSB7XG5cblx0XHRcdFx0XHRhbGVydCggTExNUy5sMTBuLnJlcGxhY2UoICdcIiVzXCIgaXMgYWxyZWFkeSBpbiB0aGUgY291cnNlIGxpc3QuJywgeyAnJXMnOiB0aXRsZSB9ICkgKVxuXG5cdFx0XHRcdFx0Ly8gcmVzZXQgdGhlIHNlbGVjdCBmaWVsZC5cblx0XHRcdFx0XHQkKCB0aGlzICkudmFsKCAnJyApLnRyaWdnZXIoICdjaGFuZ2UnICk7XG5cblx0XHRcdFx0XHRyZXR1cm47XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHZhciAkdGFibGUgPSAkKCAnLmxsbXMtbWItbGlzdC5fbGxtc19jb250ZW50X3RhYmxlJyApO1xuXHRcdFx0XHRcdCR0ciA9ICQoICc8dHIgLz4nICk7XG5cblx0XHRcdFx0JHRyLmFwcGVuZCggJzx0ZD48c3BhbiBjbGFzcz1cImxsbXMtZHJhZy1oYW5kbGVcIiBzdHlsZT1cImNvbG9yOiM5OTk7XCI+PGkgY2xhc3M9XCJmYSBmYS1lbGxpcHNpcy12XCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgc3R5bGU9XCJtYXJnaW4tcmlnaHQ6MnB4O1wiPjwvaT48aSBjbGFzcz1cImZhIGZhLWVsbGlwc2lzLXZcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+PC9zcGFuPjwvdGQ+JyApO1xuXHRcdFx0XHQkdHIuYXBwZW5kKCAnPHRkPjxhIGhyZWY9XCInICsgd2luZG93LmxsbXMuYWRtaW5fdXJsICsgJ3Bvc3QucGhwP2FjdGlvbj1lZGl0JnBvc3Q9JyArIGlkICsgJ1wiPicgKyB0aXRsZSArICc8L2E+PC90ZD4nICk7XG5cdFx0XHRcdCR0ci5hcHBlbmQoICc8dGQ+PGEgY2xhc3M9XCJsbG1zLWJ1dHRvbi1kYW5nZXIgc21hbGxcIiBkYXRhLWlkPVwiJyArIGlkICsgJ1wiIGhyZWY9XCIjbGxtcy1jb3Vyc2UtcmVtb3ZlXCIgc3R5bGU9XCJmbG9hdDpyaWdodDtcIj4nICsgTExNUy5sMTBuLnRyYW5zbGF0ZSggJ1JlbW92ZSBjb3Vyc2UnICkgKyAnPC9hPjxhIGNsYXNzPVwibGxtcy1idXR0b24tc2Vjb25kYXJ5IHNtYWxsXCIgZGF0YS1pZD1cIicgKyBpZCArICdcIiBocmVmPVwiI2xsbXMtY291cnNlLWJ1bGstZW5yb2xsXCIgc3R5bGU9XCJmbG9hdDpyaWdodDtcIj4nICsgTExNUy5sMTBuLnRyYW5zbGF0ZSggJ0Vucm9sbCBBbGwgTWVtYmVycycgKSArICc8L2E+PC90ZD4nICk7XG5cblx0XHRcdFx0Ly8gYXBwZW5kIHRoZSBlbGVtZW50IHRvIHRoZSB0YWJsZS5cblx0XHRcdFx0JHRhYmxlLmZpbmQoJ3RhYmxlIHRib2R5JyApLmFwcGVuZCggJHRyICk7XG5cblx0XHRcdFx0Ly8gcmVzZXQgdGhlIHNlbGVjdCBmaWVsZC5cblx0XHRcdFx0JCggdGhpcyApLnZhbCggJycgKS50cmlnZ2VyKCAnY2hhbmdlJyApO1xuXG5cdFx0XHRcdC8vIFNob3cgdGhlIGhlYWRlciByb3cuXG5cdFx0XHRcdHRvZ2dsZV9oZWFkZXJfcm93KCk7XG5cblx0XHRcdFx0Ly8gdHJpZ2dlciBhIHNhdmUgZXZlbnQuXG5cdFx0XHRcdCR0YWJsZS50cmlnZ2VyKCAnbGxtcy1zYXZlLWF1dG9lbnJvbGwtY291cnNlcycgKTtcblxuXHRcdFx0fSApO1xuXG5cdFx0XHQvLyBNYWtlIGF1dG9lbnJvbGxtZW50IHRhYmxlIHNvcnRhYmxlLlxuXHRcdFx0JHRhYmxlLmZpbmQoICd0YWJsZSB0Ym9keScgKS5zb3J0YWJsZSgge1xuXHRcdFx0XHRoYW5kbGU6ICcubGxtcy1kcmFnLWhhbmRsZScsXG5cdFx0XHRcdC8vIFNhdmUgb3JkZXIgb24gc3RvcC5cblx0XHRcdFx0c3RvcDogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHtcblx0XHRcdFx0XHR1aS5pdGVtLmNsb3Nlc3QoICcubGxtcy1tYi1saXN0JyApLnRyaWdnZXIoICdsbG1zLXNhdmUtYXV0b2Vucm9sbC1jb3Vyc2VzJyApO1xuXHRcdFx0XHR9LFxuXHRcdFx0fSApO1xuXG5cdFx0XHQvLyBTYXZlIGNvdXJzZXMgJiBjb3Vyc2Ugb3JkZXIuXG5cdFx0XHQkdGFibGUub24oICdsbG1zLXNhdmUtYXV0b2Vucm9sbC1jb3Vyc2VzJywgZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0dmFyICRjb250YWluZXIgPSAkKCB0aGlzICk7XG5cblx0XHRcdFx0TExNUy5TcGlubmVyLnN0YXJ0KCAkY29udGFpbmVyICk7XG5cblx0XHRcdFx0d2luZG93LkxMTVMuQWpheC5jYWxsKCB7XG5cdFx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdFx0YWN0aW9uOiAnbGxtc19zYXZlX21lbWJlcnNoaXBfYXV0b2Vucm9sbF9jb3Vyc2VzJyxcblx0XHRcdFx0XHRcdGNvdXJzZXM6IGdldF9jb3Vyc2VfaWRzKCksXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRlcnJvcjogZnVuY3Rpb24oIGpxeGhyLCBjb2RlLCBlcnJvcl9tc2cgKSB7XG5cdFx0XHRcdFx0XHRhbGVydCggZXJyb3JfbXNnICk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRMTE1TLlNwaW5uZXIuc3RvcCggJGNvbnRhaW5lciApO1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0fSApO1xuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIEFjdGlvbnMgZm9yIE9SREVSU1xuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMC4wXG5cdFx0ICogQHZlcnNpb24gIDMuMjguMFxuXHRcdCAqL1xuXHRcdHRoaXMuYmluZF9sbG1zX29yZGVyID0gZnVuY3Rpb24oKSB7XG5cblx0XHRcdCQoICdidXR0b25bbmFtZT1cImxsbXMtcmVmdW5kLXRvZ2dsZVwiXScgKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0dmFyICRidG4gPSAkKCB0aGlzICksXG5cdFx0XHRcdFx0JHJvdyA9ICRidG4uY2xvc2VzdCggJ3RyJyApLFxuXHRcdFx0XHRcdHR4bl9pZCA9ICRyb3cuYXR0ciggJ2RhdGEtdHJhbnNhY3Rpb24taWQnICksXG5cdFx0XHRcdFx0cmVmdW5kYWJsZV9hbW91bnQgPSAkYnRuLmF0dHIoICdkYXRhLXJlZnVuZGFibGUnICksXG5cdFx0XHRcdFx0Z2F0ZXdheV9zdXBwb3J0cyA9ICggJzEnID09PSAkYnRuLmF0dHIoICdkYXRhLWdhdGV3YXktc3VwcG9ydHMnICkgKSA/IHRydWUgOiBmYWxzZSxcblx0XHRcdFx0XHRnYXRld2F5X3RpdGxlID0gJGJ0bi5hdHRyKCAnZGF0YS1nYXRld2F5JyApLFxuXHRcdFx0XHRcdCRuZXdfcm93ID0gJCggJyNsbG1zLXR4bi1yZWZ1bmQtbW9kZWwgLmxsbXMtdHhuLXJlZnVuZC1mb3JtJyApLmNsb25lKCksXG5cdFx0XHRcdFx0JGdhdGV3YXlfYnRuID0gJG5ld19yb3cuZmluZCggJy5nYXRld2F5LWJ0bicgKTtcblxuXHRcdFx0XHQvLyBjb25maWd1cmUgYW5kIGFkZCB0aGUgZm9ybVxuXHRcdFx0XHRpZiAoICdyZW1vdmUnICE9PSAkYnRuLmF0dHIoICdkYXRhLWFjdGlvbicgKSApIHtcblxuXHRcdFx0XHRcdCRidG4udGV4dCggTExNUy5sMTBuLnRyYW5zbGF0ZSggJ0NhbmNlbCcgKSApO1xuXHRcdFx0XHRcdCRidG4uYXR0ciggJ2RhdGEtYWN0aW9uJywgJ3JlbW92ZScgKTtcblx0XHRcdFx0XHQkbmV3X3Jvdy5maW5kKCAnaW5wdXQnICkucmVtb3ZlQXR0ciggJ2Rpc2FibGVkJyApO1xuXHRcdFx0XHRcdCRuZXdfcm93LmZpbmQoICdpbnB1dFtuYW1lPVwibGxtc19yZWZ1bmRfYW1vdW50XCJdJyApLmF0dHIoICdtYXgnLCByZWZ1bmRhYmxlX2Ftb3VudCApO1xuXHRcdFx0XHRcdCRuZXdfcm93LmZpbmQoICdpbnB1dFtuYW1lPVwibGxtc19yZWZ1bmRfdHhuX2lkXCJdJyApLnZhbCggdHhuX2lkICk7XG5cblx0XHRcdFx0XHRpZiAoIGdhdGV3YXlfc3VwcG9ydHMgKSB7XG5cdFx0XHRcdFx0XHQkZ2F0ZXdheV9idG4uZmluZCggJy5sbG1zLWdhdGV3YXktdGl0bGUnICkudGV4dCggZ2F0ZXdheV90aXRsZSApO1xuXHRcdFx0XHRcdFx0JGdhdGV3YXlfYnRuLnNob3coKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQkcm93LmFmdGVyKCAkbmV3X3JvdyApO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHQkYnRuLnRleHQoIExMTVMubDEwbi50cmFuc2xhdGUoICdSZWZ1bmQnICkgKTtcblx0XHRcdFx0XHQkYnRuLmF0dHIoICdkYXRhLWFjdGlvbicsICcnICk7XG5cdFx0XHRcdFx0JHJvdy5uZXh0KCAndHInICkucmVtb3ZlKCk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9ICk7XG5cblx0XHRcdCQoICdidXR0b25bbmFtZT1cImxsbXMtbWFudWFsLXR4bi10b2dnbGVcIl0nICkub24oICdjbGljaycsIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdHZhciAkYnRuID0gJCggdGhpcyApLFxuXHRcdFx0XHRcdCRyb3cgPSAkYnRuLmNsb3Nlc3QoICd0cicgKSxcblx0XHRcdFx0XHQkbmV3X3JvdyA9ICQoICcjbGxtcy1tYW51YWwtdHhuLW1vZGVsIC5sbG1zLW1hbnVhbC10eG4tZm9ybScgKS5jbG9uZSgpO1xuXG5cdFx0XHRcdC8vIGNvbmZpZ3VyZSBhbmQgYWRkIHRoZSBmb3JtXG5cdFx0XHRcdGlmICggJ3JlbW92ZScgIT09ICRidG4uYXR0ciggJ2RhdGEtYWN0aW9uJyApICkge1xuXG5cdFx0XHRcdFx0JGJ0bi50ZXh0KCBMTE1TLmwxMG4udHJhbnNsYXRlKCAnQ2FuY2VsJyApICk7XG5cdFx0XHRcdFx0JGJ0bi5hdHRyKCAnZGF0YS1hY3Rpb24nLCAncmVtb3ZlJyApO1xuXHRcdFx0XHRcdCRuZXdfcm93LmZpbmQoICdpbnB1dCcgKS5yZW1vdmVBdHRyKCAnZGlzYWJsZWQnICk7XG5cblx0XHRcdFx0XHQkcm93LmFmdGVyKCAkbmV3X3JvdyApO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHQkYnRuLnRleHQoIExMTVMubDEwbi50cmFuc2xhdGUoICdSZWNvcmQgYSBNYW51YWwgUGF5bWVudCcgKSApO1xuXHRcdFx0XHRcdCRidG4uYXR0ciggJ2RhdGEtYWN0aW9uJywgJycgKTtcblx0XHRcdFx0XHQkcm93Lm5leHQoICd0cicgKS5yZW1vdmUoKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH0gKTtcblxuXHRcdFx0Ly8gY2FjaGUgdGhlIG9yaWdpbmFsIHZhbHVlIHdoZW4gZm9jdXNpbmcgb24gYSBwYXltZW50IGdhdGV3YXkgc2VsZWN0XG5cdFx0XHQvLyB1c2VkIGJlbG93IHNvIHRoZSBvcmlnaW5hbCBmaWVsZCByZWxhdGVkIGRhdGEgY2FuIGJlIHJlc3RvcmVkIHdoZW4gc3dpdGNoaW5nIGJhY2sgdG8gdGhlIG9yaWduaWFsbHkgc2VsZWN0ZWQgZ2F0ZXdheVxuXHRcdFx0JCggJy5sbG1zLW1ldGFib3gnICkub25lKCAnZm9jdXMnLCAnLmxsbXMtbWV0YWJveC1maWVsZFtkYXRhLWxsbXMtZWRpdGFibGU9XCJwYXltZW50X2dhdGV3YXlcIl0gc2VsZWN0JywgZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0aWYgKCAhICQoIHRoaXMgKS5hdHRyKCAnZGF0YS1vcmlnaW5hbC12YWx1ZScgKSApIHtcblx0XHRcdFx0XHQkKCB0aGlzICkuYXR0ciggJ2RhdGEtb3JpZ2luYWwtdmFsdWUnLCAkKCB0aGlzICkudmFsKCkgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHR9ICk7XG5cblx0XHRcdC8vIHdoZW4gc2VsZWN0aW5nIGEgbmV3IHBheW1lbnQgZ2F0ZXdheSBnZXQgZmllbGQgZGF0YSBhbmQgdXBkYXRlIHRoZSBkb20gdG8gb25seSBkaXNwbGF5IHRoZSBmaWVsZHNcblx0XHRcdC8vIHN1cHBvcnRlZC9uZWVkZWQgYnkgdGhlIG5ld2x5IHNlbGVjdGVkIGdhdGV3YXlcblx0XHRcdCQoICcubGxtcy1tZXRhYm94JyApLm9uKCAnY2hhbmdlJywgJy5sbG1zLW1ldGFib3gtZmllbGRbZGF0YS1sbG1zLWVkaXRhYmxlPVwicGF5bWVudF9nYXRld2F5XCJdIHNlbGVjdCcsIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdHZhciAkc2VsZWN0ID0gJCggdGhpcyApLFxuXHRcdFx0XHRcdGdhdGV3YXkgPSAkc2VsZWN0LnZhbCgpLFxuXHRcdFx0XHRcdGRhdGEgPSBKU09OLnBhcnNlKCAkc2VsZWN0LmNsb3Nlc3QoICcubGxtcy1tZXRhYm94LWZpZWxkJyApLmF0dHIoICdkYXRhLWdhdGV3YXktZmllbGRzJyApICksXG5cdFx0XHRcdFx0Z2F0ZXdheV9kYXRhID0gZGF0YVsgZ2F0ZXdheSBdO1xuXG5cdFx0XHRcdGZvciAoIHZhciBmaWVsZCBpbiBnYXRld2F5X2RhdGEgKSB7XG5cblx0XHRcdFx0XHR2YXIgJGZpZWxkID0gJCggJ2lucHV0W25hbWU9XCInICsgZ2F0ZXdheV9kYXRhWyBmaWVsZCBdLm5hbWUgKyAnXCJdJyApLFxuXHRcdFx0XHRcdFx0JHdyYXAgPSAkZmllbGQuY2xvc2VzdCggJy5sbG1zLW1ldGFib3gtZmllbGQnICk7XG5cblx0XHRcdFx0XHQvLyBpZiB0aGUgZmllbGQgaXMgZW5hYmxlZCBzaG93IGl0IHRoZSBmaWVsZCBhbmQsIGlmIHdlJ3JlIHN3aXRjaGluZyBiYWNrIHRvIHRoZSBvcmlnaW5hbGx5IHNlbGVjdGVkXG5cdFx0XHRcdFx0Ly8gZ2F0ZXdheSwgcmVsb2FkIHRoZSB2YWx1ZSBmcm9tIHRoZSBkb21cblx0XHRcdFx0XHRpZiAoIGdhdGV3YXlfZGF0YVsgZmllbGQgXS5lbmFibGVkICkge1xuXG5cdFx0XHRcdFx0XHQkd3JhcC5zaG93KCk7XG5cdFx0XHRcdFx0XHQkZmllbGQuYXR0ciggJ3JlcXVpcmVkJywgJ3JlcXVpcmVkJyApO1xuXHRcdFx0XHRcdFx0JGZpZWxkLnJlbW92ZUF0dHIoICdkaXNhYmxlZCcgKTtcblxuXHRcdFx0XHRcdFx0aWYgKCBnYXRld2F5ID09PSAkc2VsZWN0LmF0dHIoICdkYXRhLW9yaWdpbmFsLXZhbHVlJykgKSB7XG5cdFx0XHRcdFx0XHRcdCRmaWVsZC52YWwoICR3cmFwLmF0dHIoICdkYXRhLWxsbXMtZWRpdGFibGUtdmFsdWUnICkgKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIG90aGVyd2lzZSBoaWRlIHRoZSBmaWVsZFxuXHRcdFx0XHRcdC8vIHRoaXMgd2lsbCBlbnN1cmUgaXQgZ2V0cyB1cGRhdGVkIGluIHRoZSBkYXRhYmFzZVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdC8vIGFsd2F5cyBjbGVhciB0aGUgdmFsdWUgd2hlbiBzd2l0Y2hpbmdcblx0XHRcdFx0XHRcdC8vIGVuc3VyZXMgdGhhdCBvdXRkYXRlZCBkYXRhIGlzIHJlbW92ZWQgZnJvbSB0aGUgREJcblx0XHRcdFx0XHRcdCRmaWVsZC5hdHRyKCAndmFsdWUnLCAnJyApO1xuXG5cdFx0XHRcdFx0XHQkZmllbGQucmVtb3ZlQXR0ciggJ3JlcXVpcmVkJyApO1xuXHRcdFx0XHRcdFx0Ly8gJGZpZWxkLmF0dHIoICdkaXNhYmxlZCcsICdkaXNhYmxlZCcgKTtcblx0XHRcdFx0XHRcdCR3cmFwLmhpZGUoKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdH0gKTtcblxuXHRcdH07XG5cblx0XHQvKipcblx0XHQgKiBCaW5kcyBjdXN0b20gbGxtcyBtZXJnZSBjb2RlIGJ1dHRvbnNcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjEuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjkuMlxuXHRcdCAqL1xuXHRcdHRoaXMuYmluZF9tZXJnZV9jb2RlX2J1dHRvbnMgPSBmdW5jdGlvbiggJHdyYXBwZXJzICkge1xuXG5cdFx0XHQkd3JhcHBlcnMgPSAkd3JhcHBlcnMgfHwgJCggJy5sbG1zLW1lcmdlLWNvZGUtd3JhcHBlcicgKTtcblxuXHRcdFx0JHdyYXBwZXJzLmZpbmQoICcubGxtcy1tZXJnZS1jb2RlLWJ1dHRvbicgKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0JCggdGhpcyApLm5leHQoICcubGxtcy1tZXJnZS1jb2RlcycgKS50b2dnbGVDbGFzcyggJ2FjdGl2ZScgKTtcblxuXHRcdFx0fSApO1xuXG5cdFx0XHQkd3JhcHBlcnMuZmluZCggJy5sbG1zLW1lcmdlLWNvZGVzIGxpJyApLm9uKCAnY2xpY2snLCBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHR2YXIgJGVsID0gJCggdGhpcyApLFxuXHRcdFx0XHRcdCRwYXJlbnQgPSAkZWwuY2xvc2VzdCggJy5sbG1zLW1lcmdlLWNvZGVzJyApLFxuXHRcdFx0XHRcdHRhcmdldCA9ICRwYXJlbnQuYXR0ciggJ2RhdGEtdGFyZ2V0JyApLFxuXHRcdFx0XHRcdGNvZGUgPSAkZWwuYXR0ciggJ2RhdGEtY29kZScgKTtcblxuXHRcdFx0XHQvLyBkZWFsaW5nIHdpdGggYSB0aW55bWNlIGluc3RhbmNlXG5cdFx0XHRcdGlmICggLTEgPT09IHRhcmdldC5pbmRleE9mKCAnIycgKSApIHtcblxuXHRcdFx0XHRcdHZhciBlZGl0b3IgPSB3aW5kb3cudGlueW1jZS5lZGl0b3JzWyB0YXJnZXQgXTtcblx0XHRcdFx0XHRpZiAoIGVkaXRvciApIHtcblx0XHRcdFx0XHRcdGVkaXRvci5pbnNlcnRDb250ZW50KCBjb2RlICk7XG5cdFx0XHRcdFx0fSAvLyBmYWxsYmFjayBpbiBjYXNlIHdlIGNhbid0IGFjY2VzcyB0aGUgZWRpdG9yIGRpcmVjdGx5XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRhbGVydCggTExNUy5sMTBuLnRyYW5zbGF0ZSggJ0NvcHkgdGhpcyBjb2RlIGFuZCBwYXN0ZSBpdCBpbnRvIHRoZSBkZXNpcmVkIGFyZWEnICkgKyAnOiAnICsgY29kZSApO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIGRlYWxpbmcgd2l0aCBhIERPTSBpZFxuXHRcdFx0XHRlbHNlIHtcblxuXHRcdFx0XHRcdCQoIHRhcmdldCApLnZhbCggJCggdGFyZ2V0ICkudmFsKCkgKyBjb2RlICk7XG5cblx0XHRcdFx0fVxuXG5cdFx0XHRcdCRwYXJlbnQucmVtb3ZlQ2xhc3MoICdhY3RpdmUnICk7XG5cblx0XHRcdH0gKTtcblxuXHRcdH07XG5cblx0XHQvKipcblx0XHQgKiBCaW5kIG1ldGFib3ggdGFic1xuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMC4wXG5cdFx0ICogQHZlcnNpb24gIDMuMC4wXG5cdFx0ICovXG5cdFx0dGhpcy5iaW5kX3RhYnMgPSBmdW5jdGlvbigpIHtcblx0XHRcdCQoICcubGxtcy1uYXYtdGFiLXdyYXBwZXIgLnRhYnMgbGknICkub24oICdjbGljaycsIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdHZhciAkYnRuID0gJCggdGhpcyApLFxuXHRcdFx0XHRcdCRtZXRhYm94ID0gJGJ0bi5jbG9zZXN0KCAnLmxsbXMtbWItY29udGFpbmVyJyApLFxuXHRcdFx0XHRcdHRhYl9pZCA9ICRidG4uYXR0ciggJ2RhdGEtdGFiJyApO1xuXG5cdFx0XHRcdCRidG4uc2libGluZ3MoKS5yZW1vdmVDbGFzcyggJ2xsbXMtYWN0aXZlJyApO1xuXG5cdFx0XHRcdCRtZXRhYm94LmZpbmQoICcudGFiLWNvbnRlbnQnICkucmVtb3ZlQ2xhc3MoICdsbG1zLWFjdGl2ZScgKTtcblxuXHRcdFx0XHQkYnRuLmFkZENsYXNzKCAnbGxtcy1hY3RpdmUnICk7XG5cdFx0XHRcdCQoICcjJyArIHRhYl9pZCApLmFkZENsYXNzKCAnbGxtcy1hY3RpdmUnICk7XG5cblx0XHRcdH0gKTtcblx0XHR9O1xuXG5cdFx0LyoqXG5cdFx0ICogRW5hYmxlIFdQIFBvc3QgVGFibGUgc2VhcmNoZXMgZm9yIGFwcGxpY2FibGUgc2VsZWN0MiBib3hlc1xuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMC4wXG5cdFx0ICogQHZlcnNpb24gIDMuMjEuMFxuXHRcdCAqL1xuXHRcdHRoaXMucG9zdF9zZWxlY3QgPSBmdW5jdGlvbiggJGVsICkge1xuXG5cdFx0XHR2YXIgbXVsdGkgPSAnbXVsdGlwbGUnID09PSAkZWwuYXR0ciggJ211bHRpcGxlJyApO1xuXG5cdFx0XHQkZWwubGxtc1Bvc3RzU2VsZWN0Migge1xuXHRcdFx0XHR3aWR0aDogbXVsdGkgPyAnMTAwJScgOiAnNjUlJyxcblx0XHRcdH0gKTtcblxuXHRcdFx0aWYgKCBtdWx0aSB8fCAkZWwuYXR0ciggJ2RhdGEtbm8tdmlldy1idXR0b24nICkgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gYWRkIGEgXCJWaWV3XCIgYnV0dG9uIHRvIHNlZSB3aGF0IHRoZSBzZWxlY3RlZCBwYWdlIGxvb2tzIGxpa2Vcblx0XHRcdHZhciBtc2cgPSBMTE1TLmwxMG4udHJhbnNsYXRlKCAnVmlldycgKSxcblx0XHRcdFx0JGJ0biA9ICQoICc8YSBjbGFzcz1cImxsbXMtYnV0dG9uLXNlY29uZGFyeSBzbWFsbFwiIHN0eWxlPVwibWFyZ2luLWxlZnQ6NXB4O1wiIHRhcmdldD1cIl9ibGFua1wiIGhyZWY9XCIjXCI+JyArICBtc2cgKyAnIDxpIGNsYXNzPVwiZmEgZmEtZXh0ZXJuYWwtbGlua1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT48L2E+JyApO1xuXHRcdFx0JGVsLm5leHQoICcuc2VsZWN0MicgKS5hZnRlciggJGJ0biApO1xuXG5cdFx0XHQkZWwub24oICdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGlkID0gJCggdGhpcyApLnZhbCgpO1xuXHRcdFx0XHRpZiAoIGlkICkge1xuXHRcdFx0XHRcdCRidG4uYXR0ciggJ2hyZWYnLCAnLz9wPScgKyBpZCApLnNob3coKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkYnRuLmhpZGUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fSApLnRyaWdnZXIoICdjaGFuZ2UnICk7XG5cblx0XHR9O1xuXG5cdFx0LyoqXG5cdFx0ICogQmluZCBkb20gZXZlbnRzIGZvciAubGxtcy10YWJsZXNcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjAuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjAuMFxuXHRcdCAqL1xuXHRcdHRoaXMuYmluZF90YWJsZXMgPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0JCggJy5sbG1zLXRhYmxlIGJ1dHRvbltuYW1lPVwibGxtcy1leHBhbmQtdGFibGVcIl0nICkub24oICdjbGljaycsIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdHZhciAkYnRuID0gJCggdGhpcyApLFxuXHRcdFx0XHRcdCR0YWJsZSA9ICRidG4uY2xvc2VzdCggJy5sbG1zLXRhYmxlJyApXG5cblx0XHRcdFx0Ly8gc3dpdGNoIHRoZSB0ZXh0IG9uIHRoZSBidXR0b24gaWYgYWx0IHRleHQgaXMgZm91bmRcblx0XHRcdFx0aWYgKCAkYnRuLmF0dHIoICdkYXRhLXRleHQnICkgKSB7XG5cdFx0XHRcdFx0dmFyIHRleHQgPSAkYnRuLnRleHQoKTtcblx0XHRcdFx0XHQkYnRuLnRleHQoICRidG4uYXR0ciggJ2RhdGEtdGV4dCcgKSApO1xuXHRcdFx0XHRcdCRidG4uYXR0ciggJ2RhdGEtdGV4dCcsIHRleHQgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIHN3aXRjaCBjbGFzc2VzIG9uIGFsbCBleHBhbmRhYmxlIGVsZW1lbnRzXG5cdFx0XHRcdCR0YWJsZS5maW5kKCAnLmV4cGFuZGFibGUnICkuZWFjaCggZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0XHRpZiAoICQoIHRoaXMgKS5oYXNDbGFzcyggJ2Nsb3NlZCcgKSApIHtcblx0XHRcdFx0XHRcdCQoIHRoaXMgKS5hZGRDbGFzcyggJ29wZW5lZCcgKS5yZW1vdmVDbGFzcyggJ2Nsb3NlZCcgKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0JCggdGhpcyApLmFkZENsYXNzKCAnY2xvc2VkJyApLnJlbW92ZUNsYXNzKCAnb3BlbmVkJyApO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9ICk7XG5cblx0XHRcdH0gKTtcblxuXHRcdH07XG5cblx0XHQvLyBnb1xuXHRcdHRoaXMuaW5pdCgpO1xuXG5cdH07XG5cblx0Ly8gaW5pdGFsaXplIHRoZSBvYmplY3Rcblx0d2luZG93LmxsbXMubWV0YWJveGVzID0gbmV3IE1ldGFib3hlcygpO1xuXG59ICkoIGpRdWVyeSApO1xuIiwiLyoqXG4gKiBMaWZ0ZXJMTVMgQWRtaW4gTWV0YWJveCBSZXBlYXRlciBGaWVsZFxuICogQHNpbmNlICAgIDMuMTEuMFxuICogQHZlcnNpb24gIDMuMjMuMFxuICovXG50aGlzLnJlcGVhdGVycyA9IHtcblxuXHQvKipcblx0ICogUmVmZXJlbmNlIHRvIHRoZSBwYXJlbnQgbWV0YWJveCBjbGFzc1xuXHQgKiBAdHlwZSAgb2JqXG5cdCAqL1xuXHRtZXRhYm94ZXM6IHRoaXMsXG5cblx0LyoqXG5cdCAqIGpRdWVyeSBzZWxlY3RvciBmb3IgYWxsIHJlcGVhdGVyIGVsZW1lbnRzIG9uIHRoZSBjdXJyZW50IHNjcmVlblxuXHQgKiBAdHlwZSAge1t0eXBlXX1cblx0ICovXG5cdCRyZXBlYXRlcnM6IG51bGwsXG5cblx0LyoqXG5cdCAqIEluaXRcblx0ICogQHJldHVybiAgIHZvaWRcblx0ICogQHNpbmNlICAgIDMuMTEuMFxuXHQgKiBAdmVyc2lvbiAgMy4yMy4wXG5cdCAqL1xuXHRpbml0OiBmdW5jdGlvbigpIHtcblxuXHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdHNlbGYuJHJlcGVhdGVycyA9ICQoICcubGxtcy1tYi1saXN0LnJlcGVhdGVyJyApO1xuXG5cdFx0aWYgKCBzZWxmLiRyZXBlYXRlcnMubGVuZ3RoICkge1xuXG5cdFx0XHQvLyB3YWl0IGZvciB0aW55TUNFIGp1c3QgaW4gY2FzZSB0aGVpciBlZGl0b3JzIGluIHRoZSByZXBlYXRlcnNcblx0XHRcdExMTVMud2FpdF9mb3IoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gKCAndW5kZWZpbmVkJyAhPT0gdHlwZW9mIHRpbnlNQ0UgKTtcblx0XHRcdH0sIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRzZWxmLmxvYWQoKTtcblx0XHRcdFx0c2VsZi5iaW5kKCk7XG5cdFx0XHR9ICk7XG5cblx0XHRcdC8vIG9uIGNsaWNrIG9mIGFueSBwb3N0IHN1Ym1pdCBidXR0b25zIGFkZCBzb21lIGRhdGEgdG8gdGhlIHN1Ym1pdCBidXR0b25cblx0XHRcdC8vIHNvIHdlIGNhbiBzZWUgd2hpY2ggYnV0dG9uIHRvIHRyaWdnZXIgYWZ0ZXIgcmVwZWF0ZXJzIGFyZSBmaW5pc2hlZFxuXHRcdFx0JCggJyNwb3N0IGlucHV0W3R5cGU9XCJzdWJtaXRcIl0sICNwb3N0LXByZXZpZXcnICkub24oICdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQkKCB0aGlzICkuYXR0ciggJ2RhdGEtbGxtcy1jbGlja2VkJywgJ3llcycgKTtcblx0XHRcdH0gKTtcblxuXHRcdFx0Ly8gaGFuZGxlIHBvc3Qgc3VibWlzc2lvblxuXHRcdFx0JCggJyNwb3N0JyApLm9uKCAnc3VibWl0Jywgc2VsZi5oYW5kbGVfc3VibWl0ICk7XG5cblx0XHR9XG5cblx0fSxcblxuXHQvKipcblx0ICogQmluZCBET00gRXZlbnRzXG5cdCAqIEByZXR1cm4gICB2b2lkXG5cdCAqIEBzaW5jZSAgICAzLjExLjBcblx0ICogQHZlcnNpb24gIDMuMTMuMFxuXHQgKi9cblx0YmluZDogZnVuY3Rpb24oKSB7XG5cblx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRzZWxmLiRyZXBlYXRlcnMuZWFjaCggZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciAkcmVwZWF0ZXIgPSAkKCB0aGlzICksXG5cdFx0XHRcdCRyb3dzID0gJHJlcGVhdGVyLmZpbmQoICcubGxtcy1yZXBlYXRlci1yb3dzJyApLFxuXHRcdFx0XHQkbW9kZWwgPSAkcmVwZWF0ZXIuZmluZCggJy5sbG1zLXJlcGVhdGVyLW1vZGVsJyApO1xuXG5cdFx0XHR0aW55TUNFLkVkaXRvck1hbmFnZXIuZXhlY0NvbW1hbmQoICdtY2VSZW1vdmVFZGl0b3InLCB0cnVlLCAkbW9kZWwuZmluZCggJy5sbG1zLW1iLWxpc3QuZWRpdG9yIHRleHRhcmVhJyApLmF0dHIoICdpZCcgKSApO1xuXG5cdFx0XHQvLyBmb3IgdGhlIHJlcGVhdGVyICsgYnV0dG9uXG5cdFx0XHQkcmVwZWF0ZXIuZmluZCggJy5sbG1zLXJlcGVhdGVyLW5ldy1idG4nICkub24oICdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRzZWxmLmFkZF9yb3coICRyZXBlYXRlciwgbnVsbCwgdHJ1ZSApO1xuXHRcdFx0fSApO1xuXG5cdFx0XHQvLyBtYWtlIHJlcGVhdGVyIHJvd3Mgc29ydGFibGVcblx0XHRcdCRyb3dzLnNvcnRhYmxlKCB7XG5cdFx0XHRcdGhhbmRsZTogJy5sbG1zLWRyYWctaGFuZGxlJyxcblx0XHRcdFx0aXRlbXM6ICcubGxtcy1yZXBlYXRlci1yb3cnLFxuXHRcdFx0XHRzdGFydDogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHtcblx0XHRcdFx0XHQkcm93cy5hZGRDbGFzcyggJ2RyYWdnaW5nJyApO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRzdG9wOiBmdW5jdGlvbiggZXZlbnQsIHVpICkge1xuXHRcdFx0XHRcdCRyb3dzLnJlbW92ZUNsYXNzKCAnZHJhZ2dpbmcnICk7XG5cblx0XHRcdFx0XHR2YXIgJGVkcyA9IHVpLml0ZW0uZmluZCggJ3RleHRhcmVhLndwLWVkaXRvci1hcmVhJyApO1xuXHRcdFx0XHRcdCRlZHMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHR2YXIgZWRfaWQgPSAkKCB0aGlzICkuYXR0ciggJ2lkJyApO1xuXHRcdFx0XHRcdFx0dGlueU1DRS5FZGl0b3JNYW5hZ2VyLmV4ZWNDb21tYW5kKCAnbWNlUmVtb3ZlRWRpdG9yJywgdHJ1ZSwgZWRfaWQgKTtcblx0XHRcdFx0XHRcdHRpbnlNQ0UuRWRpdG9yTWFuYWdlci5leGVjQ29tbWFuZCggJ21jZUFkZEVkaXRvcicsIHRydWUsIGVkX2lkICk7XG5cdFx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdFx0c2VsZi5zYXZlKCAkcmVwZWF0ZXIgKTtcblx0XHRcdFx0fSxcblx0XHRcdH0gKTtcblxuXHRcdFx0JHJlcGVhdGVyLm9uKCAnY2xpY2snLCAnLmxsbXMtcmVwZWF0ZXItcmVtb3ZlJywgZnVuY3Rpb24oIGUgKSB7XG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdHZhciAkcm93ID0gJCggdGhpcyApLmNsb3Nlc3QoICcubGxtcy1yZXBlYXRlci1yb3cnICk7XG5cdFx0XHRcdGlmICggd2luZG93LmNvbmZpcm0oIExMTVMubDEwbi50cmFuc2xhdGUoICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgcm93PyBUaGlzIGNhbm5vdCBiZSB1bmRvbmUuJyApICkgKSB7XG5cdFx0XHRcdFx0JHJvdy5yZW1vdmUoKTtcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdHNlbGYuc2F2ZSggJHJlcGVhdGVyICk7XG5cdFx0XHRcdFx0fSwgMSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cblx0XHR9ICk7XG5cblx0fSxcblxuXHQvKipcblx0ICogQWRkIGEgbmV3IHJvdyB0byBhIHJlcGVhdGVyIHJvd3MgZ3JvdXBcblx0ICogQHBhcmFtICAgIG9iaiAgICAkcmVwZWF0ZXIgIGpRdWVyeSBzZWxlY3RvciBmb3IgdGhlIHJlcGVhdGVyIHRvIGFkZCBhIHJvdyB0b1xuXHQgKiBAcGFyYW0gICAgb2JqICAgIGRhdGEgICAgICAgb3B0aW9uYWwgb2JqZWN0IG9mIGRhdGEgdG8gZmlsbCBmaWVsZHMgaW4gdGhlIHJvdyB3aXRoXG5cdCAqIEBwYXJhbSAgICBib29sICAgZXhwYW5kICAgICBpZiB0cnVlLCB3aWxsIGF1dG9tYXRpY2FsbHkgb3BlbiB0aGUgcm93IGFmdGVyIGFkZGluZyBpdCB0byB0aGUgZG9tXG5cdCAqIEByZXR1cm4gXHQgdm9pZFxuXHQgKiBAc2luY2UgICAgMy4xMS4wXG5cdCAqIEB2ZXJzaW9uICAzLjExLjBcblx0ICovXG5cdGFkZF9yb3c6IGZ1bmN0aW9uKCAkcmVwZWF0ZXIsIGRhdGEsIGV4cGFuZCApIHtcblxuXHRcdHZhciBzZWxmID0gdGhpcyxcblx0XHRcdCRyb3dzID0gJHJlcGVhdGVyLmZpbmQoICcubGxtcy1yZXBlYXRlci1yb3dzJyApLFxuXHRcdFx0JG1vZGVsID0gJHJlcGVhdGVyLmZpbmQoICcubGxtcy1yZXBlYXRlci1tb2RlbCcgKSxcblx0XHRcdCRyb3cgPSAkbW9kZWwuZmluZCggJy5sbG1zLXJlcGVhdGVyLXJvdycgKS5jbG9uZSgpLFxuXHRcdFx0bmV3X2luZGV4ID0gJHJlcGVhdGVyLmZpbmQoICcubGxtcy1yZXBlYXRlci1yb3cnICkubGVuZ3RoLFxuXHRcdFx0ZWRpdG9yID0gc2VsZi5yZWluZGV4KCAkcm93LCBuZXdfaW5kZXggKTtcblxuXHRcdGlmICggZGF0YSApIHtcblx0XHRcdCQuZWFjaCggZGF0YSwgZnVuY3Rpb24oIGtleSwgdmFsICkge1xuXG5cdFx0XHRcdHZhciAkZmllbGQgPSAkcm93LmZpbmQoICdbbmFtZV49XCInICsga2V5ICsgJ1wiXScpO1xuXG5cdFx0XHRcdGlmICggJGZpZWxkLmhhc0NsYXNzKCAnbGxtcy1zZWxlY3QyLXN0dWRlbnQnICkgKSB7XG5cdFx0XHRcdFx0JC5lYWNoKCB2YWwsIGZ1bmN0aW9uKCBpLCBkYXRhICkge1xuXHRcdFx0XHRcdFx0JGZpZWxkLmFwcGVuZCggJzxvcHRpb24gdmFsdWU9XCInICsgZGF0YS5rZXkgKyAnXCIgc2VsZWN0ZWQ9XCJzZWxlY3RlZFwiPicgKyBkYXRhLnRpdGxlICsgJzwvb3B0aW9uPicpXG5cdFx0XHRcdFx0fSApIDtcblx0XHRcdFx0XHQkZmllbGQudHJpZ2dlciggJ2NoYW5nZScgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQkZmllbGQudmFsKCB2YWwgKTtcblx0XHRcdFx0fVxuXG5cblx0XHRcdH0gKTtcblx0XHR9XG5cblx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdHNlbGYuYmluZF9yb3coICRyb3cgKTtcblx0XHR9LCAxICk7XG5cblx0XHQkcm93cy5hcHBlbmQoICRyb3cgKTtcblx0XHRpZiAoIGV4cGFuZCApIHtcblx0XHRcdCRyb3cuZmluZCggJy5sbG1zLWNvbGxhcHNpYmxlLWhlYWRlcicgKS50cmlnZ2VyKCAnY2xpY2snICk7XG5cdFx0fVxuXHRcdHRpbnlNQ0UuRWRpdG9yTWFuYWdlci5leGVjQ29tbWFuZCggJ21jZUFkZEVkaXRvcicsIHRydWUsIGVkaXRvciApO1xuXG5cdFx0JHJlcGVhdGVyLnRyaWdnZXIoICdsbG1zLW5ldy1yZXBlYXRlci1yb3cnLCB7XG5cdFx0XHQkcm93OiAkcm93LFxuXHRcdFx0ZGF0YTogZGF0YSxcblx0XHR9ICk7XG5cblx0fSxcblxuXHQvKipcblx0ICogQmluZCBET00gZXZlbnRzIGZvciBhIHNpbmdsZSByZXBlYXRlciByb3dcblx0ICogQHBhcmFtICAgIG9iaiAgICRyb3cgIGpRdWVyeSBzZWxlY3RvciBmb3IgdGhlIHJvd1xuXHQgKiBAcmV0dXJuICAgdm9pZFxuXHQgKiBAc2luY2UgICAgMy4xMS4wXG5cdCAqIEB2ZXJzaW9uICAzLjEzLjBcblx0ICovXG5cdGJpbmRfcm93OiBmdW5jdGlvbiggJHJvdyApIHtcblxuXHRcdHRoaXMuYmluZF9yb3dfaGVhZGVyKCAkcm93ICk7XG5cblx0XHQkcm93LmZpbmQoICcubGxtcy1zZWxlY3QyJyApLmxsbXNTZWxlY3QyKCB7XG5cdFx0XHR3aWR0aDogJzEwMCUnLFxuXHRcdH0gKTtcblxuXHRcdCRyb3cuZmluZCggJy5sbG1zLXNlbGVjdDItc3R1ZGVudCcgKS5sbG1zU3R1ZGVudHNTZWxlY3QyKCk7XG5cblx0XHR0aGlzLm1ldGFib3hlcy5iaW5kX2RhdGVwaWNrZXJzKCAkcm93LmZpbmQoICcubGxtcy1kYXRlcGlja2VyJyApICk7XG5cdFx0dGhpcy5tZXRhYm94ZXMuYmluZF9jb250cm9sbGVycyggJHJvdy5maW5kKCAnW2RhdGEtaXMtY29udHJvbGxlcl0nICkgKTtcblx0XHQvLyB0aGlzLm1ldGFib3hlcy5iaW5kX21lcmdlX2NvZGVfYnV0dG9ucyggJHJvdy5maW5kKCAnLmxsbXMtbWVyZ2UtY29kZS13cmFwcGVyJyApICk7XG5cblx0fSxcblxuXHQvKipcblx0ICogQmluZCByb3cgaGVhZGVyIGV2ZW50c1xuXHQgKiBAcGFyYW0gICAgb2JqICAgJHJvdyAgalF1ZXJ5IHNlbGVjdG9yIGZvciB0aGUgcm93XG5cdCAqIEByZXR1cm4gICB2b2lkXG5cdCAqIEBzaW5jZSAgICAzLjExLjBcblx0ICogQHZlcnNpb24gIDMuMTEuMFxuXHQgKi9cblx0YmluZF9yb3dfaGVhZGVyOiBmdW5jdGlvbiggJHJvdyApIHtcblxuXHRcdC8vIGhhbmRsZSB0aGUgdGl0bGUgZmllbGQgYmluZGluZ1xuXHRcdHZhciAkdGl0bGUgPSAkcm93LmZpbmQoICcubGxtcy1yZXBlYXRlci10aXRsZScgKSxcblx0XHRcdCRmaWVsZCA9ICRyb3cuZmluZCggJy5sbG1zLWNvbGxhcHNpYmxlLWhlYWRlci10aXRsZS1maWVsZCcgKTtcblxuXHRcdCR0aXRsZS5hdHRyKCAnZGF0YS1kZWZhdWx0JywgJHRpdGxlLnRleHQoKSApO1xuXG5cdFx0JGZpZWxkLm9uKCAna2V5dXAgZm9jdXNvdXQgYmx1cicsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHZhbCA9ICQoIHRoaXMgKS52YWwoKTtcblx0XHRcdGlmICggISB2YWwgKSB7XG5cdFx0XHRcdHZhbCA9ICR0aXRsZS5hdHRyKCAnZGF0YS1kZWZhdWx0JyApO1xuXHRcdFx0fVxuXHRcdFx0JHRpdGxlLnRleHQoIHZhbCApO1xuXHRcdH0gKS50cmlnZ2VyKCAna2V5dXAnICk7XG5cblx0fSxcblxuXHQvKipcblx0ICogSGFuZGxlIFdQIFBvc3QgZm9ybSBzdWJtaXNzaW9uIHRvIGVuc3VyZSByZXBlYXRlcnMgYXJlIHNhdmVkIGJlZm9yZSBzdWJtaXR0aW5nIHRoZSBmb3JtIHRvIHNhdmUvcHVibGlzaCB0aGUgcG9zdFxuXHQgKiBAcGFyYW0gICAgb2JqICAgZSAgSlMgZXZlbnQgb2JqZWN0XG5cdCAqIEByZXR1cm4gICB2b2lkXG5cdCAqIEBzaW5jZSAgICAzLjExLjBcblx0ICogQHZlcnNpb24gIDMuMjMuMFxuXHQgKi9cblx0aGFuZGxlX3N1Ym1pdDogZnVuY3Rpb24oIGUgKSB7XG5cblx0XHQvLyBnZXQgdGhlIGJ1dHRvbiB1c2VkIHRvIHN1Ym1pdCB0aGUgZm9ybVxuXHRcdHZhciAkYnRuID0gJCggJyNwb3N0IFtkYXRhLWxsbXMtY2xpY2tlZD1cInllc1wiXScgKSxcblx0XHRcdCRzcGlubmVyID0gJGJ0bi5wYXJlbnQoKS5maW5kKCAnLnNwaW5uZXInICk7XG5cblx0XHRpZiAoICRidG4uaXMoICcjcG9zdC1wcmV2aWV3JyApICkge1xuXHRcdFx0JGJ0bi5yZW1vdmVBdHRyKCAnZGF0YS1sbG1zLWNsaWNrZWQnICk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0Ly8gY29yZSBVWCB0byBwcmV2ZW50IG11bHRpLWNsaWNrL29yIHRoZSBhcHBlYXJhbmNlIG9mIGEgZGVsYXlcblx0XHQkKCAnI3Bvc3QgaW5wdXRbdHlwZT1cInN1Ym1pdFwiXScgKS5hZGRDbGFzcyggJ2Rpc2FibGVkJyApLmF0dHIoICdkaXNhYmxlZCcsICdkaXNhYmxlZCcgKTtcblx0XHQkc3Bpbm5lci5hZGRDbGFzcyggJ2lzLWFjdGl2ZScgKTtcblxuXHRcdHZhciBzZWxmID0gd2luZG93LmxsbXMubWV0YWJveGVzLnJlcGVhdGVycyxcblx0XHRcdGkgPSAwLFxuXHRcdFx0d2FpdDtcblxuXHRcdHNlbGYuJHJlcGVhdGVycy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdHNlbGYuc2F2ZSggJCggdGhpcyApICk7XG5cdFx0fSApO1xuXG5cdFx0d2FpdCA9IHNldEludGVydmFsKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0aWYgKCBpID49IDU5IHx8ICEgJCggJy5sbG1zLW1iLWxpc3QucmVwZWF0ZXIucHJvY2Vzc2luZycgKS5sZW5ndGggKSB7XG5cblx0XHRcdFx0Y2xlYXJJbnRlcnZhbCggd2FpdCApO1xuXHRcdFx0XHQkKCAnI3Bvc3QnICkub2ZmKCAnc3VibWl0JywgdGhpcy5oYW5kbGVfc3VibWl0ICk7XG5cdFx0XHRcdCRzcGlubmVyLnJlbW92ZUNsYXNzKCAnaXMtYWN0aXZlJyApO1xuXHRcdFx0XHQkYnRuLnJlbW92ZUNsYXNzKCAnZGlzYWJsZWQnICkucmVtb3ZlQXR0ciggJ2Rpc2FibGVkJyApLnRyaWdnZXIoICdjbGljaycgKTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRpKys7XG5cblx0XHRcdH1cblxuXHRcdH0sIDEwMDAgKTtcblxuXG5cdH0sXG5cblx0LyoqXG5cdCAqIExvYWQgcmVwZXJlYXRlciBkYXRhIGZyb20gdGhlIHNlcnZlciBhbmQgY3JlYXRlIHJvd3MgaW4gdGhlIERPTVxuXHQgKiBAcmV0dXJuICAgdm9pZFxuXHQgKiBAc2luY2UgICAgMy4xMS4wXG5cdCAqIEB2ZXJzaW9uICAzLjEyLjFcblx0ICovXG5cdGxvYWQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0c2VsZi4kcmVwZWF0ZXJzLmVhY2goIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHR2YXIgJHJlcGVhdGVyID0gJCggdGhpcyApO1xuXG5cdFx0XHQvLyBlbnN1cmUgdGhlIHJlcGVhdGVyIGlzIG9ubHkgbG9hZGVkIG9uY2UgdG8gcHJldmVudCBkdXBsaWNhdGVzIHJlc3VsdGluZyBmcm9tIGR1cGxpY2F0aW5nIGJpbmRpbmdcblx0XHRcdC8vIG9uIGNlcnRhaW4gc2l0ZXMgd2hpY2ggSSBjYW5ub3QgcXVpdGUgZXhwbGFpbi4uLlxuXHRcdFx0aWYgKCAkcmVwZWF0ZXIuaGFzQ2xhc3MoICdpcy1sb2FkZWQnICkgfHwgJHJlcGVhdGVyLmhhc0NsYXNzKCAncHJvY2Vzc2luZycgKSApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRzZWxmLnN0b3JlKCAkcmVwZWF0ZXIsICdsb2FkJywgZnVuY3Rpb24oIGRhdGEgKSB7XG5cblx0XHRcdFx0JHJlcGVhdGVyLmFkZENsYXNzKCAnaXMtbG9hZGVkJyApO1xuXG5cdFx0XHRcdCQuZWFjaCggZGF0YS5kYXRhLCBmdW5jdGlvbiggaSwgb2JqICkge1xuXHRcdFx0XHRcdHNlbGYuYWRkX3JvdyggJHJlcGVhdGVyLCBvYmosIGZhbHNlICk7XG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0XHQvLyBmb3IgZWFjaCByb3cgd2l0aGluIHRoZSByZXBlYXRlclxuXHRcdFx0XHQkcmVwZWF0ZXIuZmluZCggJy5sbG1zLXJlcGVhdGVyLXJvd3MgLmxsbXMtcmVwZWF0ZXItcm93JyApLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHNlbGYuYmluZF9yb3coICQoIHRoaXMgKSApO1xuXHRcdFx0XHR9ICk7XG5cblx0XHRcdH0gKTtcblxuXG5cblx0XHR9ICk7XG5cblx0fSxcblxuXHQvKipcblx0ICogUmVpbmRleCBhIHJvd1xuXHQgKiByZW5hbWVzIGlkcywgYXR0cnMsIGFuZCBldGMuLi5cblx0ICogVXNlZCB3aGVuIGNsb25pbmcgdGhlIG1vZGVsIGZvciBuZXcgcm93c1xuXHQgKiBAcGFyYW0gICAgb2JqICAgICAgICAgICRyb3cgIGpRdWVyeSBzZWxlY3RvciBmb3IgdGhlIHJvd1xuXHQgKiBAcGFyYW0gICAgaW50fHN0cmluZyAgIGluZGV4ICBpbmRleCAob3IgaWQpIHRvIHVzZSB3aGVuIHJlbmFtaW5nXG5cdCAqIEByZXR1cm4gICBzdHJpbmdcblx0ICogQHNpbmNlICAgIDMuMTEuMFxuXHQgKiBAdmVyc2lvbiAgMy4xMS4wXG5cdCAqL1xuXHRyZWluZGV4OiBmdW5jdGlvbiggJHJvdywgaW5kZXggKSB7XG5cblx0XHR2YXIgb2xkX2luZGV4ID0gJHJvdy5hdHRyKCAnZGF0YS1yb3ctb3JkZXInICksXG5cdFx0XHQkZWQgPSAkcm93LmZpbmQoICcubGxtcy1tYi1saXN0LmVkaXRvciB0ZXh0YXJlYScgKTtcblxuXHRcdHRpbnlNQ0UuRWRpdG9yTWFuYWdlci5leGVjQ29tbWFuZCggJ21jZVJlbW92ZUVkaXRvcicsIHRydWUsICRlZC5hdHRyKCAnaWQnICkgKTtcblxuXHRcdGZ1bmN0aW9uIHJlcGxhY2VfYXR0ciggJGVsLCBhdHRyICkge1xuXHRcdFx0JGVsLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgc3RyID0gJCggdGhpcyApLmF0dHIoIGF0dHIgKTtcblx0XHRcdFx0JCggdGhpcyApLmF0dHIoIGF0dHIsIHN0ci5yZXBsYWNlKCBvbGRfaW5kZXgsIGluZGV4ICkgKTtcblx0XHRcdH0gKTtcblx0XHR9O1xuXG5cdFx0JHJvdy5hdHRyKCAnZGF0YS1yb3ctb3JkZXInLCBpbmRleCApO1xuXG5cdFx0cmVwbGFjZV9hdHRyKCAkcm93LCAnZGF0YS1yb3ctb3JkZXInICk7XG5cblx0XHRyZXBsYWNlX2F0dHIoICRyb3cuZmluZCggJ2J1dHRvbi5pbnNlcnQtbWVkaWEnICksICdkYXRhLWVkaXRvcicgKTtcblxuXHRcdHJlcGxhY2VfYXR0ciggJHJvdy5maW5kKCAnaW5wdXRbbmFtZV49XCJfbGxtc1wiXSwgdGV4dGFyZWFbbmFtZV49XCJfbGxtc1wiXSwgc2VsZWN0W25hbWVePVwiX2xsbXNcIl0nICksICdpZCcgKTtcblx0XHRyZXBsYWNlX2F0dHIoICRyb3cuZmluZCggJ2lucHV0W25hbWVePVwiX2xsbXNcIl0sIHRleHRhcmVhW25hbWVePVwiX2xsbXNcIl0sIHNlbGVjdFtuYW1lXj1cIl9sbG1zXCJdJyApLCAnbmFtZScgKTtcblx0XHRyZXBsYWNlX2F0dHIoICRyb3cuZmluZCggJ1tkYXRhLWNvbnRyb2xsZXJdJyApLCAnZGF0YS1jb250cm9sbGVyJyApO1xuXHRcdHJlcGxhY2VfYXR0ciggJHJvdy5maW5kKCAnW2RhdGEtY29udHJvbGxlcl0nICksICdkYXRhLWNvbnRyb2xsZXInICk7XG5cdFx0cmVwbGFjZV9hdHRyKCAkcm93LmZpbmQoICdidXR0b24ud3Atc3dpdGNoLWVkaXRvcicgKSwgJ2RhdGEtd3AtZWRpdG9yLWlkJyApO1xuXHRcdHJlcGxhY2VfYXR0ciggJHJvdy5maW5kKCAnYnV0dG9uLndwLXN3aXRjaC1lZGl0b3InICksICdpZCcgKTtcblx0XHRyZXBsYWNlX2F0dHIoICRyb3cuZmluZCggJy53cC1lZGl0b3ItdG9vbHMnICksICdpZCcgKTtcblx0XHRyZXBsYWNlX2F0dHIoICRyb3cuZmluZCggJy53cC1lZGl0b3ItY29udGFpbmVyJyApLCAnaWQnICk7XG5cblxuXHRcdHJldHVybiAkZWQuYXR0ciggJ2lkJyApO1xuXG5cdH0sXG5cblx0LyoqXG5cdCAqIFNhdmUgYSBzaW5nbGUgcmVwZWF0ZXJzIGRhdGEgdG8gdGhlIHNlcnZlclxuXHQgKiBAcGFyYW0gICAgb2JqICAgJHJlcGVhdGVyICBqUXVlcnkgc2VsZWN0b3IgZm9yIGEgcmVwZWF0ZXIgZWxlbWVudFxuXHQgKiBAcmV0dXJuICAgdm9pc1xuXHQgKiBAc2luY2UgICAgMy4xMS4wXG5cdCAqIEB2ZXJzaW9uICAzLjEzLjBcblx0ICovXG5cdHNhdmU6IGZ1bmN0aW9uKCAkcmVwZWF0ZXIgKSB7XG5cdFx0JHJlcGVhdGVyLnRyaWdnZXIoICdsbG1zLXJlcGVhdGVyLWJlZm9yZS1zYXZlJywgeyAkZWw6ICRyZXBlYXRlciB9ICk7XG5cdFx0dGhpcy5zdG9yZSggJHJlcGVhdGVyLCAnc2F2ZScgKTtcblx0fSxcblxuXHQvKipcblx0ICogQ29udmVydCBhIHJlcGVhdGVyIGVsZW1lbnQgaW50byBhbiBhcnJheSBvZiBvYmplY3RzIHRoYXQgY2FuIGJlIHNhdmVkIHRvIHRoZSBkYXRhYmFzZVxuXHQgKiBAcGFyYW0gICAgb2JqICAgJHJlcGVhdGVyICBqUXVlcnkgc2VsZWN0b3IgZm9yIGEgcmVwZWF0ZXIgZWxlbWVudFxuXHQgKiBAcmV0dXJuICAgdm9pZFxuXHQgKiBAc2luY2UgICAgMy4xMS4wXG5cdCAqIEB2ZXJzaW9uICAzLjExLjBcblx0ICovXG5cdHNlcmlhbGl6ZTogZnVuY3Rpb24oICRyZXBlYXRlciApIHtcblxuXHRcdHZhciByb3dzID0gW107XG5cblx0XHQkcmVwZWF0ZXIuZmluZCggJy5sbG1zLXJlcGVhdGVyLXJvd3MgLmxsbXMtcmVwZWF0ZXItcm93JyApLmVhY2goIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHR2YXIgb2JqID0ge307XG5cblx0XHRcdC8vIGVhc3kuLi5cblx0XHRcdCQoIHRoaXMgKS5maW5kKCAnaW5wdXRbbmFtZV49XCJfbGxtc1wiXSwgc2VsZWN0W25hbWVePVwiX2xsbXNcIl0nICkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdG9ialsgJCggdGhpcyApLmF0dHIoICduYW1lJyApIF0gPSAkKCB0aGlzICkudmFsKCk7XG5cdFx0XHR9ICk7XG5cblx0XHRcdC8vIGNoZWNrIGlmIHRoZSB0ZXh0YXJlYSBpcyBhIHRpbnlNQ0UgaW5zdGFuY2Vcblx0XHRcdCQoIHRoaXMgKS5maW5kKCAndGV4dGFyZWFbbmFtZV49XCJfbGxtc1wiXScgKS5lYWNoKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHR2YXIgbmFtZSA9ICQoIHRoaXMgKS5hdHRyKCAnbmFtZScgKTtcblxuXHRcdFx0XHQvLyBpZiBpdCBpcyBhbiBlZGl0b3Jcblx0XHRcdFx0aWYgKCB0aW55TUNFLmVkaXRvcnNbIG5hbWUgXSApIHtcblx0XHRcdFx0XHRvYmpbIG5hbWUgXSA9IHRpbnlNQ0UuZWRpdG9yc1sgbmFtZSBdLmdldENvbnRlbnQoKTtcblx0XHRcdFx0Ly8gZ3JhYiB0aGUgdmFsIG9mIHRoZSB0ZXh0YXJlYVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdG9ialsgbmFtZSBdID0gJCggdGhpcyApLnZhbCgpO1xuXHRcdFx0XHR9XG5cblx0XHRcdH0gKTtcblxuXHRcdFx0cm93cy5wdXNoKCBvYmogKTtcblxuXHRcdH0gKTtcblxuXHRcdHJldHVybiByb3dzO1xuXG5cdH0sXG5cblx0LyoqXG5cdCAqIEFKQVggbWV0aG9kIGZvciBpbnRlcmFjdGluZyB3aXRoIHRoZSByZXBlYXRlcidzIGhhbmRsZXIgb24gdGhlIHNlcnZlclxuXHQgKiBAcGFyYW0gICAgb2JqICAgICAgICRyZXBlYXRlciAgalF1ZXJ5IHNlbGVjdG9yIGZvciB0aGUgcmVwZWF0ZXIgZWxlbWVudFxuXHQgKiBAcGFyYW0gICAgc3RyaW5nICAgIGFjdGlvbiAgICAgYWN0aW9uIHRvIGNhbGwgW3NhdmV8bG9hZF1cblx0ICogQHBhcmFtICAgIGZ1bmN0aW9uICBjYiAgICAgICAgIGNhbGxiYWNrIGZ1bmN0aW9uXG5cdCAqIEByZXR1cm4gICB2b2lkXG5cdCAqIEBzaW5jZSAgICAzLjExLjBcblx0ICogQHZlcnNpb24gIDMuMTEuMFxuXHQgKi9cblx0c3RvcmU6IGZ1bmN0aW9uKCAkcmVwZWF0ZXIsIGFjdGlvbiwgY2IgKSB7XG5cblx0XHRjYiA9IGNiIHx8IGZ1bmN0aW9uKCl7fTtcblx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHRkYXRhID0ge1xuXHRcdFx0XHRhY3Rpb246ICRyZXBlYXRlci5maW5kKCAnLmxsbXMtcmVwZWF0ZXItZmllbGQtaGFuZGxlcicgKS52YWwoKSxcblx0XHRcdFx0c3RvcmVfYWN0aW9uOiBhY3Rpb24sXG5cdFx0XHR9O1xuXG5cdFx0aWYgKCAnc2F2ZScgPT09IGFjdGlvbiApIHtcblx0XHRcdGRhdGEucm93cyA9IHNlbGYuc2VyaWFsaXplKCAkcmVwZWF0ZXIgKTtcblx0XHR9XG5cblx0XHRMTE1TLkFqYXguY2FsbCgge1xuXHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdCRyZXBlYXRlci5hZGRDbGFzcyggJ3Byb2Nlc3NpbmcnICk7XG5cdFx0XHRcdExMTVMuU3Bpbm5lci5zdGFydCggJHJlcGVhdGVyICk7XG5cblx0XHRcdH0sXG5cdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiggciApIHtcblxuXHRcdFx0XHRjYiggciApO1xuXHRcdFx0XHRMTE1TLlNwaW5uZXIuc3RvcCggJHJlcGVhdGVyICk7XG5cdFx0XHRcdCRyZXBlYXRlci5yZW1vdmVDbGFzcyggJ3Byb2Nlc3NpbmcnICk7XG5cblx0XHRcdH1cblxuXHRcdH0gKTtcblxuXHR9XG5cbn07XG50aGlzLnJlcGVhdGVycy5pbml0KCk7XG4iXX0=
